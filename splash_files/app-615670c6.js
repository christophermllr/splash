/**
 * ConnectTheGrid -
 * @authors WMP
 * @version v0.2.0
 * @link
 * @license WMP
 */
!function(e,t){"function"==typeof define&&define.amd?define([],t):"undefined"!=typeof module&&module.exports?module.exports=t():e.tv4=t()}(this,function(){function e(t,a){if(t===a)return!0;if("object"==typeof t&&"object"==typeof a){if(Array.isArray(t)!==Array.isArray(a))return!1;if(Array.isArray(t)){if(t.length!==a.length)return!1;for(var n=0;n<t.length;n++)if(!e(t[n],a[n]))return!1}else{var i;for(i in t)if(void 0===a[i]&&void 0!==t[i])return!1;for(i in a)if(void 0===t[i]&&void 0!==a[i])return!1;for(i in t)if(!e(t[i],a[i]))return!1}return!0}return!1}function t(e){var t=String(e).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return t?{href:t[0]||"",protocol:t[1]||"",authority:t[2]||"",host:t[3]||"",hostname:t[4]||"",port:t[5]||"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""}:null}function a(e,a){function n(e){var t=[];return e.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(e){"/.."===e?t.pop():t.push(e)}),t.join("").replace(/^\//,"/"===e.charAt(0)?"/":"")}return a=t(a||""),e=t(e||""),a&&e?(a.protocol||e.protocol)+(a.protocol||a.authority?a.authority:e.authority)+n(a.protocol||a.authority||"/"===a.pathname.charAt(0)?a.pathname:a.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+a.pathname:e.pathname)+(a.protocol||a.authority||a.pathname?a.search:a.search||e.search)+a.hash:null}function n(e){return e.split("#")[0]}function i(e,t){if(e&&"object"==typeof e)if(void 0===t?t=e.id:"string"==typeof e.id&&(t=a(t,e.id),e.id=t),Array.isArray(e))for(var n=0;n<e.length;n++)i(e[n],t);else{"string"==typeof e.$ref&&(e.$ref=a(t,e.$ref));for(var s in e)"enum"!==s&&i(e[s],t)}}function s(e,t,a,n,i){if(Error.call(this),void 0===e)throw new Error("No code supplied for error: "+t);this.message=t,this.code=e,this.dataPath=a||"",this.schemaPath=n||"",this.subErrors=i||null;var s=new Error(this.message);if(this.stack=s.stack||s.stacktrace,!this.stack)try{throw s}catch(s){this.stack=s.stack||s.stacktrace}}function o(e,t){if(t.substring(0,e.length)===e){var a=t.substring(e.length);if(t.length>0&&"/"===t.charAt(e.length-1)||"#"===a.charAt(0)||"?"===a.charAt(0))return!0}return!1}function r(e){var t=new l,s=e||"en",o={addFormat:function(){t.addFormat.apply(t,arguments)},language:function(e){return e?(m[e]||(e=e.split("-")[0]),m[e]?(s=e,e):!1):s},addLanguage:function(e,t){var a;for(a in c)t[a]&&!t[c[a]]&&(t[c[a]]=t[a]);var n=e.split("-")[0];if(m[n]){m[e]=Object.create(m[n]);for(a in t)"undefined"==typeof m[n][a]&&(m[n][a]=t[a]),m[e][a]=t[a]}else m[e]=t,m[n]=t;return this},freshApi:function(e){var t=r();return e&&t.language(e),t},validate:function(e,a,n,i){var o=new l(t,!1,m[s],n,i);"string"==typeof a&&(a={$ref:a}),o.addSchema("",a);var r=o.validateAll(e,a,null,null,"");return!r&&i&&(r=o.banUnknownProperties()),this.error=r,this.missing=o.missing,this.valid=null===r,this.valid},validateResult:function(){var e={};return this.validate.apply(e,arguments),e},validateMultiple:function(e,a,n,i){var o=new l(t,!0,m[s],n,i);"string"==typeof a&&(a={$ref:a}),o.addSchema("",a),o.validateAll(e,a,null,null,""),i&&o.banUnknownProperties();var r={};return r.errors=o.errors,r.missing=o.missing,r.valid=0===r.errors.length,r},addSchema:function(){return t.addSchema.apply(t,arguments)},getSchema:function(){return t.getSchema.apply(t,arguments)},getSchemaMap:function(){return t.getSchemaMap.apply(t,arguments)},getSchemaUris:function(){return t.getSchemaUris.apply(t,arguments)},getMissingUris:function(){return t.getMissingUris.apply(t,arguments)},dropSchemas:function(){t.dropSchemas.apply(t,arguments)},defineKeyword:function(){t.defineKeyword.apply(t,arguments)},defineError:function(e,t,a){if("string"!=typeof e||!/^[A-Z]+(_[A-Z]+)*$/.test(e))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if("number"!=typeof t||t%1!==0||1e4>t)throw new Error("Code number must be an integer > 10000");if("undefined"!=typeof c[e])throw new Error("Error already defined: "+e+" as "+c[e]);if("undefined"!=typeof d[t])throw new Error("Error code already used: "+d[t]+" as "+t);c[e]=t,d[t]=e,u[e]=u[t]=a;for(var n in m){var i=m[n];i[e]&&(i[t]=i[t]||i[e])}},reset:function(){t.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:i,resolveUrl:a,getDocumentUri:n,errorCodes:c};return o}Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=a.length;return function(i){if("object"!=typeof i&&"function"!=typeof i||null===i)throw new TypeError("Object.keys called on non-object");var s=[];for(var o in i)e.call(i,o)&&s.push(o);if(t)for(var r=0;n>r;r++)e.call(i,a[r])&&s.push(a[r]);return s}}()),Object.create||(Object.create=function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var t=Object(this),a=t.length>>>0;if(0===a)return-1;var n=0;if(arguments.length>1&&(n=Number(arguments[1]),n!==n?n=0:0!==n&&n!==1/0&&n!==-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=a)return-1;for(var i=n>=0?n:Math.max(a-Math.abs(n),0);a>i;i++)if(i in t&&t[i]===e)return i;return-1}),Object.isFrozen||(Object.isFrozen=function(e){for(var t="tv4_test_frozen_key";e.hasOwnProperty(t);)t+=Math.random();try{return e[t]=!0,delete e[t],!1}catch(a){return!0}});var l=function(e,t,a,n,i){if(this.missing=[],this.missingMap={},this.formatValidators=e?Object.create(e.formatValidators):{},this.schemas=e?Object.create(e.schemas):{},this.collectMultiple=t,this.errors=[],this.handleError=t?this.collectError:this.returnError,n&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),i&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorMessages=a,this.definedKeywords={},e)for(var s in e.definedKeywords)this.definedKeywords[s]=e.definedKeywords[s].slice(0)};l.prototype.defineKeyword=function(e,t){this.definedKeywords[e]=this.definedKeywords[e]||[],this.definedKeywords[e].push(t)},l.prototype.createError=function(e,t,a,n,i){var o=this.errorMessages[e]||u[e];if("string"!=typeof o)return new s(e,"Unknown error code "+e+": "+JSON.stringify(t),a,n,i);var r=o.replace(/\{([^{}]*)\}/g,function(e,a){var n=t[a];return"string"==typeof n||"number"==typeof n?n:e});return new s(e,r,a,n,i)},l.prototype.returnError=function(e){return e},l.prototype.collectError=function(e){return e&&this.errors.push(e),null},l.prototype.prefixErrors=function(e,t,a){for(var n=e;n<this.errors.length;n++)this.errors[n]=this.errors[n].prefixWith(t,a);return this},l.prototype.banUnknownProperties=function(){for(var e in this.unknownPropertyPaths){var t=this.createError(c.UNKNOWN_PROPERTY,{path:e},e,""),a=this.handleError(t);if(a)return a}return null},l.prototype.addFormat=function(e,t){if("object"==typeof e){for(var a in e)this.addFormat(a,e[a]);return this}this.formatValidators[e]=t},l.prototype.resolveRefs=function(e,t){if(void 0!==e.$ref){if(t=t||{},t[e.$ref])return this.createError(c.CIRCULAR_REFERENCE,{urls:Object.keys(t).join(", ")},"","");t[e.$ref]=!0,e=this.getSchema(e.$ref,t)}return e},l.prototype.getSchema=function(e,t){var a;if(void 0!==this.schemas[e])return a=this.schemas[e],this.resolveRefs(a,t);var n=e,i="";if(-1!==e.indexOf("#")&&(i=e.substring(e.indexOf("#")+1),n=e.substring(0,e.indexOf("#"))),"object"==typeof this.schemas[n]){a=this.schemas[n];var s=decodeURIComponent(i);if(""===s)return this.resolveRefs(a,t);if("/"!==s.charAt(0))return void 0;for(var o=s.split("/").slice(1),r=0;r<o.length;r++){var l=o[r].replace(/~1/g,"/").replace(/~0/g,"~");if(void 0===a[l]){a=void 0;break}a=a[l]}if(void 0!==a)return this.resolveRefs(a,t)}void 0===this.missing[n]&&(this.missing.push(n),this.missing[n]=n,this.missingMap[n]=n)},l.prototype.searchSchemas=function(e,t){if(e&&"object"==typeof e){"string"==typeof e.id&&o(t,e.id)&&void 0===this.schemas[e.id]&&(this.schemas[e.id]=e);for(var a in e)if("enum"!==a)if("object"==typeof e[a])this.searchSchemas(e[a],t);else if("$ref"===a){var i=n(e[a]);i&&void 0===this.schemas[i]&&void 0===this.missingMap[i]&&(this.missingMap[i]=i)}}},l.prototype.addSchema=function(e,t){if("string"!=typeof e||"undefined"==typeof t){if("object"!=typeof e||"string"!=typeof e.id)return;t=e,e=t.id}(e=n(e)+"#")&&(e=n(e)),this.schemas[e]=t,delete this.missingMap[e],i(t,e),this.searchSchemas(t,e)},l.prototype.getSchemaMap=function(){var e={};for(var t in this.schemas)e[t]=this.schemas[t];return e},l.prototype.getSchemaUris=function(e){var t=[];for(var a in this.schemas)(!e||e.test(a))&&t.push(a);return t},l.prototype.getMissingUris=function(e){var t=[];for(var a in this.missingMap)(!e||e.test(a))&&t.push(a);return t},l.prototype.dropSchemas=function(){this.schemas={},this.reset()},l.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},l.prototype.validateAll=function(e,t,a,n,i){var o;if(t=this.resolveRefs(t),!t)return null;if(t instanceof s)return this.errors.push(t),t;var r,l=this.errors.length,c=null,d=null;if(this.checkRecursive&&e&&"object"==typeof e){if(o=!this.scanned.length,e[this.validatedSchemasKey]){var p=e[this.validatedSchemasKey].indexOf(t);if(-1!==p)return this.errors=this.errors.concat(e[this.validationErrorsKey][p]),null}if(Object.isFrozen(e)&&(r=this.scannedFrozen.indexOf(e),-1!==r)){var u=this.scannedFrozenSchemas[r].indexOf(t);if(-1!==u)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[r][u]),null}if(this.scanned.push(e),Object.isFrozen(e))-1===r&&(r=this.scannedFrozen.length,this.scannedFrozen.push(e),this.scannedFrozenSchemas.push([])),c=this.scannedFrozenSchemas[r].length,this.scannedFrozenSchemas[r][c]=t,this.scannedFrozenValidationErrors[r][c]=[];else{if(!e[this.validatedSchemasKey])try{Object.defineProperty(e,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(e,this.validationErrorsKey,{value:[],configurable:!0})}catch(m){e[this.validatedSchemasKey]=[],e[this.validationErrorsKey]=[]}d=e[this.validatedSchemasKey].length,e[this.validatedSchemasKey][d]=t,e[this.validationErrorsKey][d]=[]}}var f=this.errors.length,g=this.validateBasic(e,t,i)||this.validateNumeric(e,t,i)||this.validateString(e,t,i)||this.validateArray(e,t,i)||this.validateObject(e,t,i)||this.validateCombinations(e,t,i)||this.validateFormat(e,t,i)||this.validateDefinedKeywords(e,t,i)||null;if(o){for(;this.scanned.length;){var v=this.scanned.pop();delete v[this.validatedSchemasKey]}this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(g||f!==this.errors.length)for(;a&&a.length||n&&n.length;){var h=a&&a.length?""+a.pop():null,b=n&&n.length?""+n.pop():null;g&&(g=g.prefixWith(h,b)),this.prefixErrors(f,h,b)}return null!==c?this.scannedFrozenValidationErrors[r][c]=this.errors.slice(l):null!==d&&(e[this.validationErrorsKey][d]=this.errors.slice(l)),this.handleError(g)},l.prototype.validateFormat=function(e,t){if("string"!=typeof t.format||!this.formatValidators[t.format])return null;var a=this.formatValidators[t.format].call(null,e,t);return"string"==typeof a||"number"==typeof a?this.createError(c.FORMAT_CUSTOM,{message:a}).prefixWith(null,"format"):a&&"object"==typeof a?this.createError(c.FORMAT_CUSTOM,{message:a.message||"?"},a.dataPath||null,a.schemaPath||"/format"):null},l.prototype.validateDefinedKeywords=function(e,t){for(var a in this.definedKeywords)for(var n=this.definedKeywords[a],i=0;i<n.length;i++){var s=n[i],o=s(e,t[a],t);if("string"==typeof o||"number"==typeof o)return this.createError(c.KEYWORD_CUSTOM,{key:a,message:o}).prefixWith(null,"format");if(o&&"object"==typeof o){var r=o.code||c.KEYWORD_CUSTOM;if("string"==typeof r){if(!c[r])throw new Error("Undefined error code (use defineError): "+r);r=c[r]}var l="object"==typeof o.message?o.message:{key:a,message:o.message||"?"},d=o.schemaPath||"/"+a.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(r,l,o.dataPath||null,d)}}return null},l.prototype.validateBasic=function(e,t,a){var n;return(n=this.validateType(e,t,a))?n.prefixWith(null,"type"):(n=this.validateEnum(e,t,a))?n.prefixWith(null,"type"):null},l.prototype.validateType=function(e,t){if(void 0===t.type)return null;var a=typeof e;null===e?a="null":Array.isArray(e)&&(a="array");var n=t.type;"object"!=typeof n&&(n=[n]);for(var i=0;i<n.length;i++){var s=n[i];if(s===a||"integer"===s&&"number"===a&&e%1===0)return null}return this.createError(c.INVALID_TYPE,{type:a,expected:n.join("/")})},l.prototype.validateEnum=function(t,a){if(void 0===a["enum"])return null;for(var n=0;n<a["enum"].length;n++){var i=a["enum"][n];if(e(t,i))return null}return this.createError(c.ENUM_MISMATCH,{value:"undefined"!=typeof JSON?JSON.stringify(t):t})},l.prototype.validateNumeric=function(e,t,a){return this.validateMultipleOf(e,t,a)||this.validateMinMax(e,t,a)||null},l.prototype.validateMultipleOf=function(e,t){var a=t.multipleOf||t.divisibleBy;return void 0===a?null:"number"==typeof e&&e%a!==0?this.createError(c.NUMBER_MULTIPLE_OF,{value:e,multipleOf:a}):null},l.prototype.validateMinMax=function(e,t){if("number"!=typeof e)return null;if(void 0!==t.minimum){if(e<t.minimum)return this.createError(c.NUMBER_MINIMUM,{value:e,minimum:t.minimum}).prefixWith(null,"minimum");if(t.exclusiveMinimum&&e===t.minimum)return this.createError(c.NUMBER_MINIMUM_EXCLUSIVE,{value:e,minimum:t.minimum}).prefixWith(null,"exclusiveMinimum")}if(void 0!==t.maximum){if(e>t.maximum)return this.createError(c.NUMBER_MAXIMUM,{value:e,maximum:t.maximum}).prefixWith(null,"maximum");if(t.exclusiveMaximum&&e===t.maximum)return this.createError(c.NUMBER_MAXIMUM_EXCLUSIVE,{value:e,maximum:t.maximum}).prefixWith(null,"exclusiveMaximum")}return null},l.prototype.validateString=function(e,t,a){return this.validateStringLength(e,t,a)||this.validateStringPattern(e,t,a)||null},l.prototype.validateStringLength=function(e,t){return"string"!=typeof e?null:void 0!==t.minLength&&e.length<t.minLength?this.createError(c.STRING_LENGTH_SHORT,{length:e.length,minimum:t.minLength}).prefixWith(null,"minLength"):void 0!==t.maxLength&&e.length>t.maxLength?this.createError(c.STRING_LENGTH_LONG,{length:e.length,maximum:t.maxLength}).prefixWith(null,"maxLength"):null},l.prototype.validateStringPattern=function(e,t){if("string"!=typeof e||void 0===t.pattern)return null;var a=new RegExp(t.pattern),n=t.shortTitle?t.shortTitle:t.title;return a.test(e)?null:this.createError(c.STRING_PATTERN,{displayTitle:n})},l.prototype.validateArray=function(e,t,a){return Array.isArray(e)?this.validateArrayLength(e,t,a)||this.validateArrayUniqueItems(e,t,a)||this.validateArrayItems(e,t,a)||null:null},l.prototype.validateArrayLength=function(e,t){var a;return void 0!==t.minItems&&e.length<t.minItems&&(a=this.createError(c.ARRAY_LENGTH_SHORT,{length:e.length,minimum:t.minItems}).prefixWith(null,"minItems"),this.handleError(a))?a:void 0!==t.maxItems&&e.length>t.maxItems&&(a=this.createError(c.ARRAY_LENGTH_LONG,{length:e.length,maximum:t.maxItems}).prefixWith(null,"maxItems"),this.handleError(a))?a:null},l.prototype.validateArrayUniqueItems=function(t,a){if(a.uniqueItems)for(var n=0;n<t.length;n++)for(var i=n+1;i<t.length;i++)if(e(t[n],t[i])){var s=this.createError(c.ARRAY_UNIQUE,{match1:n,match2:i}).prefixWith(null,"uniqueItems");if(this.handleError(s))return s}return null},l.prototype.validateArrayItems=function(e,t,a){if(void 0===t.items)return null;var n,i;if(Array.isArray(t.items)){for(i=0;i<e.length;i++)if(i<t.items.length){if(n=this.validateAll(e[i],t.items[i],[i],["items",i],a+"/"+i))return n}else if(void 0!==t.additionalItems)if("boolean"==typeof t.additionalItems){if(!t.additionalItems&&(n=this.createError(c.ARRAY_ADDITIONAL_ITEMS,{}).prefixWith(""+i,"additionalItems"),this.handleError(n)))return n}else if(n=this.validateAll(e[i],t.additionalItems,[i],["additionalItems"],a+"/"+i))return n}else for(i=0;i<e.length;i++)if(n=this.validateAll(e[i],t.items,[i],["items"],a+"/"+i))return n;return null},l.prototype.validateObject=function(e,t,a){return"object"!=typeof e||null===e||Array.isArray(e)?null:this.validateObjectMinMaxProperties(e,t,a)||this.validateObjectRequiredProperties(e,t,a)||this.validateObjectProperties(e,t,a)||this.validateObjectDependencies(e,t,a)||null},l.prototype.validateObjectMinMaxProperties=function(e,t){var a,n=Object.keys(e);return void 0!==t.minProperties&&n.length<t.minProperties&&(a=this.createError(c.OBJECT_PROPERTIES_MINIMUM,{propertyCount:n.length,minimum:t.minProperties}).prefixWith(null,"minProperties"),this.handleError(a))?a:void 0!==t.maxProperties&&n.length>t.maxProperties&&(a=this.createError(c.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:n.length,maximum:t.maxProperties}).prefixWith(null,"maxProperties"),this.handleError(a))?a:null},l.prototype.validateObjectRequiredProperties=function(e,t){if(void 0!==t.required)for(var a=0;a<t.required.length;a++){var n=t.required[a],i=t.properties[n].shortTitle?t.properties[n].shortTitle:t.properties[n].title;if(void 0===e[n]){var s=this.createError(c.OBJECT_REQUIRED,{displayTitle:i}).prefixWith(null,""+a).prefixWith(null,"required");if(this.handleError(s))return s}}return null},l.prototype.validateObjectProperties=function(e,t,a){var n;for(var i in e){var s=a+"/"+i.replace(/~/g,"~0").replace(/\//g,"~1"),o=!1;if(void 0!==t.properties&&void 0!==t.properties[i]&&(o=!0,n=this.validateAll(e[i],t.properties[i],[i],["properties",i],s)))return n;if(void 0!==t.patternProperties)for(var r in t.patternProperties){var l=new RegExp(r);if(l.test(i)&&(o=!0,n=this.validateAll(e[i],t.patternProperties[r],[i],["patternProperties",r],s)))return n}if(o)this.trackUnknownProperties&&(this.knownPropertyPaths[s]=!0,delete this.unknownPropertyPaths[s]);else if(void 0!==t.additionalProperties){if(this.trackUnknownProperties&&(this.knownPropertyPaths[s]=!0,delete this.unknownPropertyPaths[s]),"boolean"==typeof t.additionalProperties){if(!t.additionalProperties&&(n=this.createError(c.OBJECT_ADDITIONAL_PROPERTIES,{}).prefixWith(i,"additionalProperties"),this.handleError(n)))return n}else if(n=this.validateAll(e[i],t.additionalProperties,[i],["additionalProperties"],s))return n}else this.trackUnknownProperties&&!this.knownPropertyPaths[s]&&(this.unknownPropertyPaths[s]=!0)}return null},l.prototype.validateObjectDependencies=function(e,t,a){var n;if(void 0!==t.dependencies)for(var i in t.dependencies)if(void 0!==e[i]){var s=t.dependencies[i];if("string"==typeof s){if(void 0===e[s]&&(n=this.createError(c.OBJECT_DEPENDENCY_KEY,{key:i,missing:s}).prefixWith(null,i).prefixWith(null,"dependencies"),this.handleError(n)))return n}else if(Array.isArray(s))for(var o=0;o<s.length;o++){var r=s[o];if(void 0===e[r]&&(n=this.createError(c.OBJECT_DEPENDENCY_KEY,{key:i,missing:r}).prefixWith(null,""+o).prefixWith(null,i).prefixWith(null,"dependencies"),this.handleError(n)))return n}else if(n=this.validateAll(e,s,[],["dependencies",i],a))return n}return null},l.prototype.validateCombinations=function(e,t,a){return this.validateAllOf(e,t,a)||this.validateAnyOf(e,t,a)||this.validateOneOf(e,t,a)||this.validateNot(e,t,a)||null},l.prototype.validateAllOf=function(e,t,a){if(void 0===t.allOf)return null;for(var n,i=0;i<t.allOf.length;i++){var s=t.allOf[i];if(n=this.validateAll(e,s,[],["allOf",i],a))return n}return null},l.prototype.validateAnyOf=function(e,t,a){if(void 0===t.anyOf)return null;var n,i,s=[],o=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,i=this.knownPropertyPaths);for(var r=!0,l=0;l<t.anyOf.length;l++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var d=t.anyOf[l],p=this.errors.length,u=this.validateAll(e,d,[],["anyOf",l],a);if(null===u&&p===this.errors.length){if(this.errors=this.errors.slice(0,o),this.trackUnknownProperties){for(var m in this.knownPropertyPaths)i[m]=!0,delete n[m];for(var f in this.unknownPropertyPaths)i[f]||(n[f]=!0);r=!1;continue}return null}u&&s.push(u.prefixWith(null,""+l).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=i),r?(s=s.concat(this.errors.slice(o)),this.errors=this.errors.slice(0,o),this.createError(c.ANY_OF_MISSING,{},"","/anyOf",s)):void 0},l.prototype.validateOneOf=function(e,t,a){if(void 0===t.oneOf)return null;var n,i,s=null,o=[],r=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,i=this.knownPropertyPaths);for(var l=0;l<t.oneOf.length;l++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var d=t.oneOf[l],p=this.errors.length,u=this.validateAll(e,d,[],["oneOf",l],a);if(null===u&&p===this.errors.length){if(null!==s)return this.errors=this.errors.slice(0,r),this.createError(c.ONE_OF_MULTIPLE,{index1:s,index2:l},"","/oneOf");if(s=l,this.trackUnknownProperties){for(var m in this.knownPropertyPaths)i[m]=!0,delete n[m];for(var f in this.unknownPropertyPaths)i[f]||(n[f]=!0)}}else u&&o.push(u.prefixWith(null,""+l).prefixWith(null,"oneOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=i),null===s?(o=o.concat(this.errors.slice(r)),this.errors=this.errors.slice(0,r),this.createError(c.ONE_OF_MISSING,{},"","/oneOf",o)):(this.errors=this.errors.slice(0,r),null)},l.prototype.validateNot=function(e,t,a){if(void 0===t.not)return null;var n,i,s=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,i=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var o=this.validateAll(e,t.not,null,null,a),r=this.errors.slice(s);return this.errors=this.errors.slice(0,s),this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=i),null===o&&0===r.length?this.createError(c.NOT_PASSED,{},"","/not"):null};var c={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},d={};for(var p in c)d[c[p]]=p;var u={INVALID_TYPE:"invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"Invalid {displayTitle} format",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"{displayTitle} is required",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};s.prototype=Object.create(Error.prototype),s.prototype.constructor=s,s.prototype.name="ValidationError",s.prototype.prefixWith=function(e,t){if(null!==e&&(e=e.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+e+this.dataPath),null!==t&&(t=t.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+t+this.schemaPath),null!==this.subErrors)for(var a=0;a<this.subErrors.length;a++)this.subErrors[a].prefixWith(e,t);return this};var m={},f=r();return f.addLanguage("en-gb",u),f.tv4=f,f}),!function(e){var t={parse:function(e){if("string"!=typeof e)throw new TypeError("ObjectPath.parse must be passed a string");for(var t,a,n,i,s=0,o=[];s<e.length;)if(t=e.indexOf(".",s),a=e.indexOf("[",s),-1===t&&-1===a)o.push(e.slice(s,e.length)),s=e.length;else if(-1===a||-1!==t&&a>t)o.push(e.slice(s,t)),s=t+1;else if(a>s&&(o.push(e.slice(s,a)),s=a),n=e.slice(a+1,a+2),'"'!==n&&"'"!==n)i=e.indexOf("]",a),-1===i&&(i=e.length),o.push(e.slice(s+1,i)),s="."===e.slice(i+1,i+2)?i+2:i+1;else{for(i=e.indexOf(n+"]",a),-1===i&&(i=e.length);"\\"===e.slice(i-1,i)&&a<e.length;)a++,i=e.indexOf(n+"]",a);o.push(e.slice(s+2,i).replace(new RegExp("\\"+n,"g"),n)),s="."===e.slice(i+2,i+3)?i+3:i+2}return o},stringify:function(e,t){return Array.isArray(e)||(e=[e.toString()]),t='"'===t?'"':"'",e.map(function(e){return"["+t+e.toString().replace(new RegExp(t,"g"),"\\"+t)+t+"]"}).join("")},normalize:function(e,a){return t.stringify(Array.isArray(e)?e:t.parse(e),a)},registerModule:function(e){e.module("ObjectPath",[]).provider("ObjectPath",function(){this.parse=t.parse,this.stringify=t.stringify,this.normalize=t.normalize,this.$get=function(){return t}})}};"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof exports?exports.ObjectPath=t:window.ObjectPath=t}();var deps=[];try{angular.module("ngSanitize"),deps.push("ngSanitize")}catch(e){}try{angular.module("ui.sortable"),deps.push("ui.sortable")}catch(e){}try{angular.module("angularSpectrumColorpicker"),deps.push("angularSpectrumColorpicker")}catch(e){}angular.module("schemaForm",deps),angular.module("schemaForm").provider("sfPath",[function(){var e={parse:ObjectPath.parse};1===angular.version.major&&angular.version.minor<3?e.stringify=function(e){return Array.isArray(e)?e.join("."):e.toString()}:e.stringify=ObjectPath.stringify,e.normalize=function(t,a){return e.stringify(Array.isArray(t)?t:e.parse(t),a)},this.parse=e.parse,this.stringify=e.stringify,this.normalize=e.normalize,this.$get=function(){return e}}]),angular.module("schemaForm").factory("sfSelect",["sfPath",function(e){var t=/^\d+$/;return function(a,n,i){n||(n=this);var s="string"==typeof a?e.parse(a):a;if("undefined"!=typeof i&&1===s.length)return n[s[0]]=i,n;"undefined"!=typeof i&&"undefined"==typeof n[s[0]]&&(n[s[0]]=s.length>2&&t.test(s[1])?[]:{});for(var o=n[s[0]],r=1;r<s.length;r++){if(""===s[r])return void 0;if("undefined"!=typeof i){if(r===s.length-1)return o[s[r]]=i,i;var l=o[s[r]];("undefined"==typeof l||null===l)&&(l=t.test(s[r+1])?[]:{},o[s[r]]=l),o=l}else o&&(o=o[s[r]])}return o}}]),angular.module("schemaForm").provider("schemaFormDecorators",["$compileProvider","sfPathProvider",function(e,t){var a="",n={},i=function(e,t){"sfDecorator"===e&&(e=a);for(var i=n[e],s=i.rules,o=0;o<s.length;o++){var r=s[o](t);if(r)return r}return i.mappings[t.type]?i.mappings[t.type]:i.mappings["default"]},s=function(a){e.directive(a,["$parse","$compile","$http","$templateCache",function(e,n,s,o){return{restrict:"AE",replace:!1,transclude:!1,scope:!0,require:"?^sfSchema",link:function(e,r,l,c){var d=e.$watch(l.form,function(l){if(l){e.form=l;var c=i(a,l);s.get(c,{cache:o}).then(function(a){var i=l.key?t.stringify(l.key).replace(/"/g,"&quot;"):"",s=a.data.replace(/\$\$value\$\$/g,"model"+("["!==i[0]?".":"")+i);r.html(s),n(r.contents())(e)}),d()}});e.showTitle=function(){return e.form&&e.form.notitle!==!0&&e.form.title},e.listToCheckboxValues=function(e){var t={};return angular.forEach(e,function(e){t[e]=!0}),t},e.checkboxValuesToList=function(e){var t=[];return angular.forEach(e,function(e,a){e&&t.push(a)}),t},e.buttonClick=function(t,a){angular.isFunction(a.onClick)?a.onClick(t,a):angular.isString(a.onClick)&&(c?c.evalInParentScope(a.onClick,{$event:t,form:a}):e.$eval(a.onClick,{$event:t,form:a}))},e.evalExpr=function(t,a){return c?c.evalInParentScope(t,a):e.$eval(t,a)},e.evalInScope=function(t,a){return t?e.$eval(t,a):void 0},e.errorMessage=function(t){return e.form.validationMessage?t?angular.isString(e.form.validationMessage)?e.form.validationMessage:e.form.validationMessage[t.code]||e.form.validationMessage["default"]:e.form.validationMessage.number||e.form.validationMessage["default"]||e.form.validationMessage:t?t.message:"Not a number"}}}}])},o=function(t,a,n){n=angular.isDefined(n)?n:!1,e.directive("sf"+angular.uppercase(t[0])+t.substr(1),function(){return{restrict:"EAC",scope:!0,replace:!0,transclude:n,template:'<sf-decorator form="form"></sf-decorator>',link:function(e,a,n){var i={items:"c",titleMap:"c",schema:"c"},s={type:t},o=!0;angular.forEach(n,function(t,a){if("$"!==a[0]&&0!==a.indexOf("ng")&&"sfField"!==a){var r=function(t){angular.isDefined(t)&&t!==s[a]&&(s[a]=t,o&&s.type&&(s.key||angular.isUndefined(n.key))&&(e.form=s,o=!1))};"model"===a?e.$watch(t,function(t){t&&e.model!==t&&(e.model=t)}):"c"===i[a]?e.$watchCollection(t,r):n.$observe(a,r)}})}}})};this.createDecorator=function(e,t,i){n[e]={mappings:t||{},rules:i||[]},n[a]||(a=e),s(e)},this.createDirective=o,this.createDirectives=function(e){angular.forEach(e,function(e,t){o(t,e)})},this.directive=function(e){return e=e||a,n[e]},this.addMapping=function(e,t,a){n[e]&&(n[e].mappings[t]=a)},this.$get=function(){return{directive:function(e){return n[e]},defaultDecorator:a}},s("sfDecorator")}]),angular.module("schemaForm").provider("schemaForm",["sfPathProvider",function(e){var t=function(e){var t=[];return e.forEach(function(e){t.push({name:e,value:e})}),t},a=function(e,t){if(!angular.isArray(e)){var a=[];return t?angular.forEach(t,function(t,n){a.push({name:e[t],value:t})}):angular.forEach(e,function(e,t){a.push({name:e,value:t})}),a}return e},n=function(e,t,a){var n=m[t.type];if(n)for(var i,s=0;s<n.length;s++)if(i=n[s](e,t,a))return i.schema["x-schema-form"]&&angular.isObject(i.schema["x-schema-form"])&&(i=angular.extend(i,i.schema["x-schema-form"])),i},i=function(e,t,n){n=n||{};var i=n.global&&n.global.formDefaults?angular.copy(n.global.formDefaults):{};return n.global&&n.global.supressPropertyTitles===!0?i.title=t.title:i.title=t.title||e,t.description&&(i.description=t.description),(n.required===!0||t.required===!0)&&(i.required=!0),t.maxLength&&(i.maxlength=t.maxLength),t.minLength&&(i.minlength=t.maxLength),(t.readOnly||t.readonly)&&(i.readonly=!0),t.minimum&&(i.minimum=t.minimum+(t.exclusiveMinimum?1:0)),t.maximum&&(i.maximum=t.maximum-(t.exclusiveMaximum?1:0)),t.validationMessage&&(i.validationMessage=t.validationMessage),t.enumNames&&(i.titleMap=a(t.enumNames,t["enum"])),i.schema=t,i.ngModelOptions=i.ngModelOptions||{},i},s=function(t,a,n){if("string"===a.type&&!a["enum"]){var s=i(t,a,n);return s.key=n.path,s.type="text",n.lookup[e.stringify(n.path)]=s,s}},o=function(t,a,n){if("number"===a.type){var s=i(t,a,n);return s.key=n.path,s.type="number",n.lookup[e.stringify(n.path)]=s,s}},r=function(t,a,n){
if("integer"===a.type){var s=i(t,a,n);return s.key=n.path,s.type="number",n.lookup[e.stringify(n.path)]=s,s}},l=function(t,a,n){if("boolean"===a.type){var s=i(t,a,n);return s.key=n.path,s.type="checkbox",n.lookup[e.stringify(n.path)]=s,s}},c=function(a,n,s){if("string"===n.type&&n["enum"]){var o=i(a,n,s);return o.key=s.path,o.type="select",o.titleMap||(o.titleMap=t(n["enum"])),s.lookup[e.stringify(s.path)]=o,o}},d=function(a,n,s){if("array"===n.type&&n.items&&n.items["enum"]){var o=i(a,n,s);return o.key=s.path,o.type="checkboxes",o.titleMap||(o.titleMap=t(n.items["enum"])),s.lookup[e.stringify(s.path)]=o,o}},p=function(t,a,s){if("object"===a.type){var o=i(t,a,s);return o.type="fieldset",o.items=[],s.lookup[e.stringify(s.path)]=o,angular.forEach(a.properties,function(t,i){var r=s.path.slice();if(r.push(i),s.ignore[e.stringify(r)]!==!0){var l=a.required&&-1!==a.required.indexOf(i),c=n(i,t,{path:r,required:l||!1,lookup:s.lookup,ignore:s.ignore,global:s.global});c&&o.items.push(c)}}),o}},u=function(t,a,s){if("array"===a.type){var o=i(t,a,s);o.type="array",o.key=s.path,s.lookup[e.stringify(s.path)]=o;var r=a.required&&-1!==a.required.indexOf(s.path[s.path.length-1]),l=s.path.slice();return l.push(""),o.items=[n(t,a.items,{path:l,required:r||!1,lookup:s.lookup,ignore:s.ignore,global:s.global})],o}},m={string:[c,s],object:[p],number:[o],integer:[r],"boolean":[l],array:[d,u]},f=function(e){return e};this.defaults=m,this.stdFormObj=i,this.defaultFormDefinition=n,this.postProcess=function(e){f=e},this.appendRule=function(e,t){m[e]||(m[e]=[]),m[e].push(t)},this.prependRule=function(e,t){m[e]||(m[e]=[]),m[e].unshift(t)},this.createStandardForm=i,this.$get=function(){var t={};return t.merge=function(n,i,s,o,r){i=i||["*"],o=o||{},r=r||n.readonly||n.readOnly;var l=t.defaults(n,s,o),c=i.indexOf("*");-1!==c&&(i=i.slice(0,c).concat(l.form).concat(i.slice(c+1)));var d=l.lookup;return f(i.map(function(i){if("string"==typeof i&&(i={key:i}),i.key&&"string"==typeof i.key&&(i.key=e.parse(i.key)),i.titleMap&&(i.titleMap=a(i.titleMap)),i.itemForm){i.items=[];var l=e.stringify(i.key),c=d[l];angular.forEach(c.items,function(e){var t=angular.copy(i.itemForm);t.key=e.key,i.items.push(t)})}if(i.key){var p=e.stringify(i.key);d[p]&&(i=angular.extend(d[p],i))}return r===!0&&(i.readonly=!0),i.items&&(i.items=t.merge(n,i.items,s,o,i.readonly)),i.tabs&&angular.forEach(i.tabs,function(e){e.items=t.merge(n,e.items,s,o,i.readonly)}),"checkbox"===i.type&&angular.isUndefined(i.schema["default"])&&(i.schema["default"]=!1),i}))},t.defaults=function(e,t,a){var i=[],s={};if(t=t||{},a=a||{},"object"!==e.type)throw new Error('Not implemented. Only type "object" allowed at root level of schema.');return angular.forEach(e.properties,function(o,r){if(t[r]!==!0){var l=e.required&&-1!==e.required.indexOf(r),c=n(r,o,{path:[r],lookup:s,ignore:t,required:l,global:a});c&&i.push(c)}}),{form:i,lookup:s}},t.traverseSchema=function(e,t,a,n){n=angular.isDefined(n)?n:!0,a=a||[];var i=function(e,t,a){if(t(e,a),angular.forEach(e.properties,function(e,n){var s=a.slice();s.push(n),i(e,t,s)}),!n&&e.items){var s=a.slice();s.push(""),i(e.items,t,s)}};i(e,t,a||[])},t.traverseForm=function(e,a){a(e),angular.forEach(e.items,function(e){t.traverseForm(e,a)}),e.tabs&&angular.forEach(e.tabs,function(e){angular.forEach(e.items,function(e){t.traverseForm(e,a)})})},t}}]),angular.module("schemaForm").factory("sfValidator",[function(){var e={};return e.validate=function(e,t){if(!e)return{valid:!0};var a=e.schema;if(!a)return{valid:!0};""===t&&(t=void 0),"number"===e.type&&null===t&&(t=void 0);var n={type:"object",properties:{}},i=e.key[e.key.length-1];n.properties[i]=a,e.required&&(n.required=[i]);var s={};return angular.isDefined(t)&&(s[i]=t),tv4.validateResult(s,n)},e}]),angular.module("schemaForm").directive("sfArray",["sfSelect","schemaForm","sfValidator","sfPath",function(e,t,a,n){var i=function(e){return function(t){t.key&&(t.key[t.key.indexOf("")]=e)}};return{restrict:"A",scope:!0,require:"?ngModel",link:function(s,o,r,l){var c={},d=s.$watch(r.sfArray,function(o){var r=e(o.key,s.model);if(s.$watch("model"+n.normalize(o.key),function(){r=e(o.key,s.model),s.modelArray=r}),angular.isUndefined(r)&&(r=[],e(o.key,s.model,r)),s.modelArray=r,o.items){var p=o.items[0];o.items.length>1&&(p={type:"section",items:o.items.map(function(e){return e.ngModelOptions=o.ngModelOptions,angular.isUndefined(e.readonly)&&(e.readonly=o.readonly),e})})}if(s.copyWithIndex=function(e){if(!c[e]&&p){var a=angular.copy(p);a.arrayIndex=e,t.traverseForm(a,i(e)),c[e]=a}return c[e]},s.appendToArray=function(){var a=r.length,n=s.copyWithIndex(a);if(t.traverseForm(n,function(t){if(t.key){var a;angular.isDefined(t["default"])&&(a=t["default"]),angular.isDefined(t.schema)&&angular.isDefined(t.schema["default"])&&(a=t.schema["default"]),angular.isDefined(a)&&e(t.key,s.model,a)}}),a===r.length){var i,l=e("schema.items.type",o);"object"===l?i={}:"array"===l&&(i=[]),r.push(i)}return s.validateArray&&s.validateArray(),r},s.deleteFromArray=function(e){return r.splice(e,1),s.validateArray&&s.validateArray(),l.$setDirty&&l.$setDirty(),r},o.titleMap||o.startEmpty===!0||0!==r.length||s.appendToArray(),o.titleMap&&o.titleMap.length>0){s.titleMapValues=[];var u=function(e){s.titleMapValues=[],e=e||[],o.titleMap.forEach(function(t){s.titleMapValues.push(-1!==e.indexOf(t.value))})};u(s.modelArray),s.$watchCollection("modelArray",u),s.$watchCollection("titleMapValues",function(e){if(e){for(var t=s.modelArray;t.length>0;)t.pop();o.titleMap.forEach(function(a,n){e[n]&&t.push(a.value)})}})}if(l){var m;s.validateArray=function(){var e=a.validate(o,s.modelArray.length>0?s.modelArray:void 0);e.valid!==!1||!e.error||""!==e.error.dataPath&&e.error.dataPath!=="/"+o.key[o.key.length-1]?l.$setValidity("schema",!0):(l.$setViewValue(s.modelArray),m=e.error,l.$setValidity("schema",!1))},s.$on("schemaFormValidate",s.validateArray),s.hasSuccess=function(){return l.$valid&&!l.$pristine},s.hasError=function(){return l.$invalid},s.schemaError=function(){return m},s.isValid=function(){return l.$valid},s.isDirty=function(){return l.$dirty}}d()})}}}]),angular.module("schemaForm").directive("sfChanged",function(){return{require:"ngModel",restrict:"AC",scope:!1,link:function(e,t,a,n){var i=e.$eval(a.sfChanged);i&&i.onChange&&n.$viewChangeListeners.push(function(){angular.isFunction(i.onChange)?i.onChange(n.$modelValue,i):e.evalExpr(i.onChange,{modelValue:n.$modelValue,form:i})})}}}),angular.module("schemaForm").directive("sfSchema",["$rootScope","$compile","schemaForm","schemaFormDecorators","sfSelect","sfPath",function(e,t,a,n,i,s){var o=/[A-Z]/g,r=function(e,t){return t=t||"_",e.replace(o,function(e,a){return(a?t:"")+e.toLowerCase()})};return{scope:{schema:"=sfSchema",initialForm:"=sfForm",model:"=sfModel",options:"=sfOptions"},controller:["$scope",function(e){this.evalInParentScope=function(t,a){return e.$parent.$eval(t,a)}}],replace:!1,restrict:"A",transclude:!0,require:"?form",link:function(o,l,c,d,p){o.formCtrl=d;var u={};p(o,function(e){if(e.addClass("schema-form-ignore"),l.prepend(e),l[0].querySelectorAll){var t=l[0].querySelectorAll("[ng-model]");if(t)for(var a=0;a<t.length;a++){var n=t[a].getAttribute("ng-model");u[n.substring(n.indexOf(".")+1)]=!0}}});var m,f={};o.$watch(function(){var d=o.schema,p=o.initialForm||["*"];if(p&&d&&d.type&&(f.form!==p||f.schema!==d)&&Object.keys(d.properties).length>0){f.schema=d,f.form=p;var g=a.merge(d,p,u,o.options),v=document.createDocumentFragment();m&&m.$destroy(),m=o.$new(),m.schemaForm={form:g,schema:d},l.children(":not(.schema-form-ignore)").remove();for(var h={},b=l[0].querySelectorAll("*[sf-insert-field]"),y=0;y<b.length;y++)h[b[y].getAttribute("sf-insert-field")]=b[y];angular.forEach(g,function(e,t){var a=document.createElement(c.sfDecorator||r(n.defaultDecorator,"-"));if(a.setAttribute("form","schemaForm.form["+t+"]"),a.setAttribute("ng-form",""),a.setAttribute("name",e.fieldsetId),e.key){var i=h[s.stringify(e.key)];if(i){for(;i.firstChild;)i.removeChild(i.firstChild);return void i.appendChild(a)}}v.appendChild(a)}),e.$broadcast("sf-render-finished",l),l[0].appendChild(v),t(l.children())(m),a.traverseSchema(d,function(e,t){if(angular.isDefined(e["default"])){var a=i(t,o.model);angular.isUndefined(a)&&i(t,o.model,e["default"])}})}})}}}]),angular.module("schemaForm").directive("schemaValidate",["$rootScope","sfValidator","sfSelect",function(e,t,a){return{restrict:"A",scope:!1,priority:1e3,require:"ngModel",link:function(n,i,s,o){n.ngModel=o;var r=null,l=function(){return c||(c=n.$eval(s.schemaValidate)),c},c=l();c.copyValueTo&&o.$viewChangeListeners.push(function(){var e=c.copyValueTo;angular.forEach(e,function(e){a(e,n.model,o.$viewValue)})}),o.$validators?o.$validators.schema=function(a){var n=t.validate(l(),a);return r=n.error,e.$broadcast("fieldValidated",{result:n,field:c,element:i,value:a}),n.valid}:o.$parsers.push(function(e){if(c=l(),!c)return e;var a=t.validate(c,e);return a.valid?(o.$setValidity("schema",!0),e):(o.$setValidity("schema",!1),void(r=a.error))}),n.$on("schemaFormValidate",function(){o.$validate?(o.$validate(),o.$invalid&&(o.$dirty=!0,o.$pristine=!1)):o.$setViewValue(o.$viewValue)}),n.hasSuccess=function(){return o.$valid&&(!o.$pristine||!o.$isEmpty(o.$modelValue))},n.hasError=function(){return o.$invalid&&!o.$pristine},n.isValid=function(){return o.$valid},n.isDirty=function(){return o.$dirty},n.schemaError=function(){return r}}}}]),angular.module("schemaForm").run(["$templateCache",function(e){e.put("directives/decorators/bootstrap/actions-trcl.html",'<div class="btn-group schema-form-actions {{form.htmlClass}}" ng-class="\'has-success\': hasSuccess(), \'has-error\': hasError()" ng-transclude=""></div>'),e.put("directives/decorators/bootstrap/actions.html",'<div class="btn-group schema-form-actions {{form.htmlClass}}" ng-class="\'has-success\': hasSuccess(), \'has-error\': hasError()"><input ng-repeat-start="item in form.items" type="submit" class="btn {{ item.style || \'btn-default\' }} {{form.fieldHtmlClass}}" value="{{item.title}}" ng-if="item.type === \'submit\'"> <button ng-repeat-end="" class="btn {{ item.style || \'btn-default\' }} {{form.fieldHtmlClass}}" type="button" ng-disabled="form.readonly" ng-if="item.type !== \'submit\'" ng-click="buttonClick($event, item)">{{item.title}}</button></div>'),e.put("directives/decorators/bootstrap/array.html",'<div sf-array="form" class="schema-form-array {{form.htmlClass}}" ng-model="$$value$$" ng-model-options="form.ngModelOptions" ng-class="\'has-success\': hasSuccess(), \'has-error\': hasError()"><h3 ng-show="form.title && form.notitle !== true">{{ form.title }}</h3><ol class="list-group" ng-model="modelArray" ui-sortable=""><li class="list-group-item {{form.fieldHtmlClass}}" ng-repeat="item in modelArray track by $index"><button ng-hide="form.readonly" ng-click="deleteFromArray($index)" style="position: relative; z-index: 20;" type="button" class="close pull-right"><span aria-hidden="true">&times;</span> <span class="sr-only">Close</span></button><sf-decorator ng-init="arrayIndex = $index" form="copyWithIndex($index)"></sf-decorator></li></ol><div class="clearfix" style="padding: 15px;"><button ng-hide="form.readonly || form.add === null" ng-click="appendToArray()" type="button" class="btn {{ form.style.add || \'btn-default\' }} pull-right"><i class="icon-plus"></i> {{ form.add || \'Add\'}}</button></div><div class="help-block" ng-show="(hasError() && errorMessage(schemaError())) || form.description" ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div></div>'),e.put("directives/decorators/bootstrap/checkbox.html",'<div class="checkbox schema-form-checkbox {{form.htmlClass}}" ng-class="\'has-success\': hasSuccess(), \'has-error\': hasError()"><label><input type="checkbox" sf-changed="form" ng-disabled="form.readonly" ng-model="$$value$$" ng-model-options="form.ngModelOptions" schema-validate="form" class="{{form.fieldHtmlClass}}" name="{{form.key.slice(-1)[0]}}"> <span ng-bind-html="form.title"></span></label><div class="help-block" ng-show="form.description" ng-bind-html="form.description"></div></div>'),e.put("directives/decorators/bootstrap/checkboxes.html",'<div sf-array="form" ng-model="$$value$$" class="form-group schema-form-checkboxes {{form.htmlClass}}" ng-class="{\'required\': form.required, \'has-success\': hasSuccess(), \'has-error\': hasError()}"><label class="control-label" ng-show="showTitle()">{{form.title}}</label><div class="checkbox" ng-repeat="val in titleMapValues track by $index"><label><input type="checkbox" ng-disabled="form.readonly" sf-changed="form" class="{{form.fieldHtmlClass}}" ng-model="titleMapValues[$index]" name="{{form.key.slice(-1)[0]}}"> <span ng-bind-html="form.titleMap[$index].name"></span></label></div><div class="help-block" ng-show="(hasError() && errorMessage(schemaError())) || form.description" ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div></div>'),e.put("directives/decorators/bootstrap/conditional-section.html",'<div class="schema-form-section {{form.htmlClass}}" ng-if="!form.condition || evalExpr(form.condition, { model: model, \'arrayIndex\': arrayIndex })" id="{{form.fieldsetId}}"><legend ng-if="form.title || form.navTitle" ng-class="{\'displayed\': form.title || form.navTitle}">{{form.title ? form.title : form.navTitle}} <small ng-show="form.description">{{form.description}}</small></legend><sf-decorator ng-repeat="item in form.items" form="item"></sf-decorator></div>'),e.put("directives/decorators/bootstrap/datepicker.html",'<div class="schema-form-{{form.type}} {{form.htmlClass}} form-group form-{{form.inputClass}}" ng-class="{\'has-success\': hasSuccess(), \'has-error\': hasError(), \'has-feedback\': form.feedback!==false, \'required\': form.required}"><div ng-class="form.inputClass ? form.inputClass : \'col-xs-7\'"><label ng-if="showTitle() || form.title"><span ng-bind-html="form.title"></span> <small class="text-gray" ng-if="form.description">{{form.description}}</small></label><div class="form-control-date"><input type="text" class="form-control" ng-show="form.key" ng-model="$$value$$" ng-click="form.onClick" schema-validate="form" placeholder="Select Date" data-icon-left="icon-chevron-left" data-icon-right="icon-chevron-right" data-trigger="{{form.dateOptions.trigger || \'focus\'}}" data-date-type="{{form.dateOptions.dateType || \'string\'}}" data-date-format="{{form.dateOptions.dateFormat || \'MM/dd/yyyy\'}}" data-autoclose="{{form.dateOptions.autoClose || true}}" data-min-date="{{form.dateOptions.minDate}}" data-max-date="{{form.dateOptions.maxDate}}" data-use-native="{{form.dateOptions.useNative || true}}" bs-datepicker=""></div><span ng-if="form.feedback==true || hasError() || hasSuccess() || form.required"><i class="form-control-feedback" ng-if="!form.readonly" ng-class="evalInScope(form.feedback) || {\'icon-asterisk\': form.required && !hasSuccess() && !hasError() ,\'icon-success\': hasSuccess(), \'icon-x\': hasError() }"></i></span><div ng-show="(hasError() && errorMessage(schemaError()))" ng-if="form.inputClass"><span class="label label-danger" ng-bind-html="(hasError() && errorMessage(schemaError()))"></span></div></div><div ng-class="form.inputClass ? form.inputClass : \'col-xs-4\'"><div class="error-label" ng-show="(hasError() && errorMessage(schemaError()))"><span class="label label-danger" ng-bind-html="(hasError() && errorMessage(schemaError()))"></span></div></div></div>'),e.put("directives/decorators/bootstrap/datetimepicker.html",'<div class="form-group" ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess(), \'has-feedback\': form.feedback !== false }"><label class="control-label" ng-show="showTitle()">{{form.title}}</label><div class="row"><div class="form-control-date"><div class="input-group"><span class="input-group-addon"><i class="fa fa-calendar"></i></span> <input type="text" class="form-control" ng-show="form.key" ng-model="$$value$$" data-date-type="object" data-date-format="{{form.options.dateFormat || \'dd/MM/yyyy\'}}" data-autoclose="{{form.options.autoclose || \'1\'}}" data-min-date="{{form.options.minDate}}" data-max-date="{{form.options.maxDate}}" data-use-navitve="{{form.options.useNative || false}}" bs-datepicker=""></div></div><div class="form-control-time"><div class="input-group"><span class="input-group-addon"><i class="fa fa-clock-o"></i></span> <input type="text" class="form-control" size="8" ng-show="form.key" ng-model="$$value$$" data-time-type="object" data-time-format="{{form.options.timeFormat || \'shortTime\'}}" data-minute-step="{{form.options.minuteStep || \'15\'}}" data-use-native="{{form.options.useNative || false}}" bs-timepicker=""></div></div></div><input type="hidden" sf-changed="form" ng-model="$$value$$" schema-validate="form"><div class="help-block" ng-show="(hasError() && errorMessage(schemaError())) || form.description" ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div></div>'),e.put("directives/decorators/bootstrap/default.html",'<div class="schema-form-{{form.type}} {{form.htmlClass}} form-group form-{{form.inputClass}}" ng-class="{\'has-success\': hasSuccess(), \'has-error\': hasError(), \'has-feedback\': form.feedback!==false, \'required\': form.required}"><div ng-class="form.inputClass ? form.inputClass : \'col-xs-7\'"><label ng-if="showTitle() || form.title"><span ng-bind-html="form.title"></span> <small class="text-gray" ng-if="form.description">{{form.description}}</small></label><div ng-class="{\'input-group\': form.label}"><input ng-show="form.key" type="{{form.type}}" step="any" sf-changed="form" placeholder="{{form.placeholder}}" class="form-control {{form.fieldHtmlClass}}" ng-model-options="form.ngModelOptions" ng-model="$$value$$" ng-disabled="form.readonly" ng-readonly="form.readonly" schema-validate="form" name="{{form.key.slice(-1)[0]}}"> <span ng-if="form.label" ng-bind-html="form.label" class="input-group-addon"></span></div><span ng-if="form.feedback==true || hasError() || hasSuccess() || form.required"><i class="form-control-feedback" ng-if="!form.readonly" ng-class="evalInScope(form.feedback) || {\'icon-asterisk\': form.required && !hasSuccess() && !hasError() ,\'icon-success\': hasSuccess(), \'icon-x\': hasError() }"></i></span><div ng-show="(hasError() && errorMessage(schemaError()))" ng-if="form.inputClass"><span class="label label-danger" ng-bind-html="(hasError() && errorMessage(schemaError()))"></span></div></div><div ng-class="form.inputClass ? form.inputClass : \'col-xs-4\'"><div class="error-label" ng-show="(hasError() && errorMessage(schemaError()))"><span class="label label-danger" ng-bind-html="(hasError() && errorMessage(schemaError()))"></span></div></div></div>'),e.put("directives/decorators/bootstrap/fieldset-trcl.html",'<fieldset ng-disabled="form.readonly" class="schema-form-fieldset {{form.htmlClass}}" id="{{form.fieldsetId}}"><legend ng-show="form.title">{{ form.title }}</legend><div ng-transclude=""></div></fieldset>'),e.put("directives/decorators/bootstrap/fieldset.html",'<fieldset ng-disabled="form.readonly" class="schema-form-fieldset {{form.htmlClass}}" ng-class="{\'read-only\': form.readonly}" id="{{form.fieldsetId}}"><legend ng-show="form.title">{{form.title}} <small ng-if="form.description">{{form.description}}</small></legend><sf-decorator ng-repeat="item in form.items" form="item" class="section-{{item.inputClass}}"></sf-decorator></fieldset>'),e.put("directives/decorators/bootstrap/files.html",'<div class="form-group schema-form-files {{form.htmlClass}}" ng-class="{\'has-success\': hasSuccess(), \'has-error\': hasError(), \'required\': form.required}"><input type="checkbox" sf-changed="form" ng-disabled="form.readonly" ng-model="$$value$$" ng-model-options="form.ngModelOptions" ng-readonly="form.readonly" schema-validate="form" style="display:none" name="{{form.key.slice(-1)[0]}}" id="{{form.key.slice(-1)[0]}}" required=""> <label class="col-xs-7" ng-bind-html="form.title"><small ng-if="form.description">{{form.description}}</small></label><div class="col-xs-7"><file-upload data-file-type="{{form.filetype}}"></file-upload></div><div class="col-xs-1"><span></span></div><div class="col-xs-4"></div></div>'),e.put("directives/decorators/bootstrap/fileupload.html",'<div class="schema-form-{{form.type}} {{form.htmlClass}} form-group form-{{form.inputClass}}" ng-class="{\'has-success\': hasSuccess(), \'has-error\': hasError(), \'has-feedback\': form.feedback!==false, \'required\': form.required}"><div ng-class="form.inputClass ? form.inputClass : \'col-xs-7\'"><label ng-if="showTitle() || form.title"><span ng-bind-html="form.title"></span> <small class="text-gray" ng-if="form.description">{{form.description}}</small></label><div><file-upload file-type="form.filetype" file-name="form.filename" file-key="form.key" ng-model="$$value$$"></file-upload></div><span ng-if="form.feedback==true || hasError() || hasSuccess() || form.required"><i class="form-control-feedback" ng-if="!form.readonly" ng-class="evalInScope(form.feedback) || {\'icon-asterisk\': form.required && !hasSuccess() && !hasError() ,\'icon-success\': hasSuccess(), \'icon-x\': hasError() }"></i></span><div ng-show="(hasError() && errorMessage(schemaError()))" ng-if="form.inputClass"><span class="label label-danger" ng-bind-html="(hasError() && errorMessage(schemaError()))"></span></div></div><div ng-class="form.inputClass ? form.inputClass : \'col-xs-4\'"><div class="error-label" ng-show="(hasError() && errorMessage(schemaError()))"><span class="label label-danger" ng-bind-html="(hasError() && errorMessage(schemaError()))"></span></div></div></div>'),e.put("directives/decorators/bootstrap/help.html",'<div class="schema-form-{{form.type}} {{form.htmlClass}}" ng-class="form.readonly ? \'row read-only\' : \'form-group\'"><label ng-show="form.title">{{form.title}}</label><div class="helpvalue schema-form-helpvalue {{form.htmlClass}}" ng-bind-html="form.helpvalue"></div></div>'),e.put("directives/decorators/bootstrap/phonenumber.html",'<div class="schema-form-{{form.type}} {{form.htmlClass}} form-group form-{{form.inputClass}}" ng-class="{\'has-success\': hasSuccess(), \'has-error\': hasError(), \'has-feedback\': form.feedback!==false, \'required\': form.required}"><div ng-class="form.inputClass ? form.inputClass : \'col-xs-7\'"><label ng-if="showTitle() || form.title"><span ng-bind-html="form.title"></span> <small class="text-gray" ng-if="form.description">{{form.description}}</small></label><div ng-class="{\'input-group\': form.label}"><input ng-show="form.key" type="{{form.type}}" step="any" sf-changed="form" placeholder="{{form.placeholder}}" class="form-control {{form.fieldHtmlClass}}" ng-model-options="form.ngModelOptions" ng-model="$$value$$" ng-disabled="form.readonly" ng-readonly="form.readonly" schema-validate="form" name="{{form.key.slice(-1)[0]}}" mask="(999) 999-9999 ?9?9?9?9?9?9" validate="false" clean="true"> <span ng-if="form.label" ng-bind-html="form.label" class="input-group-addon"></span></div><span ng-if="form.feedback==true || hasError() || hasSuccess() || form.required"><i class="form-control-feedback" ng-if="!form.readonly" ng-class="evalInScope(form.feedback) || {\'icon-asterisk\': form.required && !hasSuccess() && !hasError() ,\'icon-success\': hasSuccess(), \'icon-x\': hasError() }"></i></span><div ng-show="(hasError() && errorMessage(schemaError()))" ng-if="form.inputClass"><span class="label label-danger" ng-bind-html="(hasError() && errorMessage(schemaError()))"></span></div></div><div ng-class="form.inputClass ? form.inputClass : \'col-xs-4\'"><div class="error-label" ng-show="(hasError() && errorMessage(schemaError()))"><span class="label label-danger" ng-bind-html="(hasError() && errorMessage(schemaError()))"></span></div></div></div>'),e.put("directives/decorators/bootstrap/print.html",'<div class="form-group schema-form-print {{form.htmlClass}}"><div class="col-xs-7"><button class="btn btn-block {{ form.style || \'btn-default\' }}" type="button" print-btn="" ng-disabled="form.readonly" ng-if="form.type !== \'submit\'">{{form.title}}</button></div></div>'),e.put("directives/decorators/bootstrap/radio-buttons.html",'<div class="schema-form-{{form.type}} {{form.htmlClass}} form-group form-{{form.inputClass}}" ng-class="{\'has-success\': hasSuccess(), \'has-error\': hasError(), \'has-feedback\': form.feedback!==false, \'required\': form.required}"><div ng-class="form.inputClass ? form.inputClass : \'col-xs-7\'"><label ng-if="showTitle() || form.title"><span ng-bind-html="form.title"></span> <small class="text-gray" ng-if="form.description">{{form.description}}</small></label><div class="btn-group btn-group-justified"><label class="btn {{ (item.value === $$value$$) ? form.style.selected || \'btn-default\' : form.style.unselected || \'btn-default\'; }}" ng-class="{ \'active btn-primary strong\': item.value === $$value$$ }" ng-disabled="form.readonly || item.readonly" ng-repeat="item in form.titleMap"><input type="radio" class="{{form.fieldHtmlClass}}" sf-changed="form" schema-validate="form" ng-disabled="form.readonly || item.readonly" ng-model="$$value$$" ng-value="item.value" name="{{form.key.slice(-1)[0]}}" style="display:none;"> <span ng-bind-html="item.name"></span></label></div><span ng-if="form.feedback==true || hasError() || hasSuccess() || form.required"><i class="form-control-feedback" ng-if="!form.readonly" ng-class="evalInScope(form.feedback) || {\'icon-asterisk\': form.required && !hasSuccess() && !hasError() ,\'icon-success\': hasSuccess(), \'icon-x\': hasError() }"></i></span><div ng-show="(hasError() && errorMessage(schemaError()))" ng-if="form.inputClass"><span class="label label-danger" ng-bind-html="(hasError() && errorMessage(schemaError()))"></span></div></div><div ng-class="form.inputClass ? form.inputClass : \'col-xs-4\'"><div class="error-label" ng-show="(hasError() && errorMessage(schemaError()))"><span class="label label-danger" ng-bind-html="(hasError() && errorMessage(schemaError()))"></span></div></div></div>'),e.put("directives/decorators/bootstrap/radios-inline.html",'<div class="form-group schema-form-radios-inline {{form.htmlClass}}" ng-class="{\'has-success\': hasSuccess(), \'has-error\': hasError(), \'required\': form.required}"><label class="control-label" ng-show="showTitle()">{{form.title}}</label><div><label class="radio-inline" ng-repeat="item in form.titleMap"><input type="radio" class="{{form.fieldHtmlClass}}" sf-changed="form" ng-disabled="form.readonly" ng-model="$$value$$" ng-value="item.value" name="{{form.key.slice(-1)[0]}}"> <span ng-bind-html="item.name"></span></label></div><div class="help-block" ng-show="(hasError() && errorMessage(schemaError())) || form.description" ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div></div>'),e.put("directives/decorators/bootstrap/radios.html",'<div class="schema-form-{{form.type}} {{form.htmlClass}} form-group form-{{form.inputClass}}" ng-class="{\'has-success\': hasSuccess(), \'has-error\': hasError(), \'has-feedback\': form.feedback!==false, \'required\': form.required}"><div ng-class="form.inputClass ? form.inputClass : \'col-xs-7\'"><label ng-if="showTitle() || form.title"><span ng-bind-html="form.title"></span> <small class="text-gray" ng-if="form.description">{{form.description}}</small></label><div class="radio" ng-repeat="item in form.titleMap"><label><input type="radio" class="{{form.fieldHtmlClass}}" sf-changed="form" ng-model="$$value$$" ng-disabled="form.readonly || item.readonly" ng-readonly="form.readonly || item.readonly" ng-model-options="form.ngModelOptions" schema-validate="form" ng-value="item.value" name="{{form.key.slice(-1)[0]}}" ng-change="form.isChecked=true"> <span ng-bind-html="item.name"></span> <small ng-if="item.description" ng-bind-html="item.description"></small></label></div><span ng-if="form.feedback==true || hasError() || hasSuccess() || form.required"><i class="form-control-feedback" ng-if="!form.readonly" ng-class="evalInScope(form.feedback) || {\'icon-asterisk\': form.required && !hasSuccess() && !hasError() ,\'icon-success\': hasSuccess(), \'icon-x\': hasError() }"></i></span><div ng-show="(hasError() && errorMessage(schemaError()))" ng-if="form.inputClass"><span class="label label-danger" ng-bind-html="(hasError() && errorMessage(schemaError()))"></span></div></div><div ng-class="form.inputClass ? form.inputClass : \'col-xs-4\'"><div class="error-label" ng-show="(hasError() && errorMessage(schemaError()))"><span class="label label-danger" ng-bind-html="(hasError() && errorMessage(schemaError()))"></span></div></div></div>'),e.put("directives/decorators/bootstrap/readonly.html",'<div class="row read-only"><div class="col-xs-4"><label ng-if="showTitle() || form.title"><span ng-bind-html="form.title"></span> <small class="text-gray" ng-if="form.description">{{form.description}}</small></label></div><div ng-switch="form.type" class="col-xs-8"><textarea ng-switch-when="\'textarea\'" disabled="">{{$$value$$}}</textarea><div ng-switch-default="" ng-model="$$value$$" disabled=""><span ng-if="form.titleMap" ng-repeat="item in form.titleMap" ng-show="item.value==$$value$$">{{item.name}}</span> <span ng-if="form.type==\'number\'">{{$$value$$ | number:3}}</span> <span ng-if="form.type==\'phone\'">{{$$value$$ | phoneNumber}}</span> <span ng-if="!form.titleMap && form.type!==\'phone\' && form.type!==\'number\'">{{$$value$$}}</span></div></div></div>'),e.put("directives/decorators/bootstrap/section.html",'<div class="schema-form-section main-section {{form.htmlClass}}" ng-if="!form.condition || evalExpr(form.condition, { model: model, \'arrayIndex\': arrayIndex })" id="{{form.sectionId}}"><legend ng-if="form.title || form.navTitle" ng-class="{\'displayed\': form.title || form.navTitle}">{{form.title ? form.title : form.navTitle}} <small ng-show="form.description">{{form.description}}</small></legend><sf-decorator ng-repeat="item in form.items" form="item"></sf-decorator></div>'),e.put("directives/decorators/bootstrap/select.html",'<div class="schema-form-select {{form.htmlClass}} form-group form-{{form.inputClass}}" ng-class="{\'has-success\': hasSuccess(), \'has-error\': hasError(), \'has-feedback\': form.feedback!==false, \'required\': form.required}"><div ng-class="form.inputClass ? form.inputClass : \'col-xs-7\'"><label ng-if="showTitle() || form.title"><span ng-bind-html="form.title"></span> <small class="text-gray" ng-if="form.description">{{form.description}}</small></label><div ng-class="{\'input-group\': form.label}"><select ng-model="$$value$$" ng-model-options="form.ngModelOptions" ng-disabled="form.readonly" sf-changed="form" class="form-control {{form.fieldHtmlClass}}" schema-validate="form" ng-options="item.value as item.name for item in form.titleMap" ng-readonly="form.readonly" name="{{form.key.slice(-1)[0]}}"></select><span ng-if="form.label" ng-bind-html="form.label" class="input-group-addon"></span></div><span ng-if="form.feedback==true || hasError() || hasSuccess() || form.required"><i class="form-control-feedback" ng-if="!form.readonly" ng-class="evalInScope(form.feedback) || {\'icon-asterisk\': form.required && !hasSuccess() && !hasError() ,\'icon-success\': hasSuccess(), \'icon-x\': hasError() }"></i></span><div ng-show="(hasError() && errorMessage(schemaError()))" ng-if="form.inputClass"><span class="label label-danger" ng-bind-html="(hasError() && errorMessage(schemaError()))"></span></div></div><div ng-class="form.inputClass ? form.inputClass : \'col-xs-4\'"><div class="error-label" ng-show="(hasError() && errorMessage(schemaError()))"><span class="label label-danger" ng-bind-html="(hasError() && errorMessage(schemaError()))"></span></div></div></div>'),e.put("directives/decorators/bootstrap/split.html",'<div class="form-group schema-form-{{form.type}} {{form.htmlClass}}" ng-class="{\'has-success\': hasSuccess(), \'has-error\': hasError(), \'has-feedback\': form.feedback !== false, \'required\': form.required}"><div ng-class="form.inputClass ? form.inputClass : \'col-xs-7\'"><label ng-if="showTitle() || form.title"><span ng-bind-html="form.title"></span> <small class="text-gray" ng-if="form.description">{{form.description}}</small></label><div ng-class="{\'input-group\': form.label}"><input ng-show="form.key" type="{{form.type}}" step="any" sf-changed="form" placeholder="{{form.placeholder}}" class="form-control {{form.fieldHtmlClass}}" ng-model-options="form.ngModelOptions" ng-model="$$value$$" ng-disabled="form.readonly" ng-readonly="form.readonly" schema-validate="form" name="{{form.key.slice(-1)[0]}}"> <span class="input-group-addon" ng-if="form.label" ng-bind-html="form.label"></span> <span class="input-group-addon" ng-if="form.feedback"><i class="form-control-feedback" ng-if="!form.readonly" ng-class="evalInScope(form.feedback) || {\'icon-asterisk\': form.required && !hasSuccess() && !hasError() ,\'icon-success\': hasSuccess(), \'icon-x\': hasError() }"></i></span></div><div ng-show="(hasError() && errorMessage(schemaError()))" ng-if="form.inputClass"><span class="label label-danger" ng-bind-html="(hasError() && errorMessage(schemaError()))"></span></div></div><div ng-show="(hasError() && errorMessage(schemaError()))" ng-if="!form.inputClass" class="col-xs-4"><span class="label label-danger" ng-bind-html="(hasError() && errorMessage(schemaError()))"></span></div></div>'),
e.put("directives/decorators/bootstrap/submit.html",'<div class="form-group schema-form-submit {{form.htmlClass}}"><div class="col-xs-7"><input type="submit" class="btn btn-block {{ form.style || \'btn-primary\' }} {{form.fieldHtmlClass}}" value="{{form.title}}" ng-disabled="form.readonly" ng-if="form.type === \'submit\'"> <button class="btn btn-block {{ form.style || \'btn-default\' }}" type="button" ng-click="buttonClick($event, form)" ng-disabled="form.readonly" ng-if="form.type !== \'submit\'">{{form.title}}</button></div></div>'),e.put("directives/decorators/bootstrap/tabarray.html",'<div sf-array="form" ng-init="selected = { tab: 0 }" class="clearfix schema-form-tabarray schema-form-tabarray-{{form.tabType || \'left\'}} {{form.htmlClass}}"><div ng-if="!form.tabType || form.tabType !== \'right\'" ng-class="{\'col-xs-3\': !form.tabType || form.tabType === \'left\'}"><ul class="nav nav-tabs" ng-class="{ \'tabs-left\': !form.tabType || form.tabType === \'left\'}"><li ng-repeat="item in modelArray track by $index" ng-click="$event.preventDefault() || (selected.tab = $index)" ng-class="{active: selected.tab === $index}"><a href="#">{{evalExpr(form.title, {\'$index\':$index, value: item}) || $index}}</a></li><li ng-hide="form.readonly" ng-click="$event.preventDefault() || (selected.tab = appendToArray().length - 1)"><a href="#"><i class="icon-plus"></i> {{ form.add || \'Add\'}}</a></li></ul></div><div ng-class="{\'col-xs-9\': !form.tabType || form.tabType === \'left\' || form.tabType === \'right\'}"><div class="tab-content {{form.fieldHtmlClass}}"><div class="tab-pane clearfix" ng-repeat="item in modelArray track by $index" ng-show="selected.tab === $index" ng-class="{active: selected.tab === $index}"><sf-decorator ng-init="arrayIndex = $index" form="copyWithIndex($index)"></sf-decorator><button ng-hide="form.readonly" ng-click="selected.tab = deleteFromArray($index).length - 1" type="button" class="btn {{ form.style.remove || \'btn-default\' }} pull-right"><i class="icon-delete"></i> {{ form.remove || \'Remove\'}}</button></div></div></div><div ng-if="form.tabType === \'right\'" class="col-xs-3"><ul class="nav nav-tabs tabs-right"><li ng-repeat="item in modelArray track by $index" ng-click="$event.preventDefault() || (selected.tab = $index)" ng-class="{active: selected.tab === $index}"><a href="#">{{evalExpr(form.title, {\'$index\':$index, value: item}) || $index}}</a></li><li ng-hide="form.readonly" ng-click="$event.preventDefault() || appendToArray()"><a href="#"><i class="icon-plus"></i> {{ form.add || \'Add\'}}</a></li></ul></div></div>'),e.put("directives/decorators/bootstrap/tabs.html",'<div ng-init="selected = { tab: 0 }" class="schema-form-tabs {{form.htmlClass}}"><ul class="nav nav-tabs"><li ng-repeat="tab in form.tabs" ng-disabled="form.readonly" ng-click="$event.preventDefault() || (selected.tab = $index)" ng-class="{active: selected.tab === $index}"><a href="#">{{ tab.title }}</a></li></ul><div class="tab-content {{form.fieldHtmlClass}}"><div class="tab-pane" ng-disabled="form.readonly" ng-repeat="tab in form.tabs" ng-show="selected.tab === $index" ng-class="{active: selected.tab === $index}"><bootstrap-decorator ng-repeat="item in tab.items" form="item"></bootstrap-decorator></div></div></div>'),e.put("directives/decorators/bootstrap/textarea.html",'<div class="form-group has-feedback {{form.htmlClass}} schema-form-textarea" ng-class="{\'has-success\': hasSuccess(), \'has-error\': hasError(), \'required\': form.required}"><label ng-show="showTitle()">{{form.title}}</label> <textarea class="form-control {{form.fieldHtmlClass}}" sf-changed="form" placeholder="{{form.placeholder}}" ng-disabled="form.readonly" ng-model="$$value$$" ng-model-options="form.ngModelOptions" schema-validate="form" name="{{form.key.slice(-1)[0]}}">\n  </textarea> <span class="help-block">{{ (hasError() && errorMessage(schemaError())) || form.description}}</span></div>'),e.put("directives/decorators/bootstrap/timepicker.html",'<div class="form-group" ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess(), \'has-feedback\': form.feedback !== false }"><label class="control-label" ng-show="showTitle()">{{form.title}}</label><div class="row"><div class="form-control-time"><div class="input-group"><span class="input-group-addon"><i class="fa fa-clock-o"></i></span> <input type="text" class="form-control" size="8" ng-show="form.key" ng-model="$$value$$" schema-validate="form" data-time-type="{{form.timeOptions.timeType || \'string\'}}" data-time-format="{{form.timeOptions.timeFormat || \'shortTime\'}}" data-minute-step="{{form.timeOptions.minuteStep || \'15\'}}" data-use-native="{{form.timeOptions.useNative || false}}" bs-timepicker=""></div><span ng-if="form.feedback !== false" class="form-control-feedback" ng-class="evalInScope(form.feedback) || {\'icon\': true, \'icon-ok\': hasSuccess(), \'icon-x\': hasError() }"></span></div></div><div class="help-block" ng-show="(hasError() && errorMessage(schemaError())) || form.description" ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div></div>')}]),angular.module("schemaForm").config(["schemaFormDecoratorsProvider",function(e){var t="directives/decorators/bootstrap/";e.createDecorator("bootstrapDecorator",{textarea:t+"textarea.html",fieldset:t+"fieldset.html",array:t+"array.html",tabarray:t+"tabarray.html",tabs:t+"tabs.html",section:t+"section.html",conditional:t+"conditional-section.html",actions:t+"actions.html",select:t+"select.html",checkbox:t+"checkbox.html",checkboxes:t+"checkboxes.html",number:t+"default.html",password:t+"default.html",submit:t+"submit.html",button:t+"submit.html",print:t+"print.html",radios:t+"radios.html","radios-inline":t+"radios-inline.html",radiobuttons:t+"radio-buttons.html",help:t+"help.html",fileupload:t+"fileupload.html",files:t+"files.html",datepicker:t+"datepicker.html",timepicker:t+"timepicker.html",datetimepicker:t+"datetimepicker.html",phone:t+"phonenumber.html",split:t+"split.html","default":t+"default.html"},[function(e){return e.readonly&&e.key&&e.schema&&e.schema.print||"readonly"===e.type?t+"readonly.html":void 0}]),e.createDirectives({textarea:t+"textarea.html",select:t+"select.html",checkbox:t+"checkbox.html",checkboxes:t+"checkboxes.html",number:t+"default.html",submit:t+"submit.html",button:t+"submit.html",print:t+"print.html",text:t+"default.html",date:t+"datepicker.html",password:t+"default.html",input:t+"default.html",radios:t+"radios.html","radios-inline":t+"radios-inline.html",radiobuttons:t+"radio-buttons.html",split:t+"split.html",phone:t+"phonenumber.html"})}]).directive("sfFieldset",function(){return{transclude:!0,scope:!0,templateUrl:"directives/decorators/bootstrap/fieldset-trcl.html",link:function(e,t,a){e.title=e.$eval(a.title)}}}),angular.module("ui.bootstrap",["ui.bootstrap.transition","ui.bootstrap.alert","ui.bootstrap.carousel","ui.bootstrap.datepicker","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.pagination","ui.bootstrap.progressbar","ui.bootstrap.timepicker","ui.bootstrap.collapse","ui.bootstrap.bindHtml","ui.bootstrap.dropdown","ui.bootstrap.rating","ui.bootstrap.typeahead","ui.bootstrap.accordion","ui.bootstrap.buttons","ui.bootstrap.tabs","ui.bootstrap.modal"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(e,t,a){function n(e){for(var t in e)if(void 0!==s.style[t])return e[t]}var i=function(n,s,o){o=o||{};var r=e.defer(),l=i[o.animation?"animationEndEventName":"transitionEndEventName"],c=function(e){a.$apply(function(){n.unbind(l,c),r.resolve(n)})};return l&&n.bind(l,c),t(function(){angular.isString(s)?n.addClass(s):angular.isFunction(s)?s(n):angular.isObject(s)&&n.css(s),l||r.resolve(n)}),r.promise.cancel=function(){l&&n.unbind(l,c),r.reject("Transition cancelled")},r.promise},s=document.createElement("trans"),o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},r={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return i.transitionEndEventName=n(o),i.animationEndEventName=n(r),i}]),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(e,t){e.closeable="close"in t,this.close=e.close}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}).directive("dismissOnTimeout",["$timeout",function(e){return{require:"alert",link:function(t,a,n,i){e(function(){i.close()},parseInt(n.dismissOnTimeout,10))}}}]),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$interval","$transition",function(e,t,a,n){function i(){s();var t=+e.interval;!isNaN(t)&&t>0&&(r=a(o,t))}function s(){r&&(a.cancel(r),r=null)}function o(){var t=+e.interval;l&&!isNaN(t)&&t>0?e.next():e.pause()}var r,l,c=this,d=c.slides=e.slides=[],p=-1;c.currentSlide=null;var u=!1;c.select=e.select=function(a,s){function o(){if(!u){if(c.currentSlide&&angular.isString(s)&&!e.noTransition&&a.$element){a.$element.addClass(s);a.$element[0].offsetWidth;angular.forEach(d,function(e){angular.extend(e,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(a,{direction:s,active:!0,entering:!0}),angular.extend(c.currentSlide||{},{direction:s,leaving:!0}),e.$currentTransition=n(a.$element,{}),function(t,a){e.$currentTransition.then(function(){r(t,a)},function(){r(t,a)})}(a,c.currentSlide)}else r(a,c.currentSlide);c.currentSlide=a,p=l,i()}}function r(t,a){angular.extend(t,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(a||{},{direction:"",active:!1,leaving:!1,entering:!1}),e.$currentTransition=null}var l=d.indexOf(a);void 0===s&&(s=l>p?"next":"prev"),a&&a!==c.currentSlide&&(e.$currentTransition?(e.$currentTransition.cancel(),t(o)):o())},e.$on("$destroy",function(){u=!0}),c.indexOfSlide=function(e){return d.indexOf(e)},e.next=function(){var t=(p+1)%d.length;return e.$currentTransition?void 0:c.select(d[t],"next")},e.prev=function(){var t=0>p-1?d.length-1:p-1;return e.$currentTransition?void 0:c.select(d[t],"prev")},e.isActive=function(e){return c.currentSlide===e},e.$watch("interval",i),e.$on("$destroy",s),e.play=function(){l||(l=!0,i())},e.pause=function(){e.noPause||(l=!1,s())},c.addSlide=function(t,a){t.$element=a,d.push(t),1===d.length||t.active?(c.select(d[d.length-1]),1==d.length&&e.play()):t.active=!1},c.removeSlide=function(e){var t=d.indexOf(e);d.splice(t,1),d.length>0&&e.active?t>=d.length?c.select(d[t-1]):c.select(d[t]):p>t&&p--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?"},link:function(e,t,a,n){n.addSlide(e,t),e.$on("$destroy",function(){n.removeSlide(e)}),e.$watch("active",function(t){t&&n.select(e)})}}}),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function(e,t,a,n,i,s,o,r){var l=this,c={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange"],function(a,i){l[a]=angular.isDefined(t[a])?8>i?n(t[a])(e.$parent):e.$parent.$eval(t[a]):r[a]}),angular.forEach(["minDate","maxDate"],function(n){t[n]?e.$parent.$watch(a(t[n]),function(e){l[n]=e?new Date(e):null,l.refreshView()}):l[n]=r[n]?new Date(r[n]):null}),e.datepickerMode=e.datepickerMode||r.datepickerMode,e.uniqueId="datepicker-"+e.$id+"-"+Math.floor(1e4*Math.random()),this.activeDate=angular.isDefined(t.initDate)?e.$parent.$eval(t.initDate):new Date,e.isActive=function(t){return 0===l.compare(t.date,l.activeDate)?(e.activeDateId=t.uid,!0):!1},this.init=function(e){c=e,c.$render=function(){l.render()}},this.render=function(){if(c.$modelValue){var e=new Date(c.$modelValue),t=!isNaN(e);t?this.activeDate=e:s.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),c.$setValidity("date",t)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var e=c.$modelValue?new Date(c.$modelValue):null;c.$setValidity("date-disabled",!e||this.element&&!this.isDisabled(e))}},this.createDateObject=function(e,t){var a=c.$modelValue?new Date(c.$modelValue):null;return{date:e,label:o(e,t),selected:a&&0===this.compare(e,a),disabled:this.isDisabled(e),current:0===this.compare(e,new Date)}},this.isDisabled=function(a){return this.minDate&&this.compare(a,this.minDate)<0||this.maxDate&&this.compare(a,this.maxDate)>0||t.dateDisabled&&e.dateDisabled({date:a,mode:e.datepickerMode})},this.split=function(e,t){for(var a=[];e.length>0;)a.push(e.splice(0,t));return a},e.select=function(t){if(e.datepickerMode===l.minMode){var a=c.$modelValue?new Date(c.$modelValue):new Date(0,0,0,0,0,0,0);a.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),c.$setViewValue(a),c.$render()}else l.activeDate=t,e.datepickerMode=l.modes[l.modes.indexOf(e.datepickerMode)-1]},e.move=function(e){var t=l.activeDate.getFullYear()+e*(l.step.years||0),a=l.activeDate.getMonth()+e*(l.step.months||0);l.activeDate.setFullYear(t,a,1),l.refreshView()},e.toggleMode=function(t){t=t||1,e.datepickerMode===l.maxMode&&1===t||e.datepickerMode===l.minMode&&-1===t||(e.datepickerMode=l.modes[l.modes.indexOf(e.datepickerMode)+t])},e.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var d=function(){i(function(){l.element[0].focus()},0,!1)};e.$on("datepicker.focus",d),e.keydown=function(t){var a=e.keys[t.which];if(a&&!t.shiftKey&&!t.altKey)if(t.preventDefault(),t.stopPropagation(),"enter"===a||"space"===a){if(l.isDisabled(l.activeDate))return;e.select(l.activeDate),d()}else!t.ctrlKey||"up"!==a&&"down"!==a?(l.handleKeyDown(a,t),l.refreshView()):(e.toggleMode("up"===a?1:-1),d())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(e,t,a,n){var i=n[0],s=n[1];s&&i.init(s)}}}).directive("daypicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(t,a,n,i){function s(e,t){return 1!==t||e%4!==0||e%100===0&&e%400!==0?l[t]:29}function o(e,t){var a=new Array(t),n=new Date(e),i=0;for(n.setHours(12);t>i;)a[i++]=new Date(n),n.setDate(n.getDate()+1);return a}function r(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));var a=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((a-t)/864e5)/7)+1}t.showWeeks=i.showWeeks,i.step={months:1},i.element=a;var l=[31,28,31,30,31,30,31,31,30,31,30,31];i._refreshView=function(){var a=i.activeDate.getFullYear(),n=i.activeDate.getMonth(),s=new Date(a,n,1),l=i.startingDay-s.getDay(),c=l>0?7-l:-l,d=new Date(s);c>0&&d.setDate(-c+1);for(var p=o(d,42),u=0;42>u;u++)p[u]=angular.extend(i.createDateObject(p[u],i.formatDay),{secondary:p[u].getMonth()!==n,uid:t.uniqueId+"-"+u});t.labels=new Array(7);for(var m=0;7>m;m++)t.labels[m]={abbr:e(p[m].date,i.formatDayHeader),full:e(p[m].date,"EEEE")};if(t.title=e(i.activeDate,i.formatDayTitle),t.rows=i.split(p,7),t.showWeeks){t.weekNumbers=[];for(var f=r(t.rows[0][0].date),g=t.rows.length;t.weekNumbers.push(f++)<g;);}},i.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},i.handleKeyDown=function(e,t){var a=i.activeDate.getDate();if("left"===e)a-=1;else if("up"===e)a-=7;else if("right"===e)a+=1;else if("down"===e)a+=7;else if("pageup"===e||"pagedown"===e){var n=i.activeDate.getMonth()+("pageup"===e?-1:1);i.activeDate.setMonth(n,1),a=Math.min(s(i.activeDate.getFullYear(),i.activeDate.getMonth()),a)}else"home"===e?a=1:"end"===e&&(a=s(i.activeDate.getFullYear(),i.activeDate.getMonth()));i.activeDate.setDate(a)},i.refreshView()}}}]).directive("monthpicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(t,a,n,i){i.step={years:1},i.element=a,i._refreshView=function(){for(var a=new Array(12),n=i.activeDate.getFullYear(),s=0;12>s;s++)a[s]=angular.extend(i.createDateObject(new Date(n,s,1),i.formatMonth),{uid:t.uniqueId+"-"+s});t.title=e(i.activeDate,i.formatMonthTitle),t.rows=i.split(a,3)},i.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth())-new Date(t.getFullYear(),t.getMonth())},i.handleKeyDown=function(e,t){var a=i.activeDate.getMonth();if("left"===e)a-=1;else if("up"===e)a-=3;else if("right"===e)a+=1;else if("down"===e)a+=3;else if("pageup"===e||"pagedown"===e){var n=i.activeDate.getFullYear()+("pageup"===e?-1:1);i.activeDate.setFullYear(n)}else"home"===e?a=0:"end"===e&&(a=11);i.activeDate.setMonth(a)},i.refreshView()}}}]).directive("yearpicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(e,t,a,n){function i(e){return parseInt((e-1)/s,10)*s+1}var s=n.yearRange;n.step={years:s},n.element=t,n._refreshView=function(){for(var t=new Array(s),a=0,o=i(n.activeDate.getFullYear());s>a;a++)t[a]=angular.extend(n.createDateObject(new Date(o+a,0,1),n.formatYear),{uid:e.uniqueId+"-"+a});e.title=[t[0].label,t[s-1].label].join(" - "),e.rows=n.split(t,5)},n.compare=function(e,t){return e.getFullYear()-t.getFullYear()},n.handleKeyDown=function(e,t){var a=n.activeDate.getFullYear();"left"===e?a-=1:"up"===e?a-=5:"right"===e?a+=1:"down"===e?a+=5:"pageup"===e||"pagedown"===e?a+=("pageup"===e?-1:1)*n.step.years:"home"===e?a=i(n.activeDate.getFullYear()):"end"===e&&(a=i(n.activeDate.getFullYear())+s-1),n.activeDate.setFullYear(a)},n.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function(e,t,a,n,i,s,o){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&"},link:function(r,l,c,d){function p(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function u(e){if(e){if(angular.isDate(e)&&!isNaN(e))return d.$setValidity("date",!0),e;if(angular.isString(e)){var t=s.parse(e,m)||new Date(e);return isNaN(t)?void d.$setValidity("date",!1):(d.$setValidity("date",!0),t)}return void d.$setValidity("date",!1)}return d.$setValidity("date",!0),null}var m,f=angular.isDefined(c.closeOnDateSelection)?r.$parent.$eval(c.closeOnDateSelection):o.closeOnDateSelection,g=angular.isDefined(c.datepickerAppendToBody)?r.$parent.$eval(c.datepickerAppendToBody):o.appendToBody;r.showButtonBar=angular.isDefined(c.showButtonBar)?r.$parent.$eval(c.showButtonBar):o.showButtonBar,r.getText=function(e){return r[e+"Text"]||o[e+"Text"]},c.$observe("datepickerPopup",function(e){m=e||o.datepickerPopup,d.$render()});var v=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");v.attr({"ng-model":"date","ng-change":"dateSelection()"});var h=angular.element(v.children()[0]);c.datepickerOptions&&angular.forEach(r.$parent.$eval(c.datepickerOptions),function(e,t){h.attr(p(t),e)}),r.watchData={},angular.forEach(["minDate","maxDate","datepickerMode"],function(e){if(c[e]){var a=t(c[e]);if(r.$parent.$watch(a,function(t){r.watchData[e]=t}),h.attr(p(e),"watchData."+e),"datepickerMode"===e){var n=a.assign;r.$watch("watchData."+e,function(e,t){e!==t&&n(r.$parent,e)})}}}),c.dateDisabled&&h.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),d.$parsers.unshift(u),r.dateSelection=function(e){angular.isDefined(e)&&(r.date=e),d.$setViewValue(r.date),d.$render(),f&&(r.isOpen=!1,l[0].focus())},l.bind("input change keyup",function(){r.$apply(function(){r.date=d.$modelValue})}),d.$render=function(){var e=d.$viewValue?i(d.$viewValue,m):"";l.val(e),r.date=u(d.$modelValue)};var b=function(e){r.isOpen&&e.target!==l[0]&&r.$apply(function(){r.isOpen=!1})},y=function(e,t){r.keydown(e)};l.bind("keydown",y),r.keydown=function(e){27===e.which?(e.preventDefault(),e.stopPropagation(),r.close()):40!==e.which||r.isOpen||(r.isOpen=!0)},r.$watch("isOpen",function(e){e?(r.$broadcast("datepicker.focus"),r.position=g?n.offset(l):n.position(l),r.position.top=r.position.top+l.prop("offsetHeight"),a.bind("click",b)):a.unbind("click",b)}),r.select=function(e){if("today"===e){var t=new Date;angular.isDate(d.$modelValue)?(e=new Date(d.$modelValue),e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate())):e=new Date(t.setHours(0,0,0,0))}r.dateSelection(e)},r.close=function(){r.isOpen=!1,l[0].focus()};var w=e(v)(r);v.remove(),g?a.find("body").append(w):l.after(w),r.$on("$destroy",function(){w.remove(),l.unbind("keydown",y),a.unbind("click",b)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(e,t,a){t.bind("click",function(e){e.preventDefault(),e.stopPropagation()})}}}),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function(e,t){function a(e){var a=[],n=e.split("");return angular.forEach(i,function(t,i){var s=e.indexOf(i);if(s>-1){e=e.split(""),n[s]="("+t.regex+")",e[s]="$";for(var o=s+1,r=s+i.length;r>o;o++)n[o]="",e[o]="$";e=e.join(""),a.push({index:s,apply:t.apply})}}),{regex:new RegExp("^"+n.join("")+"$"),map:t(a,"index")}}function n(e,t,a){return 1===t&&a>28?29===a&&(e%4===0&&e%100!==0||e%400===0):3===t||5===t||8===t||10===t?31>a:!0}this.parsers={};var i={yyyy:{regex:"\\d{4}",apply:function(e){this.year=+e}},yy:{regex:"\\d{2}",apply:function(e){this.year=+e+2e3}},y:{regex:"\\d{1,4}",apply:function(e){this.year=+e}},MMMM:{regex:e.DATETIME_FORMATS.MONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.MONTH.indexOf(t)}},MMM:{regex:e.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.SHORTMONTH.indexOf(t)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(e){this.month=e-1}},M:{regex:"[1-9]|1[0-2]",apply:function(e){this.month=e-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},EEEE:{regex:e.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:e.DATETIME_FORMATS.SHORTDAY.join("|")}};this.parse=function(t,i){if(!angular.isString(t)||!i)return t;i=e.DATETIME_FORMATS[i]||i,this.parsers[i]||(this.parsers[i]=a(i));var s=this.parsers[i],o=s.regex,r=s.map,l=t.match(o);if(l&&l.length){for(var c,d={year:1900,month:0,date:1,hours:0},p=1,u=l.length;u>p;p++){var m=r[p-1];m.apply&&m.apply.call(d,l[p])}return n(d.year,d.month,d.date)&&(c=new Date(d.year,d.month,d.date,d.hours)),c}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(e,t){function a(e,a){return e.currentStyle?e.currentStyle[a]:t.getComputedStyle?t.getComputedStyle(e)[a]:e.style[a]}function n(e){return"static"===(a(e,"position")||"static")}var i=function(t){for(var a=e[0],i=t.offsetParent||a;i&&i!==a&&n(i);)i=i.offsetParent;return i||a};return{position:function(t){var a=this.offset(t),n={top:0,left:0},s=i(t[0]);s!=e[0]&&(n=this.offset(angular.element(s)),n.top+=s.clientTop-s.scrollTop,n.left+=s.clientLeft-s.scrollLeft);var o=t[0].getBoundingClientRect();return{width:o.width||t.prop("offsetWidth"),height:o.height||t.prop("offsetHeight"),top:a.top-n.top,left:a.left-n.left}},offset:function(a){var n=a[0].getBoundingClientRect();return{width:n.width||a.prop("offsetWidth"),height:n.height||a.prop("offsetHeight"),top:n.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:n.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}},positionElements:function(e,t,a,n){var i,s,o,r,l=a.split("-"),c=l[0],d=l[1]||"center";i=n?this.offset(e):this.position(e),s=t.prop("offsetWidth"),o=t.prop("offsetHeight");var p={center:function(){return i.left+i.width/2-s/2},left:function(){return i.left},right:function(){return i.left+i.width}},u={center:function(){return i.top+i.height/2-o/2},top:function(){return i.top},bottom:function(){return i.top+i.height}};switch(c){case"right":r={top:u[d](),left:p[c]()};break;case"left":r={top:u[d](),left:i.left-s};break;case"bottom":r={top:u[c](),left:p[d]()};break;default:r={top:i.top-o,left:p[d]()}}return r}}}]),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(e,t,a){var n=this,i={$setViewValue:angular.noop},s=t.numPages?a(t.numPages).assign:angular.noop;this.init=function(s,o){i=s,this.config=o,i.$render=function(){n.render()},t.itemsPerPage?e.$parent.$watch(a(t.itemsPerPage),function(t){n.itemsPerPage=parseInt(t,10),e.totalPages=n.calculateTotalPages()}):this.itemsPerPage=o.itemsPerPage},this.calculateTotalPages=function(){var t=this.itemsPerPage<1?1:Math.ceil(e.totalItems/this.itemsPerPage);return Math.max(t||0,1)},this.render=function(){e.page=parseInt(i.$viewValue,10)||1},e.selectPage=function(t){e.page!==t&&t>0&&t<=e.totalPages&&(i.$setViewValue(t),i.$render())},e.getText=function(t){return e[t+"Text"]||n.config[t+"Text"]},e.noPrevious=function(){return 1===e.page},e.noNext=function(){return e.page===e.totalPages},e.$watch("totalItems",function(){e.totalPages=n.calculateTotalPages()}),e.$watch("totalPages",function(t){s(e.$parent,t),e.page>t?e.selectPage(t):i.$render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(e,t){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(a,n,i,s){function o(e,t,a){return{number:e,text:t,active:a}}function r(e,t){var a=[],n=1,i=t,s=angular.isDefined(d)&&t>d;s&&(p?(n=Math.max(e-Math.floor(d/2),1),i=n+d-1,i>t&&(i=t,n=i-d+1)):(n=(Math.ceil(e/d)-1)*d+1,i=Math.min(n+d-1,t)));for(var r=n;i>=r;r++){var l=o(r,r,r===e);a.push(l)}if(s&&!p){if(n>1){var c=o(n-1,"...",!1);a.unshift(c)}if(t>i){var u=o(i+1,"...",!1);a.push(u)}}return a}var l=s[0],c=s[1];if(c){var d=angular.isDefined(i.maxSize)?a.$parent.$eval(i.maxSize):t.maxSize,p=angular.isDefined(i.rotate)?a.$parent.$eval(i.rotate):t.rotate;a.boundaryLinks=angular.isDefined(i.boundaryLinks)?a.$parent.$eval(i.boundaryLinks):t.boundaryLinks,a.directionLinks=angular.isDefined(i.directionLinks)?a.$parent.$eval(i.directionLinks):t.directionLinks,l.init(c,t),i.maxSize&&a.$parent.$watch(e(i.maxSize),function(e){d=parseInt(e,10),l.render()});var u=l.render;l.render=function(){u(),a.page>0&&a.page<=a.totalPages&&(a.pages=r(a.page,a.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:" Previous",nextText:"Next ",align:!0}).directive("pager",["pagerConfig",function(e){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(t,a,n,i){var s=i[0],o=i[1];o&&(t.align=angular.isDefined(n.align)?t.$parent.$eval(n.align):e.align,s.init(o,e))}}}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function(e,t,a){var n=this,i=angular.isDefined(t.animate)?e.$parent.$eval(t.animate):a.animate;this.bars=[],e.max=angular.isDefined(t.max)?e.$parent.$eval(t.max):a.max,this.addBar=function(t,a){i||a.css({transition:"none"}),this.bars.push(t),t.$watch("value",function(a){t.percent=+(100*a/e.max).toFixed(2)}),t.$on("$destroy",function(){a=null,n.removeBar(t)})},this.removeBar=function(e){this.bars.splice(this.bars.indexOf(e),1)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},templateUrl:"template/progressbar/progress.html"}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(e,t,a,n){n.addBar(e,t)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(e,t,a,n){n.addBar(e,angular.element(t.children()[0]))}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(e,t,a,n,i,s){function o(){var t=parseInt(e.hours,10),a=e.showMeridian?t>0&&13>t:t>=0&&24>t;return a?(e.showMeridian&&(12===t&&(t=0),e.meridian===g[1]&&(t+=12)),t):void 0}function r(){var t=parseInt(e.minutes,10);return t>=0&&60>t?t:void 0}function l(e){return angular.isDefined(e)&&e.toString().length<2?"0"+e:e}function c(e){d(),f.$setViewValue(new Date(m)),p(e)}function d(){f.$setValidity("time",!0),e.invalidHours=!1,e.invalidMinutes=!1}function p(t){var a=m.getHours(),n=m.getMinutes();e.showMeridian&&(a=0===a||12===a?12:a%12),e.hours="h"===t?a:l(a),e.minutes="m"===t?n:l(n),e.meridian=m.getHours()<12?g[0]:g[1]}function u(e){var t=new Date(m.getTime()+6e4*e);m.setHours(t.getHours(),t.getMinutes()),c()}var m=new Date,f={$setViewValue:angular.noop},g=angular.isDefined(t.meridians)?e.$parent.$eval(t.meridians):s.meridians||i.DATETIME_FORMATS.AMPMS;this.init=function(a,n){f=a,f.$render=this.render;var i=n.eq(0),o=n.eq(1),r=angular.isDefined(t.mousewheel)?e.$parent.$eval(t.mousewheel):s.mousewheel;r&&this.setupMousewheelEvents(i,o),e.readonlyInput=angular.isDefined(t.readonlyInput)?e.$parent.$eval(t.readonlyInput):s.readonlyInput,this.setupInputEvents(i,o)};var v=s.hourStep;t.hourStep&&e.$parent.$watch(a(t.hourStep),function(e){v=parseInt(e,10)});var h=s.minuteStep;t.minuteStep&&e.$parent.$watch(a(t.minuteStep),function(e){h=parseInt(e,10)}),e.showMeridian=s.showMeridian,t.showMeridian&&e.$parent.$watch(a(t.showMeridian),function(t){if(e.showMeridian=!!t,f.$error.time){var a=o(),n=r();angular.isDefined(a)&&angular.isDefined(n)&&(m.setHours(a),c())}else p()}),this.setupMousewheelEvents=function(t,a){var n=function(e){e.originalEvent&&(e=e.originalEvent);var t=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||t>0};t.bind("mousewheel wheel",function(t){e.$apply(n(t)?e.incrementHours():e.decrementHours()),t.preventDefault()}),a.bind("mousewheel wheel",function(t){e.$apply(n(t)?e.incrementMinutes():e.decrementMinutes()),t.preventDefault()})},this.setupInputEvents=function(t,a){if(e.readonlyInput)return e.updateHours=angular.noop,void(e.updateMinutes=angular.noop);var n=function(t,a){f.$setViewValue(null),f.$setValidity("time",!1),angular.isDefined(t)&&(e.invalidHours=t),
angular.isDefined(a)&&(e.invalidMinutes=a)};e.updateHours=function(){var e=o();angular.isDefined(e)?(m.setHours(e),c("h")):n(!0)},t.bind("blur",function(t){!e.invalidHours&&e.hours<10&&e.$apply(function(){e.hours=l(e.hours)})}),e.updateMinutes=function(){var e=r();angular.isDefined(e)?(m.setMinutes(e),c("m")):n(void 0,!0)},a.bind("blur",function(t){!e.invalidMinutes&&e.minutes<10&&e.$apply(function(){e.minutes=l(e.minutes)})})},this.render=function(){var e=f.$modelValue?new Date(f.$modelValue):null;isNaN(e)?(f.$setValidity("time",!1),n.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(e&&(m=e),d(),p())},e.incrementHours=function(){u(60*v)},e.decrementHours=function(){u(60*-v)},e.incrementMinutes=function(){u(h)},e.decrementMinutes=function(){u(-h)},e.toggleMeridian=function(){u(720*(m.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(e,t,a,n){var i=n[0],s=n[1];s&&i.init(s,t.find("input"))}}}),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(e){return{link:function(t,a,n){function i(t){function n(){c===i&&(c=void 0)}var i=e(a,t);return c&&c.cancel(),c=i,i.then(n,n),i}function s(){d?(d=!1,o()):(a.removeClass("collapse").addClass("collapsing"),i({height:a[0].scrollHeight+"px"}).then(o))}function o(){a.removeClass("collapsing"),a.addClass("collapse in"),a.css({height:"auto"})}function r(){if(d)d=!1,l(),a.css({height:0});else{a.css({height:a[0].scrollHeight+"px"});a[0].offsetWidth;a.removeClass("collapse in").addClass("collapsing"),i({height:0}).then(l)}}function l(){a.removeClass("collapsing"),a.addClass("collapse")}var c,d=!0;t.$watch(n.collapse,function(e){e?r():s()})}}}]),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(e,t,a){t.addClass("ng-binding").data("$binding",a.bindHtmlUnsafe),e.$watch(a.bindHtmlUnsafe,function(e){t.html(e||"")})}}),angular.module("ui.bootstrap.dropdown",[]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function(e){var t=null;this.open=function(i){t||(e.bind("click",a),e.bind("keydown",n)),t&&t!==i&&(t.isOpen=!1),t=i},this.close=function(i){t===i&&(t=null,e.unbind("click",a),e.unbind("keydown",n))};var a=function(e){if(t){var a=t.getToggleElement();e&&a&&a[0].contains(e.target)||t.$apply(function(){t.isOpen=!1})}},n=function(e){27===e.which&&(t.focusToggleElement(),a())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function(e,t,a,n,i,s){var o,r=this,l=e.$new(),c=n.openClass,d=angular.noop,p=t.onToggle?a(t.onToggle):angular.noop;this.init=function(n){r.$element=n,t.isOpen&&(o=a(t.isOpen),d=o.assign,e.$watch(o,function(e){l.isOpen=!!e}))},this.toggle=function(e){return l.isOpen=arguments.length?!!e:!l.isOpen},this.isOpen=function(){return l.isOpen},l.getToggleElement=function(){return r.toggleElement},l.focusToggleElement=function(){r.toggleElement&&r.toggleElement[0].focus()},l.$watch("isOpen",function(t,a){s[t?"addClass":"removeClass"](r.$element,c),t?(l.focusToggleElement(),i.open(l)):i.close(l),d(e,t),angular.isDefined(t)&&t!==a&&p(e,{open:!!t})}),e.$on("$locationChangeSuccess",function(){l.isOpen=!1}),e.$on("$destroy",function(){l.$destroy()})}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(e,t,a,n){n.init(t)}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(e,t,a,n){if(n){n.toggleElement=t;var i=function(i){i.preventDefault(),t.hasClass("disabled")||a.disabled||e.$apply(function(){n.toggle()})};t.bind("click",i),t.attr({"aria-haspopup":!0,"aria-expanded":!1}),e.$watch(n.isOpen,function(e){t.attr("aria-expanded",!!e)}),e.$on("$destroy",function(){t.unbind("click",i)})}}}}),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function e(e){var t=/[A-Z]/g,a="-";return e.replace(t,function(e,t){return(t?a:"")+e.toLowerCase()})}var t={placement:"top",animation:!0,popupDelay:0},a={mouseenter:"mouseleave",click:"click",focus:"blur"},n={};this.options=function(e){angular.extend(n,e)},this.setTriggers=function(e){angular.extend(a,e)},this.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function(i,s,o,r,l,c){return function(i,d,p){function u(e){var t=e||m.trigger||p,n=a[t]||t;return{show:t,hide:n}}var m=angular.extend({},t,n),f=e(i),g=c.startSymbol(),v=c.endSymbol(),h="<div "+f+'-popup title="'+g+"title"+v+'" content="'+g+"content"+v+'" placement="'+g+"placement"+v+'" animation="animation" is-open="isOpen"></div>';return{restrict:"EA",compile:function(e,t){var a=s(h);return function(e,t,n){function s(){E.isOpen?p():c()}function c(){(!C||e.$eval(n[d+"Enable"]))&&(b(),E.popupDelay?A||(A=o(f,E.popupDelay,!1),A.then(function(e){e()})):f()())}function p(){e.$apply(function(){g()})}function f(){return A=null,$&&(o.cancel($),$=null),E.content?(v(),k.css({top:0,left:0,display:"block"}),S?r.find("body").append(k):t.after(k),D(),E.isOpen=!0,E.$digest(),D):angular.noop}function g(){E.isOpen=!1,o.cancel(A),A=null,E.animation?$||($=o(h,500)):h()}function v(){k&&h(),M=E.$new(),k=a(M,angular.noop)}function h(){$=null,k&&(k.remove(),k=null),M&&(M.$destroy(),M=null)}function b(){y(),w()}function y(){var e=n[d+"Placement"];E.placement=angular.isDefined(e)?e:m.placement}function w(){var e=n[d+"PopupDelay"],t=parseInt(e,10);E.popupDelay=isNaN(t)?m.popupDelay:t}function x(){var e=n[d+"Trigger"];I(),T=u(e),T.show===T.hide?t.bind(T.show,s):(t.bind(T.show,c),t.bind(T.hide,p))}var k,M,$,A,S=angular.isDefined(m.appendToBody)?m.appendToBody:!1,T=u(void 0),C=angular.isDefined(n[d+"Enable"]),E=e.$new(!0),D=function(){var e=l.positionElements(t,k,E.placement,S);e.top+="px",e.left+="px",k.css(e)};E.isOpen=!1,n.$observe(i,function(e){E.content=e,!e&&E.isOpen&&g()}),n.$observe(d+"Title",function(e){E.title=e});var I=function(){t.unbind(T.show,c),t.unbind(T.hide,p)};x();var P=e.$eval(n[d+"Animation"]);E.animation=angular.isDefined(P)?!!P:m.animation;var O=e.$eval(n[d+"AppendToBody"]);S=angular.isDefined(O)?O:S,S&&e.$on("$locationChangeSuccess",function(){E.isOpen&&g()}),e.$on("$destroy",function(){o.cancel($),o.cancel(A),I(),h(),E=null})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(e){return e("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(e){return e("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function(e,t,a){var n={$setViewValue:angular.noop};this.init=function(i){n=i,n.$render=this.render,this.stateOn=angular.isDefined(t.stateOn)?e.$parent.$eval(t.stateOn):a.stateOn,this.stateOff=angular.isDefined(t.stateOff)?e.$parent.$eval(t.stateOff):a.stateOff;var s=angular.isDefined(t.ratingStates)?e.$parent.$eval(t.ratingStates):new Array(angular.isDefined(t.max)?e.$parent.$eval(t.max):a.max);e.range=this.buildTemplateObjects(s)},this.buildTemplateObjects=function(e){for(var t=0,a=e.length;a>t;t++)e[t]=angular.extend({index:t},{stateOn:this.stateOn,stateOff:this.stateOff},e[t]);return e},e.rate=function(t){!e.readonly&&t>=0&&t<=e.range.length&&(n.$setViewValue(t),n.$render())},e.enter=function(t){e.readonly||(e.value=t),e.onHover({value:t})},e.reset=function(){e.value=n.$viewValue,e.onLeave()},e.onKeydown=function(t){/(37|38|39|40)/.test(t.which)&&(t.preventDefault(),t.stopPropagation(),e.rate(e.value+(38===t.which||39===t.which?1:-1)))},this.render=function(){e.value=n.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(e,t,a,n){var i=n[0],s=n[1];s&&i.init(s)}}}),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(e){var t=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(a){var n=a.match(t);if(!n)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+a+'".');return{itemName:n[3],source:e(n[4]),viewMapper:e(n[2]||n[1]),modelMapper:e(n[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(e,t,a,n,i,s,o){var r=[9,13,27,38,40];return{require:"ngModel",link:function(l,c,d,p){var u,m=l.$eval(d.typeaheadMinLength)||1,f=l.$eval(d.typeaheadWaitMs)||0,g=l.$eval(d.typeaheadEditable)!==!1,v=t(d.typeaheadLoading).assign||angular.noop,h=t(d.typeaheadOnSelect),b=d.typeaheadInputFormatter?t(d.typeaheadInputFormatter):void 0,y=d.typeaheadAppendToBody?l.$eval(d.typeaheadAppendToBody):!1,w=l.$eval(d.typeaheadFocusFirst)!==!1,x=t(d.ngModel).assign,k=o.parse(d.typeahead),M=l.$new();l.$on("$destroy",function(){M.$destroy()});var $="typeahead-"+M.$id+"-"+Math.floor(1e4*Math.random());c.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":$});var A=angular.element("<div typeahead-popup></div>");A.attr({id:$,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(d.typeaheadTemplateUrl)&&A.attr("template-url",d.typeaheadTemplateUrl);var S=function(){M.matches=[],M.activeIdx=-1,c.attr("aria-expanded",!1)},T=function(e){return $+"-option-"+e};M.$watch("activeIdx",function(e){0>e?c.removeAttr("aria-activedescendant"):c.attr("aria-activedescendant",T(e))});var C=function(e){var t={$viewValue:e};v(l,!0),a.when(k.source(l,t)).then(function(a){var n=e===p.$viewValue;if(n&&u)if(a.length>0){M.activeIdx=w?0:-1,M.matches.length=0;for(var i=0;i<a.length;i++)t[k.itemName]=a[i],M.matches.push({id:T(i),label:k.viewMapper(M,t),model:a[i]});M.query=e,M.position=y?s.offset(c):s.position(c),M.position.top=M.position.top+c.prop("offsetHeight"),c.attr("aria-expanded",!0)}else S();n&&v(l,!1)},function(){S(),v(l,!1)})};S(),M.query=void 0;var E,D=function(e){E=n(function(){C(e)},f)},I=function(){E&&n.cancel(E)};p.$parsers.unshift(function(e){return u=!0,e&&e.length>=m?f>0?(I(),D(e)):C(e):(v(l,!1),I(),S()),g?e:e?void p.$setValidity("editable",!1):(p.$setValidity("editable",!0),e)}),p.$formatters.push(function(e){var t,a,n={};return b?(n.$model=e,b(l,n)):(n[k.itemName]=e,t=k.viewMapper(l,n),n[k.itemName]=void 0,a=k.viewMapper(l,n),t!==a?t:e)}),M.select=function(e){var t,a,i={};i[k.itemName]=a=M.matches[e].model,t=k.modelMapper(l,i),x(l,t),p.$setValidity("editable",!0),h(l,{$item:a,$model:t,$label:k.viewMapper(l,i)}),S(),n(function(){c[0].focus()},0,!1)},c.bind("keydown",function(e){0!==M.matches.length&&-1!==r.indexOf(e.which)&&(-1!=M.activeIdx||13!==e.which&&9!==e.which)&&(e.preventDefault(),40===e.which?(M.activeIdx=(M.activeIdx+1)%M.matches.length,M.$digest()):38===e.which?(M.activeIdx=(M.activeIdx>0?M.activeIdx:M.matches.length)-1,M.$digest()):13===e.which||9===e.which?M.$apply(function(){M.select(M.activeIdx)}):27===e.which&&(e.stopPropagation(),S(),M.$digest()))}),c.bind("blur",function(e){u=!1});var P=function(e){c[0]!==e.target&&(S(),M.$digest())};i.bind("click",P),l.$on("$destroy",function(){i.unbind("click",P),y&&O.remove()});var O=e(A)(M);y?i.find("body").append(O):c.after(O)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(e,t,a){e.templateUrl=a.templateUrl,e.isOpen=function(){return e.matches.length>0},e.isActive=function(t){return e.active==t},e.selectActive=function(t){e.active=t},e.selectMatch=function(t){e.select({activeIdx:t})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(e,t,a,n){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(i,s,o){var r=n(o.templateUrl)(i.$parent)||"template/typeahead/typeahead-match.html";e.get(r,{cache:t}).success(function(e){s.replaceWith(a(e.trim())(i))})}}}]).filter("typeaheadHighlight",function(){function e(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,a){return a?(""+t).replace(new RegExp(e(a),"gi"),"<strong>$&</strong>"):t}}),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(e,t,a){this.groups=[],this.closeOthers=function(n){var i=angular.isDefined(t.closeOthers)?e.$eval(t.closeOthers):a.closeOthers;i&&angular.forEach(this.groups,function(e){e!==n&&(e.isOpen=!1)})},this.addGroup=function(e){var t=this;this.groups.push(e),e.$on("$destroy",function(a){t.removeGroup(e)})},this.removeGroup=function(e){var t=this.groups.indexOf(e);-1!==t&&this.groups.splice(t,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(e){this.heading=e}},link:function(e,t,a,n){n.addGroup(e),e.$watch("isOpen",function(t){t&&n.closeOthers(e)}),e.toggleOpen=function(){e.isDisabled||(e.isOpen=!e.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(e,t,a,n,i){n.setHeading(i(e,function(){}))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(e,t,a,n){e.$watch(function(){return n[a.accordionTransclude]},function(e){e&&(t.html(""),t.append(e))})}}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(e){this.activeClass=e.activeClass||"active",this.toggleEvent=e.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(e,t,a,n){var i=n[0],s=n[1];s.$render=function(){t.toggleClass(i.activeClass,angular.equals(s.$modelValue,e.$eval(a.btnRadio)))},t.bind(i.toggleEvent,function(){var n=t.hasClass(i.activeClass);(!n||angular.isDefined(a.uncheckable))&&e.$apply(function(){s.$setViewValue(n?null:e.$eval(a.btnRadio)),s.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(e,t,a,n){function i(){return o(a.btnCheckboxTrue,!0)}function s(){return o(a.btnCheckboxFalse,!1)}function o(t,a){var n=e.$eval(t);return angular.isDefined(n)?n:a}var r=n[0],l=n[1];l.$render=function(){t.toggleClass(r.activeClass,angular.equals(l.$modelValue,i()))},t.bind(r.toggleEvent,function(){e.$apply(function(){l.$setViewValue(t.hasClass(r.activeClass)?s():i()),l.$render()})})}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(e){var t=this,a=t.tabs=e.tabs=[];t.select=function(e){angular.forEach(a,function(t){t.active&&t!==e&&(t.active=!1,t.onDeselect())}),e.active=!0,e.onSelect()},t.addTab=function(e){a.push(e),1===a.length?e.active=!0:e.active&&t.select(e)},t.removeTab=function(e){var i=a.indexOf(e);if(e.active&&a.length>1&&!n){var s=i==a.length-1?i-1:i+1;t.select(a[s])}a.splice(i,1)};var n;e.$on("$destroy",function(){n=!0})}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(e,t,a){e.vertical=angular.isDefined(a.vertical)?e.$parent.$eval(a.vertical):!1,e.justified=angular.isDefined(a.justified)?e.$parent.$eval(a.justified):!1}}}).directive("tab",["$parse",function(e){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(t,a,n){return function(t,a,i,s){t.$watch("active",function(e){e&&s.select(t)}),t.disabled=!1,i.disabled&&t.$parent.$watch(e(i.disabled),function(e){t.disabled=!!e}),t.select=function(){t.disabled||(t.active=!0)},s.addTab(t),t.$on("$destroy",function(){s.removeTab(t)}),t.$transcludeFn=n}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(e,t,a,n){e.$watch("headingElement",function(e){e&&(t.html(""),t.append(e))})}}}]).directive("tabContentTransclude",function(){function e(e){return e.tagName&&(e.hasAttribute("tab-heading")||e.hasAttribute("data-tab-heading")||"tab-heading"===e.tagName.toLowerCase()||"data-tab-heading"===e.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(t,a,n){var i=t.$eval(n.tabContentTransclude);i.$transcludeFn(i.$parent,function(t){angular.forEach(t,function(t){e(t)?i.headingElement=t:a.append(t)})})}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var e=[];return{add:function(t,a){e.push({key:t,value:a})},get:function(t){for(var a=0;a<e.length;a++)if(t==e[a].key)return e[a]},keys:function(){for(var t=[],a=0;a<e.length;a++)t.push(e[a].key);return t},top:function(){return e[e.length-1]},remove:function(t){for(var a=-1,n=0;n<e.length;n++)if(t==e[n].key){a=n;break}return e.splice(a,1)[0]},removeTop:function(){return e.splice(e.length-1,1)[0]},length:function(){return e.length}}}}}).directive("modalBackdrop",["$timeout",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(t,a,n){t.backdropClass=n.backdropClass||"",t.animate=!1,e(function(){t.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(e,t){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(e,t){return t.templateUrl||"template/modal/window.html"},link:function(a,n,i){n.addClass(i.windowClass||""),a.size=i.size,t(function(){a.animate=!0,n[0].querySelectorAll("[autofocus]").length||n[0].focus()}),a.close=function(t){var a=e.getTop();a&&a.value.backdrop&&"static"!=a.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(a.key,"backdrop click"))}}}}]).directive("modalTransclude",function(){return{link:function(e,t,a,n,i){i(e.$parent,function(e){t.empty(),t.append(e)})}}}).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(e,t,a,n,i,s){function o(){for(var e=-1,t=m.keys(),a=0;a<t.length;a++)m.get(t[a]).value.backdrop&&(e=a);return e}function r(e){var t=a.find("body").eq(0),n=m.get(e).value;m.remove(e),c(n.modalDomEl,n.modalScope,300,function(){n.modalScope.$destroy(),t.toggleClass(u,m.length()>0),l()})}function l(){if(d&&-1==o()){var e=p;c(d,p,150,function(){e.$destroy(),e=null}),d=void 0,p=void 0}}function c(a,n,i,s){function o(){o.done||(o.done=!0,a.remove(),s&&s())}n.animate=!1;var r=e.transitionEndEventName;if(r){var l=t(o,i);a.bind(r,function(){t.cancel(l),o(),n.$apply()})}else t(o)}var d,p,u="modal-open",m=s.createNew(),f={};return i.$watch(o,function(e){p&&(p.index=e)}),a.bind("keydown",function(e){var t;27===e.which&&(t=m.top(),t&&t.value.keyboard&&(e.preventDefault(),i.$apply(function(){f.dismiss(t.key,"escape key press")})))}),f.open=function(e,t){m.add(e,{deferred:t.deferred,modalScope:t.scope,backdrop:t.backdrop,keyboard:t.keyboard});var s=a.find("body").eq(0),r=o();if(r>=0&&!d){p=i.$new(!0),p.index=r;var l=angular.element("<div modal-backdrop></div>");l.attr("backdrop-class",t.backdropClass),d=n(l)(p),s.append(d)}var c=angular.element("<div modal-window></div>");c.attr({"template-url":t.windowTemplateUrl,"window-class":t.windowClass,size:t.size,index:m.length()-1,animate:"animate"}).html(t.content);var f=n(c)(t.scope);m.top().value.modalDomEl=f,s.append(f),s.addClass(u)},f.close=function(e,t){var a=m.get(e);a&&(a.value.deferred.resolve(t),r(e))},f.dismiss=function(e,t){var a=m.get(e);a&&(a.value.deferred.reject(t),r(e))},f.dismissAll=function(e){for(var t=this.getTop();t;)this.dismiss(t.key,e),t=this.getTop()},f.getTop=function(){return m.top()},f}]).provider("$modal",function(){var e={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(t,a,n,i,s,o,r){function l(e){return e.template?n.when(e.template):i.get(angular.isFunction(e.templateUrl)?e.templateUrl():e.templateUrl,{cache:s}).then(function(e){return e.data})}function c(e){var a=[];return angular.forEach(e,function(e){(angular.isFunction(e)||angular.isArray(e))&&a.push(n.when(t.invoke(e)))}),a}var d={};return d.open=function(t){var i=n.defer(),s=n.defer(),d={result:i.promise,opened:s.promise,close:function(e){r.close(d,e)},dismiss:function(e){r.dismiss(d,e)}};if(t=angular.extend({},e.options,t),t.resolve=t.resolve||{},!t.template&&!t.templateUrl)throw new Error("One of template or templateUrl options is required.");var p=n.all([l(t)].concat(c(t.resolve)));return p.then(function(e){var n=(t.scope||a).$new();n.$close=d.close,n.$dismiss=d.dismiss;var s,l={},c=1;t.controller&&(l.$scope=n,l.$modalInstance=d,angular.forEach(t.resolve,function(t,a){l[a]=e[c++]}),s=o(t.controller,l),t.controllerAs&&(n[t.controllerAs]=s)),r.open(d,{scope:n,deferred:i,content:e[0],backdrop:t.backdrop,keyboard:t.keyboard,backdropClass:t.backdropClass,windowClass:t.windowClass,windowTemplateUrl:t.windowTemplateUrl,size:t.size})},function(e){i.reject(e)}),p.then(function(){s.resolve(!0)},function(){s.reject(!1)}),d},d}]};return e}),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.alert","ui.bootstrap.carousel","ui.bootstrap.datepicker","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.pagination","ui.bootstrap.progressbar","ui.bootstrap.timepicker","ui.bootstrap.collapse","ui.bootstrap.bindHtml","ui.bootstrap.dropdown","ui.bootstrap.rating","ui.bootstrap.typeahead","ui.bootstrap.accordion","ui.bootstrap.buttons","ui.bootstrap.tabs","ui.bootstrap.modal"]),angular.module("ui.bootstrap.tpls",["template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/pagination/pager.html","template/pagination/pagination.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/timepicker/timepicker.html","template/rating/rating.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html","template/accordion/accordion-group.html","template/accordion/accordion.html","template/tabs/tab.html","template/tabs/tabset.html","template/modal/backdrop.html","template/modal/window.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(e,t,a){function n(e){for(var t in e)if(void 0!==s.style[t])return e[t]}var i=function(n,s,o){o=o||{};var r=e.defer(),l=i[o.animation?"animationEndEventName":"transitionEndEventName"],c=function(e){a.$apply(function(){n.unbind(l,c),r.resolve(n)})};return l&&n.bind(l,c),t(function(){angular.isString(s)?n.addClass(s):angular.isFunction(s)?s(n):angular.isObject(s)&&n.css(s),l||r.resolve(n)}),r.promise.cancel=function(){l&&n.unbind(l,c),r.reject("Transition cancelled")},r.promise},s=document.createElement("trans"),o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},r={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return i.transitionEndEventName=n(o),i.animationEndEventName=n(r),i}]),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(e,t){e.closeable="close"in t,this.close=e.close}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}).directive("dismissOnTimeout",["$timeout",function(e){return{require:"alert",link:function(t,a,n,i){e(function(){i.close()},parseInt(n.dismissOnTimeout,10))}}}]),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$interval","$transition",function(e,t,a,n){function i(){s();var t=+e.interval;!isNaN(t)&&t>0&&(r=a(o,t))}function s(){r&&(a.cancel(r),r=null)}function o(){var t=+e.interval;l&&!isNaN(t)&&t>0?e.next():e.pause()}var r,l,c=this,d=c.slides=e.slides=[],p=-1;c.currentSlide=null;var u=!1;c.select=e.select=function(a,s){function o(){if(!u){if(c.currentSlide&&angular.isString(s)&&!e.noTransition&&a.$element){a.$element.addClass(s);a.$element[0].offsetWidth;angular.forEach(d,function(e){angular.extend(e,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(a,{direction:s,active:!0,entering:!0}),angular.extend(c.currentSlide||{},{direction:s,leaving:!0}),e.$currentTransition=n(a.$element,{}),function(t,a){e.$currentTransition.then(function(){r(t,a)},function(){r(t,a)})}(a,c.currentSlide)}else r(a,c.currentSlide);c.currentSlide=a,p=l,i()}}function r(t,a){angular.extend(t,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(a||{},{direction:"",active:!1,leaving:!1,entering:!1}),e.$currentTransition=null}var l=d.indexOf(a);void 0===s&&(s=l>p?"next":"prev"),a&&a!==c.currentSlide&&(e.$currentTransition?(e.$currentTransition.cancel(),t(o)):o())},e.$on("$destroy",function(){u=!0}),c.indexOfSlide=function(e){return d.indexOf(e)},e.next=function(){var t=(p+1)%d.length;return e.$currentTransition?void 0:c.select(d[t],"next")},e.prev=function(){var t=0>p-1?d.length-1:p-1;return e.$currentTransition?void 0:c.select(d[t],"prev")},e.isActive=function(e){return c.currentSlide===e},e.$watch("interval",i),e.$on("$destroy",s),e.play=function(){l||(l=!0,i())},e.pause=function(){e.noPause||(l=!1,s())},c.addSlide=function(t,a){t.$element=a,d.push(t),1===d.length||t.active?(c.select(d[d.length-1]),1==d.length&&e.play()):t.active=!1},c.removeSlide=function(e){var t=d.indexOf(e);d.splice(t,1),d.length>0&&e.active?t>=d.length?c.select(d[t-1]):c.select(d[t]):p>t&&p--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?"},link:function(e,t,a,n){n.addSlide(e,t),e.$on("$destroy",function(){n.removeSlide(e)}),e.$watch("active",function(t){t&&n.select(e)})}}}),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function(e,t,a,n,i,s,o,r){var l=this,c={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange"],function(a,i){l[a]=angular.isDefined(t[a])?8>i?n(t[a])(e.$parent):e.$parent.$eval(t[a]):r[a]}),angular.forEach(["minDate","maxDate"],function(n){t[n]?e.$parent.$watch(a(t[n]),function(e){l[n]=e?new Date(e):null,l.refreshView()}):l[n]=r[n]?new Date(r[n]):null}),e.datepickerMode=e.datepickerMode||r.datepickerMode,e.uniqueId="datepicker-"+e.$id+"-"+Math.floor(1e4*Math.random()),this.activeDate=angular.isDefined(t.initDate)?e.$parent.$eval(t.initDate):new Date,e.isActive=function(t){return 0===l.compare(t.date,l.activeDate)?(e.activeDateId=t.uid,!0):!1},this.init=function(e){c=e,c.$render=function(){l.render()}},this.render=function(){if(c.$modelValue){var e=new Date(c.$modelValue),t=!isNaN(e);t?this.activeDate=e:s.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),c.$setValidity("date",t)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var e=c.$modelValue?new Date(c.$modelValue):null;c.$setValidity("date-disabled",!e||this.element&&!this.isDisabled(e))}},this.createDateObject=function(e,t){var a=c.$modelValue?new Date(c.$modelValue):null;return{date:e,label:o(e,t),selected:a&&0===this.compare(e,a),disabled:this.isDisabled(e),current:0===this.compare(e,new Date)}},this.isDisabled=function(a){return this.minDate&&this.compare(a,this.minDate)<0||this.maxDate&&this.compare(a,this.maxDate)>0||t.dateDisabled&&e.dateDisabled({date:a,mode:e.datepickerMode})},this.split=function(e,t){for(var a=[];e.length>0;)a.push(e.splice(0,t));return a},e.select=function(t){if(e.datepickerMode===l.minMode){var a=c.$modelValue?new Date(c.$modelValue):new Date(0,0,0,0,0,0,0);a.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),c.$setViewValue(a),c.$render()}else l.activeDate=t,e.datepickerMode=l.modes[l.modes.indexOf(e.datepickerMode)-1]},e.move=function(e){var t=l.activeDate.getFullYear()+e*(l.step.years||0),a=l.activeDate.getMonth()+e*(l.step.months||0);l.activeDate.setFullYear(t,a,1),l.refreshView()},e.toggleMode=function(t){t=t||1,e.datepickerMode===l.maxMode&&1===t||e.datepickerMode===l.minMode&&-1===t||(e.datepickerMode=l.modes[l.modes.indexOf(e.datepickerMode)+t])},e.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var d=function(){i(function(){l.element[0].focus()},0,!1)};e.$on("datepicker.focus",d),e.keydown=function(t){var a=e.keys[t.which];if(a&&!t.shiftKey&&!t.altKey)if(t.preventDefault(),t.stopPropagation(),"enter"===a||"space"===a){if(l.isDisabled(l.activeDate))return;e.select(l.activeDate),d()}else!t.ctrlKey||"up"!==a&&"down"!==a?(l.handleKeyDown(a,t),l.refreshView()):(e.toggleMode("up"===a?1:-1),d())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(e,t,a,n){var i=n[0],s=n[1];s&&i.init(s)}}}).directive("daypicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(t,a,n,i){function s(e,t){return 1!==t||e%4!==0||e%100===0&&e%400!==0?l[t]:29}function o(e,t){var a=new Array(t),n=new Date(e),i=0;for(n.setHours(12);t>i;)a[i++]=new Date(n),n.setDate(n.getDate()+1);return a}function r(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));var a=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((a-t)/864e5)/7)+1;
}t.showWeeks=i.showWeeks,i.step={months:1},i.element=a;var l=[31,28,31,30,31,30,31,31,30,31,30,31];i._refreshView=function(){var a=i.activeDate.getFullYear(),n=i.activeDate.getMonth(),s=new Date(a,n,1),l=i.startingDay-s.getDay(),c=l>0?7-l:-l,d=new Date(s);c>0&&d.setDate(-c+1);for(var p=o(d,42),u=0;42>u;u++)p[u]=angular.extend(i.createDateObject(p[u],i.formatDay),{secondary:p[u].getMonth()!==n,uid:t.uniqueId+"-"+u});t.labels=new Array(7);for(var m=0;7>m;m++)t.labels[m]={abbr:e(p[m].date,i.formatDayHeader),full:e(p[m].date,"EEEE")};if(t.title=e(i.activeDate,i.formatDayTitle),t.rows=i.split(p,7),t.showWeeks){t.weekNumbers=[];for(var f=r(t.rows[0][0].date),g=t.rows.length;t.weekNumbers.push(f++)<g;);}},i.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},i.handleKeyDown=function(e,t){var a=i.activeDate.getDate();if("left"===e)a-=1;else if("up"===e)a-=7;else if("right"===e)a+=1;else if("down"===e)a+=7;else if("pageup"===e||"pagedown"===e){var n=i.activeDate.getMonth()+("pageup"===e?-1:1);i.activeDate.setMonth(n,1),a=Math.min(s(i.activeDate.getFullYear(),i.activeDate.getMonth()),a)}else"home"===e?a=1:"end"===e&&(a=s(i.activeDate.getFullYear(),i.activeDate.getMonth()));i.activeDate.setDate(a)},i.refreshView()}}}]).directive("monthpicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(t,a,n,i){i.step={years:1},i.element=a,i._refreshView=function(){for(var a=new Array(12),n=i.activeDate.getFullYear(),s=0;12>s;s++)a[s]=angular.extend(i.createDateObject(new Date(n,s,1),i.formatMonth),{uid:t.uniqueId+"-"+s});t.title=e(i.activeDate,i.formatMonthTitle),t.rows=i.split(a,3)},i.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth())-new Date(t.getFullYear(),t.getMonth())},i.handleKeyDown=function(e,t){var a=i.activeDate.getMonth();if("left"===e)a-=1;else if("up"===e)a-=3;else if("right"===e)a+=1;else if("down"===e)a+=3;else if("pageup"===e||"pagedown"===e){var n=i.activeDate.getFullYear()+("pageup"===e?-1:1);i.activeDate.setFullYear(n)}else"home"===e?a=0:"end"===e&&(a=11);i.activeDate.setMonth(a)},i.refreshView()}}}]).directive("yearpicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(e,t,a,n){function i(e){return parseInt((e-1)/s,10)*s+1}var s=n.yearRange;n.step={years:s},n.element=t,n._refreshView=function(){for(var t=new Array(s),a=0,o=i(n.activeDate.getFullYear());s>a;a++)t[a]=angular.extend(n.createDateObject(new Date(o+a,0,1),n.formatYear),{uid:e.uniqueId+"-"+a});e.title=[t[0].label,t[s-1].label].join(" - "),e.rows=n.split(t,5)},n.compare=function(e,t){return e.getFullYear()-t.getFullYear()},n.handleKeyDown=function(e,t){var a=n.activeDate.getFullYear();"left"===e?a-=1:"up"===e?a-=5:"right"===e?a+=1:"down"===e?a+=5:"pageup"===e||"pagedown"===e?a+=("pageup"===e?-1:1)*n.step.years:"home"===e?a=i(n.activeDate.getFullYear()):"end"===e&&(a=i(n.activeDate.getFullYear())+s-1),n.activeDate.setFullYear(a)},n.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function(e,t,a,n,i,s,o){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&"},link:function(r,l,c,d){function p(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function u(e){if(e){if(angular.isDate(e)&&!isNaN(e))return d.$setValidity("date",!0),e;if(angular.isString(e)){var t=s.parse(e,m)||new Date(e);return isNaN(t)?void d.$setValidity("date",!1):(d.$setValidity("date",!0),t)}return void d.$setValidity("date",!1)}return d.$setValidity("date",!0),null}var m,f=angular.isDefined(c.closeOnDateSelection)?r.$parent.$eval(c.closeOnDateSelection):o.closeOnDateSelection,g=angular.isDefined(c.datepickerAppendToBody)?r.$parent.$eval(c.datepickerAppendToBody):o.appendToBody;r.showButtonBar=angular.isDefined(c.showButtonBar)?r.$parent.$eval(c.showButtonBar):o.showButtonBar,r.getText=function(e){return r[e+"Text"]||o[e+"Text"]},c.$observe("datepickerPopup",function(e){m=e||o.datepickerPopup,d.$render()});var v=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");v.attr({"ng-model":"date","ng-change":"dateSelection()"});var h=angular.element(v.children()[0]);c.datepickerOptions&&angular.forEach(r.$parent.$eval(c.datepickerOptions),function(e,t){h.attr(p(t),e)}),r.watchData={},angular.forEach(["minDate","maxDate","datepickerMode"],function(e){if(c[e]){var a=t(c[e]);if(r.$parent.$watch(a,function(t){r.watchData[e]=t}),h.attr(p(e),"watchData."+e),"datepickerMode"===e){var n=a.assign;r.$watch("watchData."+e,function(e,t){e!==t&&n(r.$parent,e)})}}}),c.dateDisabled&&h.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),d.$parsers.unshift(u),r.dateSelection=function(e){angular.isDefined(e)&&(r.date=e),d.$setViewValue(r.date),d.$render(),f&&(r.isOpen=!1,l[0].focus())},l.bind("input change keyup",function(){r.$apply(function(){r.date=d.$modelValue})}),d.$render=function(){var e=d.$viewValue?i(d.$viewValue,m):"";l.val(e),r.date=u(d.$modelValue)};var b=function(e){r.isOpen&&e.target!==l[0]&&r.$apply(function(){r.isOpen=!1})},y=function(e,t){r.keydown(e)};l.bind("keydown",y),r.keydown=function(e){27===e.which?(e.preventDefault(),e.stopPropagation(),r.close()):40!==e.which||r.isOpen||(r.isOpen=!0)},r.$watch("isOpen",function(e){e?(r.$broadcast("datepicker.focus"),r.position=g?n.offset(l):n.position(l),r.position.top=r.position.top+l.prop("offsetHeight"),a.bind("click",b)):a.unbind("click",b)}),r.select=function(e){if("today"===e){var t=new Date;angular.isDate(d.$modelValue)?(e=new Date(d.$modelValue),e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate())):e=new Date(t.setHours(0,0,0,0))}r.dateSelection(e)},r.close=function(){r.isOpen=!1,l[0].focus()};var w=e(v)(r);v.remove(),g?a.find("body").append(w):l.after(w),r.$on("$destroy",function(){w.remove(),l.unbind("keydown",y),a.unbind("click",b)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(e,t,a){t.bind("click",function(e){e.preventDefault(),e.stopPropagation()})}}}),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function(e,t){function a(e){var a=[],n=e.split("");return angular.forEach(i,function(t,i){var s=e.indexOf(i);if(s>-1){e=e.split(""),n[s]="("+t.regex+")",e[s]="$";for(var o=s+1,r=s+i.length;r>o;o++)n[o]="",e[o]="$";e=e.join(""),a.push({index:s,apply:t.apply})}}),{regex:new RegExp("^"+n.join("")+"$"),map:t(a,"index")}}function n(e,t,a){return 1===t&&a>28?29===a&&(e%4===0&&e%100!==0||e%400===0):3===t||5===t||8===t||10===t?31>a:!0}this.parsers={};var i={yyyy:{regex:"\\d{4}",apply:function(e){this.year=+e}},yy:{regex:"\\d{2}",apply:function(e){this.year=+e+2e3}},y:{regex:"\\d{1,4}",apply:function(e){this.year=+e}},MMMM:{regex:e.DATETIME_FORMATS.MONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.MONTH.indexOf(t)}},MMM:{regex:e.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.SHORTMONTH.indexOf(t)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(e){this.month=e-1}},M:{regex:"[1-9]|1[0-2]",apply:function(e){this.month=e-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},EEEE:{regex:e.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:e.DATETIME_FORMATS.SHORTDAY.join("|")}};this.parse=function(t,i){if(!angular.isString(t)||!i)return t;i=e.DATETIME_FORMATS[i]||i,this.parsers[i]||(this.parsers[i]=a(i));var s=this.parsers[i],o=s.regex,r=s.map,l=t.match(o);if(l&&l.length){for(var c,d={year:1900,month:0,date:1,hours:0},p=1,u=l.length;u>p;p++){var m=r[p-1];m.apply&&m.apply.call(d,l[p])}return n(d.year,d.month,d.date)&&(c=new Date(d.year,d.month,d.date,d.hours)),c}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(e,t){function a(e,a){return e.currentStyle?e.currentStyle[a]:t.getComputedStyle?t.getComputedStyle(e)[a]:e.style[a]}function n(e){return"static"===(a(e,"position")||"static")}var i=function(t){for(var a=e[0],i=t.offsetParent||a;i&&i!==a&&n(i);)i=i.offsetParent;return i||a};return{position:function(t){var a=this.offset(t),n={top:0,left:0},s=i(t[0]);s!=e[0]&&(n=this.offset(angular.element(s)),n.top+=s.clientTop-s.scrollTop,n.left+=s.clientLeft-s.scrollLeft);var o=t[0].getBoundingClientRect();return{width:o.width||t.prop("offsetWidth"),height:o.height||t.prop("offsetHeight"),top:a.top-n.top,left:a.left-n.left}},offset:function(a){var n=a[0].getBoundingClientRect();return{width:n.width||a.prop("offsetWidth"),height:n.height||a.prop("offsetHeight"),top:n.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:n.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}},positionElements:function(e,t,a,n){var i,s,o,r,l=a.split("-"),c=l[0],d=l[1]||"center";i=n?this.offset(e):this.position(e),s=t.prop("offsetWidth"),o=t.prop("offsetHeight");var p={center:function(){return i.left+i.width/2-s/2},left:function(){return i.left},right:function(){return i.left+i.width}},u={center:function(){return i.top+i.height/2-o/2},top:function(){return i.top},bottom:function(){return i.top+i.height}};switch(c){case"right":r={top:u[d](),left:p[c]()};break;case"left":r={top:u[d](),left:i.left-s};break;case"bottom":r={top:u[c](),left:p[d]()};break;default:r={top:i.top-o,left:p[d]()}}return r}}}]),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(e,t,a){var n=this,i={$setViewValue:angular.noop},s=t.numPages?a(t.numPages).assign:angular.noop;this.init=function(s,o){i=s,this.config=o,i.$render=function(){n.render()},t.itemsPerPage?e.$parent.$watch(a(t.itemsPerPage),function(t){n.itemsPerPage=parseInt(t,10),e.totalPages=n.calculateTotalPages()}):this.itemsPerPage=o.itemsPerPage},this.calculateTotalPages=function(){var t=this.itemsPerPage<1?1:Math.ceil(e.totalItems/this.itemsPerPage);return Math.max(t||0,1)},this.render=function(){e.page=parseInt(i.$viewValue,10)||1},e.selectPage=function(t){e.page!==t&&t>0&&t<=e.totalPages&&(i.$setViewValue(t),i.$render())},e.getText=function(t){return e[t+"Text"]||n.config[t+"Text"]},e.noPrevious=function(){return 1===e.page},e.noNext=function(){return e.page===e.totalPages},e.$watch("totalItems",function(){e.totalPages=n.calculateTotalPages()}),e.$watch("totalPages",function(t){s(e.$parent,t),e.page>t?e.selectPage(t):i.$render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(e,t){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(a,n,i,s){function o(e,t,a){return{number:e,text:t,active:a}}function r(e,t){var a=[],n=1,i=t,s=angular.isDefined(d)&&t>d;s&&(p?(n=Math.max(e-Math.floor(d/2),1),i=n+d-1,i>t&&(i=t,n=i-d+1)):(n=(Math.ceil(e/d)-1)*d+1,i=Math.min(n+d-1,t)));for(var r=n;i>=r;r++){var l=o(r,r,r===e);a.push(l)}if(s&&!p){if(n>1){var c=o(n-1,"...",!1);a.unshift(c)}if(t>i){var u=o(i+1,"...",!1);a.push(u)}}return a}var l=s[0],c=s[1];if(c){var d=angular.isDefined(i.maxSize)?a.$parent.$eval(i.maxSize):t.maxSize,p=angular.isDefined(i.rotate)?a.$parent.$eval(i.rotate):t.rotate;a.boundaryLinks=angular.isDefined(i.boundaryLinks)?a.$parent.$eval(i.boundaryLinks):t.boundaryLinks,a.directionLinks=angular.isDefined(i.directionLinks)?a.$parent.$eval(i.directionLinks):t.directionLinks,l.init(c,t),i.maxSize&&a.$parent.$watch(e(i.maxSize),function(e){d=parseInt(e,10),l.render()});var u=l.render;l.render=function(){u(),a.page>0&&a.page<=a.totalPages&&(a.pages=r(a.page,a.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:" Previous",nextText:"Next ",align:!0}).directive("pager",["pagerConfig",function(e){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(t,a,n,i){var s=i[0],o=i[1];o&&(t.align=angular.isDefined(n.align)?t.$parent.$eval(n.align):e.align,s.init(o,e))}}}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function(e,t,a){var n=this,i=angular.isDefined(t.animate)?e.$parent.$eval(t.animate):a.animate;this.bars=[],e.max=angular.isDefined(t.max)?e.$parent.$eval(t.max):a.max,this.addBar=function(t,a){i||a.css({transition:"none"}),this.bars.push(t),t.$watch("value",function(a){t.percent=+(100*a/e.max).toFixed(2)}),t.$on("$destroy",function(){a=null,n.removeBar(t)})},this.removeBar=function(e){this.bars.splice(this.bars.indexOf(e),1)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},templateUrl:"template/progressbar/progress.html"}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(e,t,a,n){n.addBar(e,t)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(e,t,a,n){n.addBar(e,angular.element(t.children()[0]))}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(e,t,a,n,i,s){function o(){var t=parseInt(e.hours,10),a=e.showMeridian?t>0&&13>t:t>=0&&24>t;return a?(e.showMeridian&&(12===t&&(t=0),e.meridian===g[1]&&(t+=12)),t):void 0}function r(){var t=parseInt(e.minutes,10);return t>=0&&60>t?t:void 0}function l(e){return angular.isDefined(e)&&e.toString().length<2?"0"+e:e}function c(e){d(),f.$setViewValue(new Date(m)),p(e)}function d(){f.$setValidity("time",!0),e.invalidHours=!1,e.invalidMinutes=!1}function p(t){var a=m.getHours(),n=m.getMinutes();e.showMeridian&&(a=0===a||12===a?12:a%12),e.hours="h"===t?a:l(a),e.minutes="m"===t?n:l(n),e.meridian=m.getHours()<12?g[0]:g[1]}function u(e){var t=new Date(m.getTime()+6e4*e);m.setHours(t.getHours(),t.getMinutes()),c()}var m=new Date,f={$setViewValue:angular.noop},g=angular.isDefined(t.meridians)?e.$parent.$eval(t.meridians):s.meridians||i.DATETIME_FORMATS.AMPMS;this.init=function(a,n){f=a,f.$render=this.render;var i=n.eq(0),o=n.eq(1),r=angular.isDefined(t.mousewheel)?e.$parent.$eval(t.mousewheel):s.mousewheel;r&&this.setupMousewheelEvents(i,o),e.readonlyInput=angular.isDefined(t.readonlyInput)?e.$parent.$eval(t.readonlyInput):s.readonlyInput,this.setupInputEvents(i,o)};var v=s.hourStep;t.hourStep&&e.$parent.$watch(a(t.hourStep),function(e){v=parseInt(e,10)});var h=s.minuteStep;t.minuteStep&&e.$parent.$watch(a(t.minuteStep),function(e){h=parseInt(e,10)}),e.showMeridian=s.showMeridian,t.showMeridian&&e.$parent.$watch(a(t.showMeridian),function(t){if(e.showMeridian=!!t,f.$error.time){var a=o(),n=r();angular.isDefined(a)&&angular.isDefined(n)&&(m.setHours(a),c())}else p()}),this.setupMousewheelEvents=function(t,a){var n=function(e){e.originalEvent&&(e=e.originalEvent);var t=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||t>0};t.bind("mousewheel wheel",function(t){e.$apply(n(t)?e.incrementHours():e.decrementHours()),t.preventDefault()}),a.bind("mousewheel wheel",function(t){e.$apply(n(t)?e.incrementMinutes():e.decrementMinutes()),t.preventDefault()})},this.setupInputEvents=function(t,a){if(e.readonlyInput)return e.updateHours=angular.noop,void(e.updateMinutes=angular.noop);var n=function(t,a){f.$setViewValue(null),f.$setValidity("time",!1),angular.isDefined(t)&&(e.invalidHours=t),angular.isDefined(a)&&(e.invalidMinutes=a)};e.updateHours=function(){var e=o();angular.isDefined(e)?(m.setHours(e),c("h")):n(!0)},t.bind("blur",function(t){!e.invalidHours&&e.hours<10&&e.$apply(function(){e.hours=l(e.hours)})}),e.updateMinutes=function(){var e=r();angular.isDefined(e)?(m.setMinutes(e),c("m")):n(void 0,!0)},a.bind("blur",function(t){!e.invalidMinutes&&e.minutes<10&&e.$apply(function(){e.minutes=l(e.minutes)})})},this.render=function(){var e=f.$modelValue?new Date(f.$modelValue):null;isNaN(e)?(f.$setValidity("time",!1),n.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(e&&(m=e),d(),p())},e.incrementHours=function(){u(60*v)},e.decrementHours=function(){u(60*-v)},e.incrementMinutes=function(){u(h)},e.decrementMinutes=function(){u(-h)},e.toggleMeridian=function(){u(720*(m.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(e,t,a,n){var i=n[0],s=n[1];s&&i.init(s,t.find("input"))}}}),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(e){return{link:function(t,a,n){function i(t){function n(){c===i&&(c=void 0)}var i=e(a,t);return c&&c.cancel(),c=i,i.then(n,n),i}function s(){d?(d=!1,o()):(a.removeClass("collapse").addClass("collapsing"),i({height:a[0].scrollHeight+"px"}).then(o))}function o(){a.removeClass("collapsing"),a.addClass("collapse in"),a.css({height:"auto"})}function r(){if(d)d=!1,l(),a.css({height:0});else{a.css({height:a[0].scrollHeight+"px"});a[0].offsetWidth;a.removeClass("collapse in").addClass("collapsing"),i({height:0}).then(l)}}function l(){a.removeClass("collapsing"),a.addClass("collapse")}var c,d=!0;t.$watch(n.collapse,function(e){e?r():s()})}}}]),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(e,t,a){t.addClass("ng-binding").data("$binding",a.bindHtmlUnsafe),e.$watch(a.bindHtmlUnsafe,function(e){t.html(e||"")})}}),angular.module("ui.bootstrap.dropdown",[]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function(e){var t=null;this.open=function(i){t||(e.bind("click",a),e.bind("keydown",n)),t&&t!==i&&(t.isOpen=!1),t=i},this.close=function(i){t===i&&(t=null,e.unbind("click",a),e.unbind("keydown",n))};var a=function(e){if(t){var a=t.getToggleElement();e&&a&&a[0].contains(e.target)||t.$apply(function(){t.isOpen=!1})}},n=function(e){27===e.which&&(t.focusToggleElement(),a())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function(e,t,a,n,i,s){var o,r=this,l=e.$new(),c=n.openClass,d=angular.noop,p=t.onToggle?a(t.onToggle):angular.noop;this.init=function(n){r.$element=n,t.isOpen&&(o=a(t.isOpen),d=o.assign,e.$watch(o,function(e){l.isOpen=!!e}))},this.toggle=function(e){return l.isOpen=arguments.length?!!e:!l.isOpen},this.isOpen=function(){return l.isOpen},l.getToggleElement=function(){return r.toggleElement},l.focusToggleElement=function(){r.toggleElement&&r.toggleElement[0].focus()},l.$watch("isOpen",function(t,a){s[t?"addClass":"removeClass"](r.$element,c),t?(l.focusToggleElement(),i.open(l)):i.close(l),d(e,t),angular.isDefined(t)&&t!==a&&p(e,{open:!!t})}),e.$on("$locationChangeSuccess",function(){l.isOpen=!1}),e.$on("$destroy",function(){l.$destroy()})}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(e,t,a,n){n.init(t)}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(e,t,a,n){if(n){n.toggleElement=t;var i=function(i){i.preventDefault(),t.hasClass("disabled")||a.disabled||e.$apply(function(){n.toggle()})};t.bind("click",i),t.attr({"aria-haspopup":!0,"aria-expanded":!1}),e.$watch(n.isOpen,function(e){t.attr("aria-expanded",!!e)}),e.$on("$destroy",function(){t.unbind("click",i)})}}}}),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function e(e){var t=/[A-Z]/g,a="-";return e.replace(t,function(e,t){return(t?a:"")+e.toLowerCase()})}var t={placement:"top",animation:!0,popupDelay:0},a={mouseenter:"mouseleave",click:"click",focus:"blur"},n={};this.options=function(e){angular.extend(n,e)},this.setTriggers=function(e){angular.extend(a,e)},this.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function(i,s,o,r,l,c){return function(i,d,p){function u(e){var t=e||m.trigger||p,n=a[t]||t;return{show:t,hide:n}}var m=angular.extend({},t,n),f=e(i),g=c.startSymbol(),v=c.endSymbol(),h="<div "+f+'-popup title="'+g+"title"+v+'" content="'+g+"content"+v+'" placement="'+g+"placement"+v+'" animation="animation" is-open="isOpen"></div>';return{restrict:"EA",compile:function(e,t){var a=s(h);return function(e,t,n){function s(){E.isOpen?p():c()}function c(){(!C||e.$eval(n[d+"Enable"]))&&(b(),E.popupDelay?A||(A=o(f,E.popupDelay,!1),A.then(function(e){e()})):f()())}function p(){e.$apply(function(){g()})}function f(){return A=null,$&&(o.cancel($),$=null),E.content?(v(),k.css({top:0,left:0,display:"block"}),S?r.find("body").append(k):t.after(k),D(),E.isOpen=!0,E.$digest(),D):angular.noop}function g(){E.isOpen=!1,o.cancel(A),A=null,E.animation?$||($=o(h,500)):h()}function v(){k&&h(),M=E.$new(),k=a(M,angular.noop)}function h(){$=null,k&&(k.remove(),k=null),M&&(M.$destroy(),M=null)}function b(){y(),w()}function y(){var e=n[d+"Placement"];E.placement=angular.isDefined(e)?e:m.placement}function w(){var e=n[d+"PopupDelay"],t=parseInt(e,10);E.popupDelay=isNaN(t)?m.popupDelay:t}function x(){var e=n[d+"Trigger"];I(),T=u(e),T.show===T.hide?t.bind(T.show,s):(t.bind(T.show,c),t.bind(T.hide,p))}var k,M,$,A,S=angular.isDefined(m.appendToBody)?m.appendToBody:!1,T=u(void 0),C=angular.isDefined(n[d+"Enable"]),E=e.$new(!0),D=function(){var e=l.positionElements(t,k,E.placement,S);e.top+="px",e.left+="px",k.css(e)};E.isOpen=!1,n.$observe(i,function(e){E.content=e,!e&&E.isOpen&&g()}),n.$observe(d+"Title",function(e){E.title=e});var I=function(){t.unbind(T.show,c),t.unbind(T.hide,p)};x();var P=e.$eval(n[d+"Animation"]);E.animation=angular.isDefined(P)?!!P:m.animation;var O=e.$eval(n[d+"AppendToBody"]);S=angular.isDefined(O)?O:S,S&&e.$on("$locationChangeSuccess",function(){E.isOpen&&g()}),e.$on("$destroy",function(){o.cancel($),o.cancel(A),I(),h(),E=null})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(e){return e("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(e){return e("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function(e,t,a){var n={$setViewValue:angular.noop};this.init=function(i){n=i,n.$render=this.render,this.stateOn=angular.isDefined(t.stateOn)?e.$parent.$eval(t.stateOn):a.stateOn,this.stateOff=angular.isDefined(t.stateOff)?e.$parent.$eval(t.stateOff):a.stateOff;var s=angular.isDefined(t.ratingStates)?e.$parent.$eval(t.ratingStates):new Array(angular.isDefined(t.max)?e.$parent.$eval(t.max):a.max);e.range=this.buildTemplateObjects(s)},this.buildTemplateObjects=function(e){for(var t=0,a=e.length;a>t;t++)e[t]=angular.extend({index:t},{stateOn:this.stateOn,stateOff:this.stateOff},e[t]);return e},e.rate=function(t){!e.readonly&&t>=0&&t<=e.range.length&&(n.$setViewValue(t),n.$render())},e.enter=function(t){e.readonly||(e.value=t),e.onHover({value:t})},e.reset=function(){e.value=n.$viewValue,e.onLeave()},e.onKeydown=function(t){/(37|38|39|40)/.test(t.which)&&(t.preventDefault(),t.stopPropagation(),e.rate(e.value+(38===t.which||39===t.which?1:-1)))},this.render=function(){e.value=n.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(e,t,a,n){var i=n[0],s=n[1];s&&i.init(s)}}}),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(e){var t=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(a){var n=a.match(t);if(!n)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+a+'".');return{itemName:n[3],source:e(n[4]),viewMapper:e(n[2]||n[1]),modelMapper:e(n[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(e,t,a,n,i,s,o){var r=[9,13,27,38,40];return{require:"ngModel",link:function(l,c,d,p){var u,m=l.$eval(d.typeaheadMinLength)||1,f=l.$eval(d.typeaheadWaitMs)||0,g=l.$eval(d.typeaheadEditable)!==!1,v=t(d.typeaheadLoading).assign||angular.noop,h=t(d.typeaheadOnSelect),b=d.typeaheadInputFormatter?t(d.typeaheadInputFormatter):void 0,y=d.typeaheadAppendToBody?l.$eval(d.typeaheadAppendToBody):!1,w=l.$eval(d.typeaheadFocusFirst)!==!1,x=t(d.ngModel).assign,k=o.parse(d.typeahead),M=l.$new();l.$on("$destroy",function(){M.$destroy()});var $="typeahead-"+M.$id+"-"+Math.floor(1e4*Math.random());c.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":$});var A=angular.element("<div typeahead-popup></div>");A.attr({id:$,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(d.typeaheadTemplateUrl)&&A.attr("template-url",d.typeaheadTemplateUrl);var S=function(){M.matches=[],M.activeIdx=-1,c.attr("aria-expanded",!1)},T=function(e){return $+"-option-"+e};M.$watch("activeIdx",function(e){0>e?c.removeAttr("aria-activedescendant"):c.attr("aria-activedescendant",T(e))});var C=function(e){var t={$viewValue:e};v(l,!0),a.when(k.source(l,t)).then(function(a){var n=e===p.$viewValue;if(n&&u)if(a.length>0){M.activeIdx=w?0:-1,M.matches.length=0;for(var i=0;i<a.length;i++)t[k.itemName]=a[i],M.matches.push({id:T(i),label:k.viewMapper(M,t),model:a[i]});M.query=e,M.position=y?s.offset(c):s.position(c),M.position.top=M.position.top+c.prop("offsetHeight"),c.attr("aria-expanded",!0)}else S();n&&v(l,!1)},function(){S(),v(l,!1)})};S(),M.query=void 0;var E,D=function(e){E=n(function(){C(e)},f)},I=function(){E&&n.cancel(E)};p.$parsers.unshift(function(e){return u=!0,e&&e.length>=m?f>0?(I(),D(e)):C(e):(v(l,!1),I(),S()),g?e:e?void p.$setValidity("editable",!1):(p.$setValidity("editable",!0),e)}),p.$formatters.push(function(e){var t,a,n={};return b?(n.$model=e,b(l,n)):(n[k.itemName]=e,t=k.viewMapper(l,n),n[k.itemName]=void 0,a=k.viewMapper(l,n),t!==a?t:e)}),M.select=function(e){var t,a,i={};i[k.itemName]=a=M.matches[e].model,t=k.modelMapper(l,i),x(l,t),p.$setValidity("editable",!0),h(l,{$item:a,$model:t,$label:k.viewMapper(l,i)}),S(),n(function(){c[0].focus()},0,!1)},c.bind("keydown",function(e){0!==M.matches.length&&-1!==r.indexOf(e.which)&&(-1!=M.activeIdx||13!==e.which&&9!==e.which)&&(e.preventDefault(),40===e.which?(M.activeIdx=(M.activeIdx+1)%M.matches.length,M.$digest()):38===e.which?(M.activeIdx=(M.activeIdx>0?M.activeIdx:M.matches.length)-1,M.$digest()):13===e.which||9===e.which?M.$apply(function(){M.select(M.activeIdx)}):27===e.which&&(e.stopPropagation(),S(),M.$digest()))}),c.bind("blur",function(e){u=!1});var P=function(e){c[0]!==e.target&&(S(),M.$digest())};i.bind("click",P),l.$on("$destroy",function(){i.unbind("click",P),y&&O.remove()});var O=e(A)(M);y?i.find("body").append(O):c.after(O)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(e,t,a){e.templateUrl=a.templateUrl,e.isOpen=function(){return e.matches.length>0},e.isActive=function(t){return e.active==t},e.selectActive=function(t){e.active=t},e.selectMatch=function(t){e.select({activeIdx:t})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(e,t,a,n){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(i,s,o){var r=n(o.templateUrl)(i.$parent)||"template/typeahead/typeahead-match.html";e.get(r,{cache:t}).success(function(e){s.replaceWith(a(e.trim())(i))})}}}]).filter("typeaheadHighlight",function(){function e(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,a){return a?(""+t).replace(new RegExp(e(a),"gi"),"<strong>$&</strong>"):t}}),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(e,t,a){this.groups=[],this.closeOthers=function(n){var i=angular.isDefined(t.closeOthers)?e.$eval(t.closeOthers):a.closeOthers;i&&angular.forEach(this.groups,function(e){e!==n&&(e.isOpen=!1)})},this.addGroup=function(e){var t=this;this.groups.push(e),e.$on("$destroy",function(a){t.removeGroup(e)})},this.removeGroup=function(e){var t=this.groups.indexOf(e);-1!==t&&this.groups.splice(t,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(e){this.heading=e}},link:function(e,t,a,n){n.addGroup(e),e.$watch("isOpen",function(t){t&&n.closeOthers(e)}),e.toggleOpen=function(){e.isDisabled||(e.isOpen=!e.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(e,t,a,n,i){n.setHeading(i(e,function(){}))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(e,t,a,n){e.$watch(function(){return n[a.accordionTransclude]},function(e){e&&(t.html(""),t.append(e))})}}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(e){this.activeClass=e.activeClass||"active",this.toggleEvent=e.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(e,t,a,n){var i=n[0],s=n[1];s.$render=function(){t.toggleClass(i.activeClass,angular.equals(s.$modelValue,e.$eval(a.btnRadio)))},t.bind(i.toggleEvent,function(){var n=t.hasClass(i.activeClass);(!n||angular.isDefined(a.uncheckable))&&e.$apply(function(){s.$setViewValue(n?null:e.$eval(a.btnRadio)),s.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(e,t,a,n){function i(){return o(a.btnCheckboxTrue,!0)}function s(){return o(a.btnCheckboxFalse,!1)}function o(t,a){var n=e.$eval(t);return angular.isDefined(n)?n:a}var r=n[0],l=n[1];
l.$render=function(){t.toggleClass(r.activeClass,angular.equals(l.$modelValue,i()))},t.bind(r.toggleEvent,function(){e.$apply(function(){l.$setViewValue(t.hasClass(r.activeClass)?s():i()),l.$render()})})}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(e){var t=this,a=t.tabs=e.tabs=[];t.select=function(e){angular.forEach(a,function(t){t.active&&t!==e&&(t.active=!1,t.onDeselect())}),e.active=!0,e.onSelect()},t.addTab=function(e){a.push(e),1===a.length?e.active=!0:e.active&&t.select(e)},t.removeTab=function(e){var i=a.indexOf(e);if(e.active&&a.length>1&&!n){var s=i==a.length-1?i-1:i+1;t.select(a[s])}a.splice(i,1)};var n;e.$on("$destroy",function(){n=!0})}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(e,t,a){e.vertical=angular.isDefined(a.vertical)?e.$parent.$eval(a.vertical):!1,e.justified=angular.isDefined(a.justified)?e.$parent.$eval(a.justified):!1}}}).directive("tab",["$parse",function(e){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(t,a,n){return function(t,a,i,s){t.$watch("active",function(e){e&&s.select(t)}),t.disabled=!1,i.disabled&&t.$parent.$watch(e(i.disabled),function(e){t.disabled=!!e}),t.select=function(){t.disabled||(t.active=!0)},s.addTab(t),t.$on("$destroy",function(){s.removeTab(t)}),t.$transcludeFn=n}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(e,t,a,n){e.$watch("headingElement",function(e){e&&(t.html(""),t.append(e))})}}}]).directive("tabContentTransclude",function(){function e(e){return e.tagName&&(e.hasAttribute("tab-heading")||e.hasAttribute("data-tab-heading")||"tab-heading"===e.tagName.toLowerCase()||"data-tab-heading"===e.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(t,a,n){var i=t.$eval(n.tabContentTransclude);i.$transcludeFn(i.$parent,function(t){angular.forEach(t,function(t){e(t)?i.headingElement=t:a.append(t)})})}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var e=[];return{add:function(t,a){e.push({key:t,value:a})},get:function(t){for(var a=0;a<e.length;a++)if(t==e[a].key)return e[a]},keys:function(){for(var t=[],a=0;a<e.length;a++)t.push(e[a].key);return t},top:function(){return e[e.length-1]},remove:function(t){for(var a=-1,n=0;n<e.length;n++)if(t==e[n].key){a=n;break}return e.splice(a,1)[0]},removeTop:function(){return e.splice(e.length-1,1)[0]},length:function(){return e.length}}}}}).directive("modalBackdrop",["$timeout",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(t,a,n){t.backdropClass=n.backdropClass||"",t.animate=!1,e(function(){t.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(e,t){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(e,t){return t.templateUrl||"template/modal/window.html"},link:function(a,n,i){n.addClass(i.windowClass||""),a.size=i.size,t(function(){a.animate=!0,n[0].querySelectorAll("[autofocus]").length||n[0].focus()}),a.close=function(t){var a=e.getTop();a&&a.value.backdrop&&"static"!=a.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(a.key,"backdrop click"))}}}}]).directive("modalTransclude",function(){return{link:function(e,t,a,n,i){i(e.$parent,function(e){t.empty(),t.append(e)})}}}).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(e,t,a,n,i,s){function o(){for(var e=-1,t=m.keys(),a=0;a<t.length;a++)m.get(t[a]).value.backdrop&&(e=a);return e}function r(e){var t=a.find("body").eq(0),n=m.get(e).value;m.remove(e),c(n.modalDomEl,n.modalScope,300,function(){n.modalScope.$destroy(),t.toggleClass(u,m.length()>0),l()})}function l(){if(d&&-1==o()){var e=p;c(d,p,150,function(){e.$destroy(),e=null}),d=void 0,p=void 0}}function c(a,n,i,s){function o(){o.done||(o.done=!0,a.remove(),s&&s())}n.animate=!1;var r=e.transitionEndEventName;if(r){var l=t(o,i);a.bind(r,function(){t.cancel(l),o(),n.$apply()})}else t(o)}var d,p,u="modal-open",m=s.createNew(),f={};return i.$watch(o,function(e){p&&(p.index=e)}),a.bind("keydown",function(e){var t;27===e.which&&(t=m.top(),t&&t.value.keyboard&&(e.preventDefault(),i.$apply(function(){f.dismiss(t.key,"escape key press")})))}),f.open=function(e,t){m.add(e,{deferred:t.deferred,modalScope:t.scope,backdrop:t.backdrop,keyboard:t.keyboard});var s=a.find("body").eq(0),r=o();if(r>=0&&!d){p=i.$new(!0),p.index=r;var l=angular.element("<div modal-backdrop></div>");l.attr("backdrop-class",t.backdropClass),d=n(l)(p),s.append(d)}var c=angular.element("<div modal-window></div>");c.attr({"template-url":t.windowTemplateUrl,"window-class":t.windowClass,size:t.size,index:m.length()-1,animate:"animate"}).html(t.content);var f=n(c)(t.scope);m.top().value.modalDomEl=f,s.append(f),s.addClass(u)},f.close=function(e,t){var a=m.get(e);a&&(a.value.deferred.resolve(t),r(e))},f.dismiss=function(e,t){var a=m.get(e);a&&(a.value.deferred.reject(t),r(e))},f.dismissAll=function(e){for(var t=this.getTop();t;)this.dismiss(t.key,e),t=this.getTop()},f.getTop=function(){return m.top()},f}]).provider("$modal",function(){var e={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(t,a,n,i,s,o,r){function l(e){return e.template?n.when(e.template):i.get(angular.isFunction(e.templateUrl)?e.templateUrl():e.templateUrl,{cache:s}).then(function(e){return e.data})}function c(e){var a=[];return angular.forEach(e,function(e){(angular.isFunction(e)||angular.isArray(e))&&a.push(n.when(t.invoke(e)))}),a}var d={};return d.open=function(t){var i=n.defer(),s=n.defer(),d={result:i.promise,opened:s.promise,close:function(e){r.close(d,e)},dismiss:function(e){r.dismiss(d,e)}};if(t=angular.extend({},e.options,t),t.resolve=t.resolve||{},!t.template&&!t.templateUrl)throw new Error("One of template or templateUrl options is required.");var p=n.all([l(t)].concat(c(t.resolve)));return p.then(function(e){var n=(t.scope||a).$new();n.$close=d.close,n.$dismiss=d.dismiss;var s,l={},c=1;t.controller&&(l.$scope=n,l.$modalInstance=d,angular.forEach(t.resolve,function(t,a){l[a]=e[c++]}),s=o(t.controller,l),t.controllerAs&&(n[t.controllerAs]=s)),r.open(d,{scope:n,deferred:i,content:e[0],backdrop:t.backdrop,keyboard:t.keyboard,backdropClass:t.backdropClass,windowClass:t.windowClass,windowTemplateUrl:t.windowTemplateUrl,size:t.size})},function(e){i.reject(e)}),p.then(function(){s.resolve(!0)},function(){s.reject(!1)}),d},d}]};return e}),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(e){e.put("template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissable\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(e){e.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="icon icon-chevron-left"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="icon icon-chevron-right"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(e){e.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item text-center\" ng-transclude></div>\n")}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="icon icon-chevron-left"></i></button></th>\n      <th colspan="{{5 + showWeeks}}"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="icon icon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-show="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in labels track by $index" class="text-center"><small aria-label="{{label.full}}">{{label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-show="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="icon icon-chevron-left"></i></button></th>\n      <th><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="icon icon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)">\n	<li ng-transclude></li>\n	<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group pull-left">\n			<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'current\') }}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n	</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="icon icon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="icon icon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(e){e.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(e){e.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1)">{{getText(\'first\')}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n  <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages)">{{getText(\'last\')}}</a></li>\n</ul>')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n</div>')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(e){e.put("template/timepicker/timepicker.html",'<table>\n	<tbody>\n		<tr class="text-center">\n			<td><a ng-click="incrementHours()" class="btn btn-link"><span class="icon icon-chevron-up"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="icon icon-chevron-up"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n		<tr>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n				<input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td>:</td>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n				<input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n		</tr>\n		<tr class="text-center">\n			<td><a ng-click="decrementHours()" class="btn btn-link"><span class="icon icon-chevron-down"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="icon icon-chevron-down"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n	</tbody>\n</table>\n')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(e){e.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="icon" ng-class="$index < value && (r.stateOn || \'icon-star\') || (r.stateOff || \'icon-star-empty\')">\n        <span class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    </i>\n</span>')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(e){e.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a href class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse" collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(e){e.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a href ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(e){e.put("template/modal/backdrop.html",'<div class="modal-backdrop fade {{ backdropClass }}"\n     ng-class="{in: animate}"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(e){e.put("template/modal/window.html",'<div tabindex="-1" role="dialog" class="modal fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="{\'modal-sm\': size == \'sm\', \'modal-lg\': size == \'lg\'}"><div class="modal-content" modal-transclude></div></div>\n</div>')}]),function(){angular.module("app",["ui.bootstrap","ui.router","ngAnimate","ngAria","ngMask","ngSanitize","mgcrea.ngStrap.collapse","mgcrea.ngStrap.datepicker","mgcrea.ngStrap.popover","mgcrea.ngStrap.tooltip","mgcrea.ngStrap.select","mgcrea.ngStrap.helpers.dimensions","angular-loading-bar","angularFileUpload","angularMoment","AngularPrint","duScroll","infinite-scroll","schemaForm","uiGmapgoogle-maps","app.account","app.admin","app.application","app.applications","app.core","app.dashboard","app.external","app.help","app.settings","app.widgets"])}(),function(){angular.module("app.admin",["app.branding","app.modules","app.operations","app.security","app.types","app.typeStatuses","app.users"])}(),function(){angular.module("app.modules",[])}(),function(){angular.module("app.operations",[])}(),function(){angular.module("app.users",[])}(),function(){angular.module("app.application",["app.files","app.form","app.messages","app.review","app.status","app.utility"])}(),function(){angular.module("app.files",[]).filter("fileMimeTypeFilter",function(){return function(e){return e.indexOf("image")>-1?"image":e.indexOf("spreadsheet")>-1?"excel":e.indexOf("presentation")>-1?"powerpoint":e.indexOf("word")>-1?"word":e.indexOf("visio")>-1?"visio":e.indexOf("pdf")>-1?"pdf":(e.indexOf("text")>-1,"text")}})}(),function(){angular.module("app.form.edit",["app.scrollspy","jsUtils"])}(),function(){angular.module("app.form",["app.form.edit"])}(),function(){angular.module("app.messages",["app.widgets","app.serviceManager"])}(),function(){angular.module("app.review",[])}(),function(){angular.module("app.status",[])}(),function(){angular.module("app.utility",[])}(),function(){angular.module("app.applications",["app.list"])}(),function(){angular.module("app.list",[])}(),function(){angular.module("app.account",["app.serviceManager"])}(),function(){angular.module("app.core",["app.account","app.layout","app.localStorage","app.serviceManager"])}(),function(){angular.module("app.layout",["app.notifications"])}(),function(){angular.module("app.notifications",[])}(),function(){angular.module("app.localStorage",[])}(),function(){angular.module("app.serviceManager",["app.widgets"])}(),function(){angular.module("app.dashboard",["chart.js","app.maps","app.dateRangeSelect"])}(),function(){angular.module("app.maps",["uiGmapgoogle-maps"])}(),function(){window.config&&window.config.ShowLandingPage?angular.module("app.external",["app.landing","app.registration","app.login","app.forgotPassword","app.resetPassword"]):angular.module("app.external",["app.registration","app.login","app.forgotPassword","app.resetPassword"])}(),function(){angular.module("app.landing",[]).config(["$stateProvider",function(e){e.state("landing",{url:"/home",templateUrl:"app/external/landing/landing.html",controller:"Landing",controllerAs:"vm",title:"Home",external:!0})}])}(),function(){angular.module("app.login",[])}(),function(){angular.module("app.forgotPassword",[])}(),function(){angular.module("app.resetPassword",[])}(),function(){angular.module("app.registration",[])}(),function(){angular.module("app.help",[])}(),function(){angular.module("app.settings",[])}(),function(){angular.module("app.fileUpload",[])}(),function(){angular.module("app.scrollspy",[])}(),function(){angular.module("app.widgets",["app.aside","app.dateRangeSelect","app.fileUpload","app.jsonToCsvConvert","app.pageTitle","app.scrollspy","app.loadingIndicator","app.stateLoader","app.includeReplace"])}(),function(){function e(e,t,a){function n(){i().then(function(t){return t?void s():void e.go("applications.list")})}function i(){return t.GetAccount().then(function(e){return a.contains(a.pluck(e.roles,"id"),"SuperAdmin")||a.contains(a.pluck(e.roles,"id"),"Admin")})}function s(){o.subViews=[{icon:"",name:"Branding",state:"admin.branding"},{icon:"",name:"Operations",state:"admin.operations"},{icon:"",name:"Modules",state:"admin.modules"},{icon:"",name:"Security",state:"admin.security"},{icon:"",name:"Users",state:"admin.users"}]}var o=this;n()}angular.module("app.admin").controller("Admin",e),e.$inject=["$state","AccountManager","_"]}(),function(){function e(e,t,a,n,i,s,o){function r(){m()}function l(a){f.link=angular.copy(a)||{},f.isNewLink=a?!1:!0,f.linkModal=t.open({templateUrl:"app/admin/branding/link.edit.modal.html",parent:angular.element(document.body),scope:e,preserveScope:!0,controller:["$scope",function(e){}]})}function c(e){n.AddLink({Link:e}).then(function(){o.success("Link created successfully!"),m(),f.linkModal.dismiss("cancel"),f.link={}})}function d(e){n.UpdateLink({Link:e}).then(function(){o.success("Link updated successfully!"),m(),f.linkModal.dismiss("cancel"),f.link={}})}function p(a){f.link=a,f.deleteLinkModal=t.open({templateUrl:"app/admin/branding/link.delete.modal.html",parent:angular.element(document.body),scope:e,preserveScope:!0,controller:["$scope",function(e){}]})}function u(){n.DeleteLink(f.link.linkId).then(function(){o.success("Link deleted successfully!"),m(),f.deleteLinkModal.dismiss("cancel"),f.link={}})}function m(){n.GetLinks().then(function(e){f.tenantLinks=e})}var f=this;f.openLinkModal=l,f.addLink=c,f.updateLink=d,f.openDeleteLinkModal=p,f.deleteLink=u,f.tenantLinks={},f.link={},f.uploader=new i,f.uploaderExternal=new i,f.logoUrl=s.UtilityLogoUrl,f.externalLogoUrl=s.UtilityExternalLogoUrl,f.activePanels=[0,1,2],r(),f.uploader.onAfterAddingFile=function(e){a.UploadFile(e,"/api/tenant/logo")},f.uploaderExternal.onAfterAddingFile=function(e){a.UploadFile(e,"/api/tenant/external-logo")}}angular.module("app.branding",[]).controller("Branding",e),e.$inject=["$scope","$modal","FileUploadManager","BrandingManager","FileUploader","UiValues","toastr"]}(),function(){function e(e){function t(){var t="/api/tenant/links";return e.Get(t).then(function(e){return e.data.data})}function a(t){var a="/api/tenant/link";return e.Post(a,t)}function n(t){var a="/api/tenant/link/"+t.Link.linkId;return e.Put(a,t)}function i(t){var a="/api/tenant/link/"+t;return e.Delete(a)}return{GetLinks:t,AddLink:a,UpdateLink:n,DeleteLink:i}}angular.module("app.operations").service("BrandingManager",e),e.$inject=["ServiceManager"]}(),function(){function e(e,t,a,n){function i(){o()}function s(e,t){var n={module:e.module,isActive:t};a.UpdateModule(n).then(function(e){o(),r()})}function o(){a.GetModules().then(function(e){l.activeModules=n.where(e.data,{isActive:!0}),l.hiddenModules=n.where(e.data,{isActive:!1})})}function r(){t.ClearHiddenModules(),t.GetHiddenModules()}var l=this;l.changeModuleStatus=s,i()}angular.module("app.modules").controller("Modules",e),e.$inject=["$scope","AccountManager","ModulesManager","_"]}(),function(){function e(e){function t(){var t="/api/tenant/modules";return e.Get(t).then(function(e){return e.data})}function a(t){var a="/api/tenant/module";return e.Put(a,t)}return{GetModules:t,UpdateModule:a}}angular.module("app.modules").factory("ModulesManager",e),e.$inject=["ServiceManager"]}(),function(){function e(e,t,a,n){function i(){s(),u(),y()}function s(){a.GetUDFs().then(function(e){C.udfs=e})}function o(a){C.udf=a,C.udf.newValue=angular.copy(a),C.updateModal=t.open({templateUrl:"app/admin/operations/udf.update.modal.html",parent:angular.element(document.body),scope:e,preserveScope:!0,controller:["$scope",function(e){}]})}function r(){var e={id:C.udf.id,name:C.udf.newValue.name,isShownInQueue:C.udf.newValue.isShownInQueue,isVisibleExternally:C.udf.newValue.isVisibleExternally};a.UpdateUDF(e).then(function(){n.success("UDF Updated!"),s(),C.updateModal.dismiss("cancel")})}function l(){C.udf.id=null,C.udf.name=null,C.udf.isShownInQueue=!1,C.udf.isVisibleExternally=!1,C.addModal=t.open({templateUrl:"app/admin/operations/udf.add.modal.html",parent:angular.element(document.body),scope:e,preserveScope:!0,controller:["$scope",function(e){}]})}function c(){var e={id:C.udf.id,name:C.udf.name,isShownInQueue:C.udf.isShownInQueue,isVisibleExternally:C.udf.isVisibleExternally};return null==C.udf.name||null==C.udf.id?void n.error("Please fill out all fields"):void a.AddUDF(e).then(function(){n.success("UDF Added!"),s(),C.addModal.dismiss("cancel")})}function d(a){C.udf=a,C.deleteModal=t.open({templateUrl:"app/admin/operations/udf.delete.modal.html",parent:angular.element(document.body),scope:e,preserveScope:!0,controller:["$scope",function(e){}]})}function p(){a.DeleteUDF(C.udf.id).then(function(){n.success("UDF Deleted!"),s(),C.deleteModal.dismiss("cancel")})}function u(){a.GetHolidays(C.currentHolidayYear).then(function(e){C.holidays=e})}function m(){C.holidays.push(C.holidayToAdd),g(!0)}function f(){var e=C.holidays.indexOf(C.holidayToDelete);C.holidays.splice(e,1),g(!1)}function g(e){var t={Holidays:C.holidays};a.UpdateHolidays(C.currentHolidayYear,t).then(function(){var t=e?C.currentHolidayYear+" holiday added!":C.currentHolidayYear+" holiday removed!";n.success(t),u(),C.addHolidayModal.dismiss("cancel")})}function v(){return"'"+C.currentHolidayYear+"-01-01'"}function h(){return"'"+C.currentHolidayYear+"-12-31'"}function b(){var e="'"+C.currentHolidayYear+"-",t=(new Date).getDate(),a=(new Date).getMonth()+1;return 10>a&&(e+="0"),e+=a+"-",10>t&&(e+="0"),e+=t+"'"}function y(){a.GetTenantStates().then(function(e){C.tenantStates=e;for(var t=0;t<e.length;t++)if(e[t].isDefault){C.defaultState=e[t];break}})}function w(){a.CreateTenantStates(C.tenantStates).then(function(){n.success("Operating states updated!"),y()})}function x(){C.holidayToAdd=b(),C.addHolidayModal=t.open({templateUrl:"app/admin/operations/holiday.add.modal.html",parent:angular.element(document.body),scope:e,preserveScope:!0,controller:["$scope",function(e){}]
})}function k(a){C.holidayToDelete=a,C.addHolidayModal=t.open({templateUrl:"app/admin/operations/holiday.delete.modal.html",parent:angular.element(document.body),scope:e,preserveScope:!0,controller:["$scope",function(e){}]})}function M(){C.tenantStates.unshift({stateName:C.stateToAdd,isDefault:!1}),C.saveState()}function $(e){for(var t=0;t<C.tenantStates.length&&C.tenantStates[t].stateName!=e.stateName;t++);C.tenantStates.splice(t,1),C.saveState()}function A(e){a.MakeDefaultState(e).then(function(){C.defaultState=e.stateName,C.getTenantStates()})}function S(){a.CreateTenantStates(C.tenantStates).then(function(){C.showStateAddForm=!1,C.getTenantStates()})}function T(e){for(var t=0;t<C.tenantStates.length;t++)if(C.tenantStates[t].stateName===e)return!1;return!0}var C=this;C.udfs={},C.udf={},C.holidays=null,C.holidayToAdd="",C.holidayToDelete="",C.tenantStates=[],C.defaultState="",C.stateToAdd="",C.showStateAddForm=!1,C.stateNotAlreadyAdded=T,C.currentHolidayYear=(new Date).getFullYear(),C.getUDFs=s,C.openUdfUpdateModal=o,C.updateUDF=r,C.openUdfAddModal=l,C.addUDF=c,C.openUdfDeleteModal=d,C.deleteUDF=p,C.getTenantStates=y,C.createTenantStates=w,C.getHolidays=u,C.addHoliday=m,C.deleteHoliday=f,C.openHolidayAddModal=x,C.openHolidayDeleteModal=k,C.getMinDate=v,C.getMaxDate=h,C.createState=M,C.makeDefaultState=A,C.deleteState=$,C.saveState=S,C.validStates=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","District of Columbia","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],i()}angular.module("app.operations").controller("Operations",e),e.$inject=["$scope","$modal","OperationManager","toastr"]}(),function(){function e(e){function t(){var t="/api/applications/udfs";return e.Get(t).then(function(e){return e.data.data})}function a(t){var a="/api/applications/udfs/"+t.id;return e.Put(a,t)}function n(t){var a="/api/applications/udfs";return e.Post(a,t)}function i(t){var a="/api/applications/udfs/"+t;return e.Delete(a,t)}function s(t){var a="/api/holidays/"+t;return e.Get(a).then(function(e){return e.data.data})}function o(t,a){var n="/api/holidays/"+t;return e.Put(n,a)}function r(){var t="/api/tenant/states";return e.Get(t).then(function(e){return e.data.data})}function l(t){for(var a="/api/tenant/states",n={States:[],DefaultState:""},i=0;i<t.length;i++)n.States.push(t[i].stateName),t[i].isDefault&&(n.DefaultState=t[i].stateName);return e.Post(a,n)}function c(t){var a="/api/tenant/states/default/"+t.stateName;return e.Put(a)}function d(){var t="/api/tenant/security";return e.Get(t).then(function(e){return e.data.data})}function p(t){var a="/api/tenant/security";return e.Put(a,t)}return{GetUDFs:t,UpdateUDF:a,AddUDF:n,DeleteUDF:i,GetHolidays:s,UpdateHolidays:o,GetTenantStates:r,CreateTenantStates:l,GetSecuritySettings:d,UpdateSecuritySettings:p,MakeDefaultState:c}}angular.module("app.operations").service("OperationManager",e),e.$inject=["ServiceManager"]}(),function(){function e(e){function t(){n()}function a(){e.UpdateSecuritySettings(i.securitySettings).then(function(){toastr.success("Security settings updated!"),i.editSecuritySettings=!1,n()})}function n(){e.GetSecuritySettings().then(function(e){i.securitySettings=e,i.securityKeys=Object.keys(i.securitySettings)})}var i=this;i.updateSecuritySettings=a,t()}angular.module("app.security",[]).controller("Security",e),e.$inject=["OperationManager"]}(),function(){function e(){}angular.module("app.types",[]).controller("Types",e),e.$inject=[]}(),function(){function e(){}angular.module("app.typeStatuses",[]).controller("TypeStatuses",e),e.$inject=[]}(),function(){function e(e,t,a,n,i){function s(){l.externalOrInternalUser="externalUser",l.internalRoles=e.$parent.vm.internalRoles,l.externalRoles=e.$parent.vm.externalRoles,l.SPOCRoles=e.$parent.vm.SPOCRoles,l.internalRoleSelection={},l.externalRoleSelection=""}function o(){if(null==l.newFirstName||null==l.newLastName||null==l.newEmail)return void n.error("Please fill out all fields");var t={email:l.newEmail,firstName:l.newFirstName,lastName:l.newLastName};if("externalUser"==l.externalOrInternalUser){if(null==l.externalRoleSelection)return void n.error("Please fill out all fields");t.role=l.externalRoleSelection,a.RegisterNewExternalUser(t).then(function(){n.success("User Created!"),e.$parent.vm.userCreated()})}else{var i=[];for(item in l.internalRoleSelection)l.internalRoleSelection[item]&&i.push(item);if(0==i.length||null==l.newTitle)return void n.error("please fill out all fields");if(t.roles=i,t.title=l.newTitle,r()){if(null==l.acceptingNewApps)return void n.error("Please fill out all fields");t.SPOCIsAcceptingNewApplications="yes"==l.acceptingNewApps?!0:!1}a.RegisterNewInternalUser(t).then(function(){n.success("User created!"),e.$parent.vm.userCreated()})}}function r(){for(item in l.internalRoleSelection)if(l.internalRoleSelection[item]&&i.contains(l.SPOCRoles,item))return!0;return!1}var l=this;l.createUser=o,l.showAcceptingNewApps=r,s()}angular.module("app.users").controller("NewUser",e),e.$inject=["$scope","AccountManager","UsersManager","toastr","_"]}(),function(){function e(e,t,a){function n(){l.user=e.$parent.vm.userToManage,l.externalOrInternal=l.user.isExternal?"external":"internal",l.internalRoles=e.$parent.vm.internalRoles,l.externalRoles=e.$parent.vm.externalRoles,o(),r()}function i(e){if(l.adminUser.email==l.user.email){var t=a.contains(a.pluck(l.adminUser.roles,"id"),"SuperAdmin");return t&&"SuperAdmin"==e.id?!0:t||"Admin"!=e.id?!1:!0}return!1}function s(){var t=[];if("external"==l.externalOrInternal)t.push(l.externalRoleSelection),e.$parent.vm.updateRoles(l.user.id,t);else{for(item in l.internalRoleSelection)l.internalRoleSelection[item]&&t.push(item);e.$parent.vm.updateRoles(l.user.id,t)}}function o(){if("external"==l.externalOrInternal)l.externalRoleSelection=l.user.roles[0].id;else{l.internalRoleSelection={};for(var e in l.user.roles){var t=l.user.roles[e];l.internalRoleSelection[t.id]=!0}}}function r(){t.GetAccount().then(function(e){l.adminUser=e})}var l=this;l.disableAdminSelect=i,l.updateRoles=s,n()}angular.module("app.users").controller("ChangeRoles",e),e.$inject=["$scope","AccountManager","_"]}(),function(){function e(e,t,a,n){function i(){f(),g()}function s(e){var t={userIsDeactivated:!0};a.UpdateOtherUserSettings(t,e.id).then(function(){n.success("Account Deactivated"),f()})}function o(e){var t={userIsDeactivated:!1};a.UpdateOtherUserSettings(t,e.id).then(function(){n.success("Account Reactivated"),f()})}function r(e){a.ResendConfirmationToUser(e.id).then(function(){n.success("Confirmation Email Resent")})}function l(){v.newUserModal=t.open({templateUrl:"app/admin/users/users.add.modal.html",scope:e})}function c(){v.newUserModal.dismiss("cancel"),f()}function d(a){v.userToManage=a,v.manageRolesModal=t.open({templateUrl:"app/admin/users/users.edit.roles.modal.html",scope:e})}function p(e,t){var i={roles:t};a.UpdateOtherUserSettings(i,e).then(function(){n.success("Roles Updated"),f(),v.manageRolesModal.dismiss("cancel")})}function u(e){return _.some(e.roles,function(e){return _.contains(v.SPOCRoles,e.id)})?!0:!1}function m(e,t){var i={spocIsAcceptingNewApplications:t};a.UpdateOtherUserSettings(i,e.id).then(function(){n.success("Settings Changed"),f()})}function f(){a.GetAllAccounts().then(function(e){v.users=e})}function g(){a.GetPublicRoles().then(function(e){v.externalRoles=e.data}),a.GetInternalRoles().then(function(e){v.internalRoles=e.data}),a.GetSPOCRoles().then(function(e){v.SPOCRoles=e.data})}var v=this;v.deactivateUser=s,v.reactivateUser=o,v.resendEmail=r,v.userCreated=c,v.addUser=l,v.manageRoles=d,v.updateRoles=p,v.userIsSpoc=u,v.setSpocReceivingApplications=m,i()}angular.module("app.users").controller("Users",e),e.$inject=["$scope","$modal","AccountManager","toastr"]}(),function(){function e(e){function t(t){var a="/api/account/internal";return e.Post(a,t)}function a(t){var a="/api/account/external";return e.Post(a,t)}return{RegisterNewInternalUser:t,RegisterNewExternalUser:a}}angular.module("app.users").factory("UsersManager",e),e.$inject=["ServiceManager"]}(),function(){angular.module("app").config(["cfpLoadingBarProvider",function(e){e.latencyThreshold=100}]).config(["$urlMatcherFactoryProvider",function(e){e.strictMode(!1)}]).config(["$urlRouterProvider",function(e){e.when("","/login"),e.rule(function(e,t){var a=t.path(),n=t.search();if("/"!==a[a.length-1]){if(n==={})return a+"/";var i=[];return angular.forEach(n,function(e,t){i.push(t+"="+e)}),a+"/?"+i.join("&")}}),e.otherwise("unknown")}]).config(["$httpProvider",function(e){e.interceptors.push("APIInterceptor")}]).config(["$popoverProvider",function(e){angular.extend(e.defaults,{html:!0})}]).config(["$anchorScrollProvider",function(e){e.disableAutoScrolling()}]).config(["uiGmapGoogleMapApiProvider",function(e){e.configure({key:window.config.MapApiKey,v:"3.17",libraries:"weather,geometry,visualization"});try{delete window.config}catch(t){window.config=void 0}}])}(),function(){function e(){this.api={url:"https://api.connectthegrid.com",xtenant:"comed",useLocalFormSchema:!1},this.states={hideNav:["application.edit","landing","registration","login","forgotPassword","resetPassword"],showLandingNav:["landing","registration","login","forgotPassword","resetPassword"],showLandingBanner:["landing"],showAside:["application.status","application.form","application.messages","application.files","application.utility","application.review"]},this.staticText={emptyQueue:"Welcome to the Online Interconnection and Net Metering homepage",noSearchResults:"No results found",successfulRegister:"Thanks for confirming your account!  Please login below.",newAccount:"Thanks for confirming your account!  Please set your password below.",landingVideoUrl:"https://www.youtube.com/embed/HS4n2ANif5Q"},this.appValues={itemsToFetchInQueue:25,notificationPollingTime:3e4,passwordExpirationDaysThreshold:5}}angular.module("app").service("Constants",e)}(),function(){angular.module("app").filter("decode",function(){return function(e){return decodeURIComponent(e)}}).filter("encode",function(){return function(e){return encodeURI(e)}}).filter("periodsToSpaces",function(){return function(e){return e?e.replace(/[\. ,:-]+/g," "):void 0}}).filter("safe",["$sce",function(e){return e.trustAsHtml}]).filter("camelCaseToSpaced",function(){return function(e){var t=e.replace(/([A-Z])/g," $1").toLowerCase();return t}}).filter("capitalizeFirstLetter",function(){return function(e){var t=e.charAt(0).toUpperCase()+e.substring(1);return t}}).filter("phoneNumber",function(){return function(e){if(e){var t=e.replace(/[^\d]/g,"");return t.length>10?t.replace(/(\d{3})(\d{3})(\d{4})(\d{1,})/,"($1) $2-$3 ext. $4"):t.replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2-$3")}}}).filter("lineBreaks",function(){return function(e){return e?e.replace(/\n/g,"<br />"):void 0}}).filter("trim",function(){return function(e){if(e){var t=e.replace(/(\s\s)/g," ");return t.replace(/(^\s+|\s+$|\n)/g,"")}}}).filter("toBreadcrumbs",function(){return function(e){if(e){var t=e.replace(/[\. ,:-]+/g," / ");return t.toString().toLowerCase().replace(/\b([a-z])/g,function(e){return e.toUpperCase()})}}})}(),function(){angular.module("app").run(["$rootScope","$state","AccountManager","AppValues","LocalStorageManager","UiValues",function(e,t,a,n,i,s){e.$on("$stateChangeStart",function(e,s,o,r,l){var c=this,d=i.Get(n.tokenKey);d?a.GetAccount().then(function(e){c.user=e}):(s.external||(e.preventDefault(),t.transitionTo("login")),c.user&&delete c.user)}),e.$on("$stateChangeSuccess",function(t,a,n,i,s){var o="ConnectTheGrid"+(a.title?" | "+a.title:"");e.stateName=a.title,e.title=o}),e.$on("$stateChangeError",function(e){t.go("unknown"),e.preventDefault()})}])}(),function(){angular.module("app").config(["$stateProvider",function(e){e.state("applications",{"abstract":!0,url:"/applications/",template:"<ui-view></ui-view>",controller:"Applications as appsVM"}).state("applications.list",{url:"?status&search&sort&skip&take/",templateUrl:"app/applications/list/list.html",controller:"List as vm",title:"Applications List"}).state("application",{"abstract":!0,url:"/applications/:applicationId/",templateUrl:"app/application/application.html",controller:"Application as appVM"}).state("application.edit",{url:"edit/",templateUrl:"app/application/form/edit/editor.html",controller:"Editor as vm",title:"Edit Application"}).state("application.status",{url:"status/",templateUrl:"app/application/status/status.html",controller:"Status as vm",title:"Status",data:{headingTemplate:"app/application/status/status.heading.html"}}).state("application.form",{url:"form/",templateUrl:"app/application/form/form.html",controller:"Form as vm",title:"Form",data:{headingTemplate:"app/application/form/form.heading.html"}}).state("application.messages",{url:"messages/",templateUrl:"app/application/messages/messages.html",controller:"Messages as vm",title:"Messages",data:{headingTemplate:"app/application/messages/messages.heading.html"}}).state("application.files",{url:"files/",templateUrl:"app/application/files/files.html",controller:"Files as vm",title:"Files",data:{headingTemplate:"app/application/files/files.heading.html"}}).state("application.utility",{url:"utility/",templateUrl:"app/application/utility/utility.html",controller:"Utility as vm",title:"Utility",data:{headingTemplate:"app/application/utility/utility.heading.html"}}).state("application.review",{url:"review/",templateUrl:"app/application/review/review.html",controller:"Review as vm",title:"Review",data:{headingTemplate:"app/application/review/review.heading.html"}}).state("dashboard",{"abstract":!0,url:"/dashboard/",templateUrl:"app/dashboard/dashboard.html",controller:"Dashboard as vm",title:"Dashboard"}).state("dashboard.charts",{url:"charts/",templateUrl:"app/dashboard/charts/charts.html",title:"Charts",data:{headingTemplate:"app/dashboard/charts/charts.heading.html"}}).state("dashboard.maps",{url:"maps/",templateUrl:"app/dashboard/maps/maps.html",controller:"Map as vm",title:"Maps",data:{headingTemplate:"app/dashboard/maps/maps.heading.html"}}).state("admin",{"abstract":!0,url:"/admin/",templateUrl:"app/admin/admin.html",controller:"Admin as vm",title:"Admin"}).state("admin.branding",{url:"branding/",templateUrl:"app/admin/branding/branding.html",controller:"Branding as vm",title:"Branding",data:{headingTemplate:"app/admin/branding/branding.heading.html"}}).state("admin.modules",{url:"modules/",templateUrl:"app/admin/modules/modules.html",controller:"Modules as vm",title:"Modules",data:{headingTemplate:"app/admin/modules/modules.heading.html"}}).state("admin.operations",{url:"operations/",templateUrl:"app/admin/operations/operations.html",controller:"Operations as vm",title:"Operations",data:{headingTemplate:"app/admin/operations/operations.heading.html"}}).state("admin.security",{url:"security/",templateUrl:"app/admin/security/security.html",controller:"Security as vm",title:"Security",data:{headingTemplate:"app/admin/security/security.heading.html"}}).state("admin.types",{url:"types/",templateUrl:"app/admin/types/types.html",controller:"Types as vm",title:"Types",data:{headingTemplate:"app/admin/types/types.heading.html"}}).state("admin.typeStatuses",{url:"typeStatuses/",templateUrl:"app/admin/typeStatuses/typeStatuses.html",controller:"TypeStatuses as vm",title:"Type Statuses",data:{headingTemplate:"app/admin/typeStatuses/typeStatuses.heading.html"}}).state("admin.users",{url:"users/",templateUrl:"app/admin/users/users.html",controller:"Users as vm",title:"Users",data:{headingTemplate:"app/admin/users/users.heading.html"}}).state("help",{url:"/help/",templateUrl:"app/help/help.html",controller:"Help as vm",title:"Help"}).state("registration",{url:"/registration",templateUrl:"app/external/registration/registration.html",controller:"Registration as vm",title:"Registration",external:!0}).state("login",{url:"/login?confirmed",templateUrl:"app/external/login/login.html",controller:"Login as vm",title:"Login",external:!0}).state("forgotPassword",{url:"/forgotPassword",templateUrl:"app/external/password/forgot/password.forgot.html",controller:"ForgotPassword as vm",title:"Forgot Password",external:!0}).state("resetPassword",{url:"/resetPassword?userId&code&newAccount",templateUrl:"app/external/password/reset/password.reset.html",controller:"ResetPassword as vm",title:"Reset Password",external:!0}).state("settings",{"abstract":!0,url:"/settings",templateUrl:"app/settings/settings.html",controller:"Settings as vm"}).state("settings.account",{url:"/account",templateUrl:"app/settings/account/account.html",title:"Account",data:{headingTemplate:"app/settings/account/account.heading.html"}}).state("settings.password",{url:"/password",templateUrl:"app/settings/password/password.html",title:"Password",data:{headingTemplate:"app/settings/password/password.heading.html"}}).state("settings.contact",{url:"/contact",templateUrl:"app/settings/contact/contact.html",title:"Contact",data:{headingTemplate:"app/settings/contact/contact.heading.html"}}).state("settings.preferences",{url:"/preferences",templateUrl:"app/settings/preferences/preferences.html",title:"Preferences",data:{headingTemplate:"app/settings/preferences/preferences.heading.html"}}).state("unknown",{url:"/unknown",templateUrl:"app/core/service-manager/unknown.html",title:"Page Not Found"})}])}(),function(){function e(){var e=_;return e}function t(){var e=toastr;try{delete window.toastr}catch(t){window.toastr=void 0}return e.options.timeOut=5e3,e.options.positionClass="toast-bottom-right",e}function a(){var e=window.config;return e}function n(){return document.URL.indexOf("localhost")>-1}angular.module("app").value("_",e()).value("toastr",t()).value("duScrollOffset",100).value("UiValues",a()).value("AppValues",{tokenKey:"tokenObject",isDev:n()})}(),function(){function e(e,t,a,n,i,s,o){}angular.module("app.application").controller("VerifyAddress",e),e.$inject=["$scope","$state","$interval","GeocodeManager","ListManager","_","toastr"]}(),function(){function e(e,t){function a(e){var a="/api/systems/geocode";return t.Post(a,e).then(function(e){return e.data.data})}function n(a){var n="/api/systems/suggestedaddresses";return keyAddressEncoded=e("encode")(a),t.Get(n,{keyAddress:keyAddressEncoded}).then(function(e){return e.data.data})}return{GeocodeAddress:a,PollRequest:n}}angular.module("app.application").factory("GeocodeManager",e),e.$inject=["$filter","ServiceManager"]}(),function(){function e(e,t,a,n,i,s,o,r,l,c,d,p,u){function m(){P.customerFullName="",P.location="",P.energySource={},P.energySourceList=[],P.appType="",P.appTypes=[],P.isNew=!1,P.showAppTypes=!1,P.addressOnTwoLines=u.AddressOnTwoLines,P.addressLineOnePlaceholder=P.addressOnTwoLines?"Address Line 1":"Address",A(),x(),k(),M(),console.log(u)}function f(){P.isNew&&(P.customerFullName="",P.location="",P.energySource={},P.appType="",o.GetApplicationTypes().then(function(e){P.appTypes=e.data}))}function g(){P.appTypes=P.location.availableTypes,P.customerFullName=P.location.customerFullName,o.GetAllEnergySources().then(function(e){P.energySourceList=e,P.energySource=d.findWhere(e,{id:P.location.energySourceId}),y()})}function v(){h()||p.error("Please enter a valid zip code!")}function h(){var e=/^[0-9]{5}(?:-[0-9]{4})?$/.test(P.newZip);return e}function b(e){P.appType=e,o.GetSchemaForType(P.appType).then(function(e){P.model={},P.schema=e.schema,P.form=e.form,P.isNew&&o.GetEnergySources(P.appType).then(function(e){P.energySourceList=e})})}function y(){o.GetTypesPerEnergySource(P.energySource.id).then(function(e){P.appTypes=e})}function w(){l.GetHiddenModules().then(function(a){var n=a.data,i=$();if(!i)return void p.error("All fields are required!");if(!h()&&P.isNew)return void v();var o={type:P.appType,customerFullName:P.customerFullName,addressLineOne:P.isNew?P.newStreet:P.location.addressLineOne,addressLineTwo:P.isNew?P.newStreet2:P.location.addressLineTwo,addressCity:P.isNew?P.newCity:P.location.addressCity,addressState:P.isNew?P.newState:P.location.addressState,addressZIP:P.isNew?P.newZip:P.location.addressZIP,energySourceId:P.energySource.id,schemaName:P.appType};P.addressData=o,d.contains(n,"geocode")?(r.setCurrentApplicationLocationInfo(o),s.StartNewApplication(o).then(function(a){e.$parent.vm.modalInstance.dismiss("cancel"),t.go("application.edit",{applicationId:a.data.id})})):S()})}function x(){P.newStates=u.States,P.newState=u.DefaultState}function k(){o.GetLocations().then(function(e){P.locations=e.data,P.locations.length<1&&(P.isNew=!0,f()),d.each(P.locations,function(e){e.label="<i class='icon-"+e.energySourceId+"'></i> "+e.fullAddress})})}function M(){P.helpText=d.findWhere(u.Links,{Type:"help"})}function $(){return P.customerFullName&&P.energySource&&P.appType&&(P.location&&!P.isNew||P.newStreet&&P.newCity&&P.newState&&P.newZip&&P.isNew)}function A(){l.GetAccount().then(function(e){var t=d.filter(e.roles,function(e){return"Customer"===e.id?e:void 0}).length>0;t&&(P.customerFullName=e.firstName+" "+e.lastName)},function(e){p.error(e)})}function S(){E(),P.geocodeModal=a.open({templateUrl:"app/application/address/address.verify.html",scope:e})}function T(e){var a=u.AddressOnTwoLines;null==e?s.StartNewApplication(P.addressData).then(function(e){P.modalInstance.dismiss("cancel"),P.geocodeModal.dismiss("cancel"),t.go("application.edit",{applicationId:e.data.id})}):(a?(P.addressData.addressLineOne=e.AddressLineOne,P.addressData.addressLineTwo=e.AddressLineTwo):(P.addressData.addressLineOne=e.AddressLineTwo?e.AddressLineOne+" "+e.AddressLineTwo:e.AddressLineOne,console.log(P.addressData.addressLineOne),P.addressData.addressLineTwo=""),P.addressData.addressCity=e.AddressCity,P.addressData.addressState=e.AddressState,P.addressData.addressZip=e.AddressZip,P.addressData.latitude=e.Latitude,P.addressData.longitude=e.Longitude,s.StartNewApplication(P.addressData).then(function(e){P.modalInstance.dismiss("cancel"),P.geocodeModal.dismiss("cancel"),t.go("application.edit",{applicationId:e.data.id})}))}function C(){P.geocodeModal.dismiss("cancel")}function E(){P.doneLoading=!1,P.timedOut=!1,c.GeocodeAddress(P.addressData).then(function(e){P.keyAddress=e,P.geocodePoll=n(D,1e3,6),P.geocodePoll.then(function(){P.timedOut=!0,P.doneLoading=!0})})}function D(){c.PollRequest(P.keyAddress).then(function(e){null!=e?(P.formattedAddresses=JSON.parse(e),P.doneLoading=!0,n.cancel(P.geocodePoll)):console.log("Verified address data not ready")})}function T(){P.selectAddress(P.selection)}function I(e){P.selection=e}var P=this;P.appTypeSelected=b,P.energySourceSelected=y,P.locationSelected=g,P.startNewApplication=w,P.showErrorIfInvalidZip=v,P.locationTypeSelected=f,P.trueVar=!0,P.verifyAddresses=S,P.selectAddress=T,P.cancelGeocode=C,P.selectAddress=T,P.getVerifiedAddresses=E,P.setSelection=I,m()}angular.module("app.application").controller("NewApplication",e),e.$inject=["$scope","$state","$modal","$interval","ServiceManager","ListManager","ApplicationsManager","ApplicationsModel","AccountManager","GeocodeManager","_","toastr","UiValues"]}(),function(){function e(e,t,a,n,i,s,o,r,l,c){function d(){p(),x(),w(),k()}function p(){D.subViews=[{icon:"icon-status",name:"Status",state:"application.status"},{icon:"icon-application",name:"Form",state:"application.form"},{icon:"icon-messages",name:"Messages",state:"application.messages",wholeHeadingTemplate:"app/application/messages/messages.heading.html"},{icon:"icon-files",name:"Files",state:"application.files"},{icon:"icon-utility",name:"Utility",state:"application.utility"},{icon:"icon-review",name:"Technical Review",state:"application.review",internalOnly:!0}]}function u(){D.deleteModal=e.open({templateUrl:"app/application/application.delete.modal.html",scope:t,size:"md",backdrop:!0})}function m(){s.DeleteApplication().then(function(){D.deleteModal.dismiss("cancel"),l.success("This application has been deleted!"),a.go("applications.list")})}function f(){C(),$(),T(),D.statusModal=e.open({templateUrl:"app/application/status/status.change.modal.html",scope:t,size:"md",backdrop:!0})}function g(e,a,n){var i={statusId:e.statusId,body:a?a:"",user:n?n:null};D.statusDetail.fileTypes&&(i.fileNames=[],angular.forEach(D.statusDetail.fileTypes,function(e){e.fileSelected?i.fileNames.push(e.fileSelected):e.fileUploaded?i.fileNames.push(e.fileUploaded):console.log("No file uploaded or selected for fileType "+e.name)})),r.ChangeApplicationStatus(i).then(function(){t.$broadcast("appStatusUpdated"),D.statusModal.dismiss("cancel"),D.currentApplication.statusName=e.statusName,M(),l.success("This application has been updated!")})}function v(){C(),T(),D.newOwner="",D.ownerModal=e.open({templateUrl:"app/application/owner/owner.change.modal.html",scope:t,size:"md",backdrop:!0})}function h(e){r.ChangeApplicationOwner(e.email).then(function(){D.currentApplication.owner=e,D.ownerModal.dismiss("cancel"),C(),l.success("This application has been assigned to "+e.firstName+" "+e.lastName+"!")})}function b(e){e&&(fileType.fileSelected=e.fileName)}function y(){return D.userIsAdmin||D.userIsExternal&&null==D.currentApplication.statusMilestoneOrder?!0:!1}function w(){s.GetCurrentApplication().then(function(e){D.currentApplication=e,D.currentApplication.ownerPlaceholder=D.currentApplication.owner?D.currentApplication.owner.fullName:"N/A",D.appType=D.currentApplication.typeName+" Application",D.appLocation=D.currentApplication.system.addressLineOne+" ",D.appLocation+=D.currentApplication.system.addressLineTwo?D.currentApplication.system.addressLineTwo+" ":"",D.appLocation+=D.currentApplication.system.addressCity+", ",D.appLocation+=D.currentApplication.system.addressState+" ",D.appLocation+=D.currentApplication.system.addressZIP,D.currentApplication.contractor&&D.currentApplication.contractor.fullName!==D.currentApplication.customerFullName?D.currentApplication.recipientFullName=D.currentApplication.contractor.fullName+" (on behalf of "+D.currentApplication.customerFullName+")":D.currentApplication.recipientFullName=D.currentApplication.customerFullName,E()})}function x(){n.GetAccount().then(function(e){D.userIsExternal=e.isExternal,D.userIsInterconnection=c.contains(c.pluck(e.roles,"id"),"InterconnectionSPOC"),D.userIsAdmin=c.contains(c.pluck(e.roles,"id"),"Admin")||c.contains(c.pluck(e.roles,"id"),"SuperAdmin")})}function k(){t.$on("appStatusUpdated",M)}function M(){s.ForceGetCurrentApplication().then(function(e){D.currentApplication=e})}function $(){s.GetStatusesForType(D.currentApplication.typeId).then(function(e){D.statuses=c.reject(e.data,function(e){return e.statusId==D.currentApplication.statusId})})}function A(e){r.GetTemplateForAppStatusChange(D.currentApplication.id,e.statusId).then(function(e){D.statusDetail=e.data,D.statusDetail.fileTypes&&S()})}function S(){o.GetFiles().then(function(e){D.statusDetail.filesForStatus={},D.statusDetail.uploadOrSelectFile={},D.statusDetail.selectedFile={},D.statusDetail.uploadedFile={};for(var t in D.statusDetail.fileTypes){var a=D.statusDetail.fileTypes[t].id;D.statusDetail.filesForStatus[a]=c.where(e.data,{fileTypeId:a})}})}function T(){r.GetInternalUsers().then(function(e){D.currentApplication.owner?D.internalUsers=c.reject(e.data,function(e){return e.email==D.currentApplication.owner.email}):D.internalUsers=e.data})}function C(){D.newStatus=null,D.statusDetail=null,D.postBody=null,D.newOwner=null}function E(){s.GetUDFs().then(function(e){var t=c.extend(e,D.currentApplication.applicationUDFDetails);D.UDFs=c.uniq(t,function(e,t,a){return e.id})})}var D=this;D.title="",D.currentApplication={},D.statusDetail=null,D.statuses=[],D.vpHeadingTemplate="app/application/application.heading.html",D.confirmApplicationDelete=u,D.deleteApplication=m,D.openStatusChangeModal=f,D.changeApplicationStatus=g,D.getTemplateForAppStatusChange=A,D.openOwnerChangeModal=v,D.changeApplicationOwner=h,D.fileSelectChanged=b,D.canEditFiles=y,d()}angular.module("app.application").controller("Application",e),e.$inject=["$modal","$scope","$state","AccountManager","StatusManager","ApplicationsManager","FilesManager","ApplicationManager","toastr","_"]}(),function(){function e(e,t,a,n,i,s,o,r){function l(e,t){var a="/api/applications/"+e+"/statuses/"+t;return n.Get(a).then(function(e){return e.data})}function c(e){var t={NewStatus:e.statusId,PostBody:e.body};e.fileNames.length>0&&(t.fileNames=e.fileNames),e.user&&d(e.user.email);var a="/api/applications/"+i.GetCurrentApplicationId()+"/status";return n.Put(a,t).then(function(e){return e.data})}function d(e){var t={NewOwnerUsername:e},a="/api/applications/"+i.GetCurrentApplicationId()+"/owner";return n.Put(a,t).then(function(e){return e.data})}function p(){var e="/api/account/internal";return n.Get(e).then(function(e){return e.data})}return{GetTemplateForAppStatusChange:l,ChangeApplicationStatus:c,ChangeApplicationOwner:d,GetInternalUsers:p}}angular.module("app.application").service("ApplicationManager",e),e.$inject=["$state","$q","$http","ServiceManager","ApplicationsManager","AppValues","_","toastr"]}(),function(){function e(){function e(e){window.open(e,"_blank","")}return{restrict:"A",link:function(t,a){t.$on("downloadFile",function(t,a){e(a.url)})}}}angular.module("app.files").directive("fileDownloader",e),e.$inject=[]}(),function(){function e(e,t,a,n,i,s,o,r,l,c){function d(){x(),M(),k(),$()}function p(e){var a=s.GetFileUrl(e);t.$broadcast("downloadFile",{url:a})}function u(e){s.EditFile(e).then(function(t){e.edit=!1,k()})}function m(e){A.currentFile=e,A.fileDeleteModal=n.open({templateUrl:"app/application/files/files.delete.modal.html",scope:t,size:"sm",backdrop:!0})}function f(e){s.DeleteFile(e).then(function(a){A.fileDeleteModal.dismiss("cancel"),t.$emit("fileChanged",{fileName:e,changeType:"deleted"}),k(),A.currentFile={}})}function g(e){var t=c.contains(A.existingFileNames,e.file.name);t?v(e):h(e)}function v(e){A.currentFile=e,A.fileOverwriteModal=n.open({templateUrl:"app/application/files/files.overwrite.modal.html",scope:t,size:"sm",backdrop:"static"})}function h(a){var n=a?a:A.currentFile;o.UploadFile(n).success(function(a){A.placeholder?(A.placeholder="",t.$emit("fileChanged",{fileName:n.file.name,changeType:"uploaded"}),e.$broadcast("fileChanged",{fileName:n.file.name,changeType:"deleted",fileId:A.fileId}),l.success("File uploaded!"),k()):(t.$emit("fileChanged",{fileName:n.file.name,changeType:"uploaded"}),n.isSuccess=!0,k(),n.remove())})}function b(){c.each(A.uploader.queue,function(e){g(e)})}function y(){A.currentFile.remove(),A.placeholder&&(A.placeholder=""),A.fileId&&(document.getElementById(A.fileId).value=null)}function w(e,t,a){A.btnOnly=a,A.uploader.queue=[],A.fileId=e,setTimeout(function(){document.getElementById(e).click(),A.clicked=!0},0),A.uploader.onAfterAddingFile=function(e){a?A.buttonText="Uploading . . .":A.placeholder="Uploading . . .",e.file.fileType={id:t},e.file.type=e.file.type||"text/plain",g(e)}}function x(){A.uploader=new r({}),A.uploader.uploadItem=g,A.uploader.uploadAll=b}function k(){s.GetFiles().then(function(t){A.files=t.data;var a=c.pluck(A.files,"fileName");e.$broadcast("fileUploadedInEditor",{fileNames:a})})}function M(){t.$on("fileUploadedInEditor",function(e,t){A.existingFileNames=t.fileNames})}function $(){s.GetFileTypes().then(function(e){A.fileTypes=e.data})}var A=this;A.files={},A.fileTypes=[],A.currentFile={},A.editFile=!1,A.deleteFileModal=!1,A.downloadFile=p,A.updateFile=u,A.confirmFileDelete=m,A.deleteFile=f,A.confirmFileOverwrite=v,A.postFile=h,A.cancelFileUpload=y,A.uploadFileInEditor=w,d()}angular.module("app.files").controller("Files",e),e.$inject=["$rootScope","$scope","$filter","$modal","$timeout","FilesManager","FileUploadManager","FileUploader","toastr","_"];
}(),function(){function e(e,t,e,a,n,i){function s(){var a="/api/applications/"+e.GetCurrentApplicationId()+"/files";return t.Get(a).then(function(e){return e.data})}function o(t){var s=a.api.url+"/api/applications/",o=e.GetCurrentApplicationId()+"/file?filename="+t,r="&x-tenant="+a.api.xtenant,l="&access_token="+n.Get(i.tokenKey).access_token;return s+o+r+l}function r(a){var n="/api/applications/"+e.GetCurrentApplicationId()+"/file";return t.Put(n,a).then(function(e){return e.data})}function l(a){var n="/api/applications/"+e.GetCurrentApplicationId()+"/file?filename="+a;return t.Delete(n).then(function(e){return e.data})}function c(){var e="/api/applications/filetypes";return t.Get(e).then(function(e){return e.data})}return{GetFiles:s,GetFileUrl:o,EditFile:r,DeleteFile:l,GetFileTypes:c}}angular.module("app.files").factory("FilesManager",e),e.$inject=["ApplicationsManager","ServiceManager","ApplicationsManager","Constants","LocalStorageManager","AppValues"]}(),function(){function e(e){return{restrict:"E",scope:!1,template:"<div id='editor' print default-tenant "+e.api.xtenant+"><div ng-include src=\"'app/application/form/edit/editor.form.html'\"></div></div>"}}angular.module("app.form.edit").directive("formEditor",e),e.$inject=["Constants"]}(),function(){function e(e,t,a,n,i,s,o,r,l,c,d,p,u){function m(){M.animationFadeIn="animate fadeIn",M.animationFadeOutRemove="animate fadeOut",f(),x()}function f(){return l.GetCurrentApplication().then(function(e){return M.currentApplication=e,M.currentApplication.typeDisplayName=M.currentApplication.typeName+" Application",M.currentApplication.statusAllowsApplicationEdits===!1?(p.error("This application has already been submitted!"),void t.go("applications.list")):void M.setupForm()})}function g(){M.modalInstance&&M.modalInstance.dismiss("cancel"),t.go("applications.list")}function v(e){var a=M.currentApplication.system;a.Type=e.id,a.SchemaName=e.id,a.customerFullName=M.currentApplication.customerFullName,r.StartNewApplication(a).then(function(e){M.nextTypeModal.dismiss("cancel"),l.SetCurrentApplicationId(e.data.id),f().then(function(){t.go("application.edit",{applicationId:e.data.id,model:M.currentApplication.content},{reload:!0})})})}function h(){M.appInfoUpdate(!0)}function b(){M.appInfoUpdate(!1)}function y(e){d.DeleteFile(e).then(function(){p.success("File deleted!")})}function w(){return l.GetSchemaForType(M.currentApplication.typeId).then(function(t){if(M.schema=t.schema,M.form=t.form,o.formSchema=t,M.currentApplication.content)M.model=M.currentApplication.content;else{if(M.currentApplication.associatedApplicationId){var n=M.currentApplication.associatedApplicationId;return l.GetApplication(n).then(function(e){M.prevApp=e.data,M.prevAppModel=e.data.content,M.newAppModel={},u.each(M.form,function(e){u.each(e.items,function(e){var t=u.filter(e.items,function(e){return e.key});e.groups=u.groupBy(t,function(e){return e.id=e.key[1],e.key[0]});var a=u.keys(e.groups);u.each(a,function(t){var a=u.pluck(e.groups[t],"id");u.each(a,function(e){var a=u.object([e],[""]);M.newAppModel[t]?u.extend(M.newAppModel[t],a):M.newAppModel[t]=a})})})});var t=u.intersection(u.keys(M.newAppModel),u.keys(M.prevAppModel));console.log("sectionsToMap: "+t),u.each(t,function(e){var t=M.newAppModel[e],a=M.prevAppModel[e],n=u.intersection(u.keys(t),u.keys(a));console.log("fieldsToMap: "+n),u.each(n,function(e){t[e]=a[e]})}),console.log("newAppModel: "+M.newAppModel),M.model=M.newAppModel})}M.model={},M.model.customer_contact={name:M.currentApplication.customerFullName,address:M.currentApplication.system.addressLineTwo?M.currentApplication.system.addressLineOne+" "+M.currentApplication.system.addressLineTwo:M.currentApplication.system.addressLineOne,city:M.currentApplication.system.addressCity,state:M.currentApplication.system.addressState,zip:M.currentApplication.system.addressZIP},M.model.facility={address:M.currentApplication.system.addressLineTwo?M.currentApplication.system.addressLineOne+" "+M.currentApplication.system.addressLineTwo:M.currentApplication.system.addressLineOne,city:M.currentApplication.system.addressCity,state:M.currentApplication.system.addressState,zip:M.currentApplication.system.addressZIP},M.model.signature_payment={appId:M.currentApplication.id,description:M.currentApplication.typeName},"LevelOne"===M.currentApplication.schemaName?M.model.nameplate={energy_source:M.currentApplication.system.energySourceId}:"NetMetering"===M.currentApplication.schemaName||(M.model.generatorMover={energy_source:M.currentApplication.system.energySourceId})}a(function(){e.$broadcast("formDataLoaded")}),l.GetPrintableSchemaForType(M.currentApplication.typeId).then(function(e){M.printSchema=e.schema,M.printForm=e.form,o.formSchema=e})})}function x(){a(k,6e3)}function k(){M.animationFadeIn="",M.animationFadeOutRemove="hidden"}var M=this;m(),M.startSubmitProcess=h,M.saveApplication=b,M.backToQueue=g,M.deleteFile=y,M.editorStatus=o.EditorStatus,M.setupForm=w,M.startNextApplication=v}angular.module("app.form.edit").controller("Editor",e),e.$inject=["$scope","$state","$timeout","$modal","$filter","$compile","EditorManager","ListManager","ApplicationsManager","ApplicationsModel","FilesManager","toastr","_"]}(),function(){function e(e,t,a,n){function i(e){var t="/api/schemas/"+e;return n.Get(t,null,!0).then(function(e){return e.data.data.schema})}function s(){var t="/data/formSchema.json";return e.get(t).then(function(e){return e.data})}function o(){var e="/api/schemas/Help";return n.Get(e,null,!0)}function r(){var t="/data/helpSchema.json";return e.get(t)}function l(e,a){d.EditorStatus[e]=a;var n=t.defer();return n.resolve(a),n.promise}function c(e){d.EditorStatus.ProgressPercentage=e}var d={GetJsonSchema:i,GetLocalJsonSchema:s,GetHelpDocument:o,GetLocalHelpDocument:r,SetSectionStatus:l,SetProgress:c,EditorStatus:{}};return d}angular.module("app.form.edit").factory("EditorManager",e),e.$inject=["$http","$q","$timeout","ServiceManager"]}(),function(){function e(e,t,a,n){function i(e,n){var i=e.field.key[0]+"."+e.field.key[1],s=$(e.element).closest("div.schema-form-section"),o=s[0].id,r="undefined"!=typeof e.value?e.value:"";a.validatedFields[i]={sectionId:o,isValid:e.result.valid,id:i,element:e.element,elementForm:e.field,fieldValue:r},t(function(){c(o,n),l()})}function s(e,i){if(Object.keys(a.validatedFields).length>0){var s,o=$(e.target).find("[ng-model]");n.each(o,function(e){if(e){var t=e.getAttribute("ng-model"),n=t.replace("model['","").replace("']['",".").replace("']","");if(a.validatedFields[n]){a.validatedFields[n].sectionId;delete a.validatedFields[n]}}}),t(function(){c(s,i),l()})}}function o(e){var t=$(e).closest(".schema-form-section"),n=t[0].getAttribute("id");a.SetSectionStatus(n,"fieldFocus")}function r(e,t){var a=$(e).closest(".schema-form-section"),n=a[0].getAttribute("id");c(n,t)}function l(){var e=0;for(var t in a.validatedFields){var n=!1;!a.validatedFields[t].fieldValue&&a.validatedFields[t].fieldValue!==!1||"?"===a.validatedFields[t].fieldValue||(n=!0),(a.validatedFields[t].elementForm.required||n)&&e++}var i=0;for(var t in a.validatedFields)n=!1,!a.validatedFields[t].fieldValue&&a.validatedFields[t].fieldValue!==!1||"?"===a.validatedFields[t].fieldValue||(n=!0),a.validatedFields[t].isValid&&n&&i++;var s=Math.round(i/e*100);s=s>100?100:s,a.SetProgress(s)}function c(e,t){var i=0,s=0,o=0,r=0,l=0,c=(n.keys(a.validatedFields),n.groupBy(a.validatedFields,function(e){return e.sectionId}));e&&n.each(c[e],function(e){var t=!1;e.fieldValue&&"?"!==e.fieldValue&&(t=!0);var a=e.isValid;l++,t?a?i++:s++:a?r++:o++});var d="";i+r===l?d="sectionComplete":r+o===l?d="sectionEmpty":l>i&&(d="sectionIncomplete"),a.SetSectionStatus(e,d)}function d(e,t){var a=e.name,n=$(e).closest(".schema-form-section").attr("id"),i="",s="";t.activeHelpId===a?(i=a,s=$(e.currentTarget).closest(".form-group").find("label").text()):t.activeHelpId="",t.$parent.$broadcast("navStatusChange",{status:"fieldFocus",sectionId:n,activeInputId:i,activeDisplayName:s})}function p(e,t,a){a.$watch(function(){return $(e).find("input").length},function(i,s){if(0!==i){var o=$("input").map(function(){return $(this).attr("name")}).get(),r=n.pluck(t,"fieldName"),l=n.intersection(o,r);n.each(l,function(e){0===$("[name="+e+"]").closest(".form-group").find(".icon-help-circle").length&&$('<div class="col-xs-1"><span class="form-control-feedback form-control-more-info icon-help-circle"></span></div>').insertAfter($("[name="+e+"]").closest(".form-group").find("label").eq(0))}),$(e).on("click",".icon-help-circle",function(){var e=$(this).closest(".schema-form-section").attr("id"),t=$(this).closest(".form-group").find("input").attr("name"),n=$(this).closest(".form-group").find("label.col-xs-7").text();a.activeHelpId=n,a.$parent.$broadcast("navStatusChange",{status:"",sectionId:e,activeInputId:t,activeDisplayName:n})})}})}return{restrict:"A",scope:!1,link:function(n,l){a.validatedFields={};var c=0;n.$on("sf-render-finished",function(){c++,2===c&&($(l).bind("DOMNodeRemoved",function(e){s(e,n)}),e.$broadcast("pageRendered"))}),$(l).on("focus","input, select",function(e){n.isChecking=!1,t(function(){o(e.currentTarget,n)}),d(e.currentTarget,n)}),n.$on("fieldValidated",function(e,t){i(t,n)}),$(l).on("blur","input, select",function(e){n.isChecking||(n.isChecking=!0,t(function(){r(e.currentTarget,n)}))}),n.$on("helpData",function(e,t){p(l,t,n)})}}}angular.module("app.form.edit").directive("editorStatus",e),e.$inject=["$rootScope","$timeout","EditorManager","_"]}(),function(){function e(e,t,a,n){function i(){o(),r(),s()}function s(){var a=e.$watch(function(){return t.formSchema},function(e,i){return l.navTitles?void a():void(e!==i&&(l.navTitles=n.filter(t.formSchema.form,function(e){return e.sectionId})))},!0)}function o(){e.$on("navStatusChange",function(t,a){l.active=a.activeInputId,l.activeDisplayName=a.activeDisplayName,e.$apply()})}function r(){return t.GetHelpDocument().then(function(t){l.helpDocument=t.data.data.schema,e.$parent.$broadcast("helpData",l.helpDocument)})}var l=this;l.helpDocument={},l.status=t.EditorStatus,l.status.ProgressPercentage=0,i()}angular.module("app.form.edit").controller("EditorStatus",e),e.$inject=["$scope","EditorManager","AppValues","_"]}(),function(){function e(){function e(e,t,a){function n(e){a.SetValueOnObjectFromStringProperty(e,s.model,t.GetCurrentApplicationId()),s.showPayment=!0}function i(){var t=!0;e.$broadcast("print",t)}var s=e.vm;s.setupPayment=n,s.printPayment=i}return e.$inject=["$scope","ApplicationsManager","jsUtils"],{restrict:"A",scope:!1,controller:e}}angular.module("app.form.edit").directive("comed",e),e.$inject=[]}(),function(){function e(){function e(e,t,a,n,i,s,o,r,l,c){function d(e,a){e&&s.PriceApplication(e,y.currentApplication.id).then(function(e){y.currentApplication.price=t("currency")(e),r.SetValueOnObjectFromStringProperty(a,y.model,y.currentApplication.price)})}function p(){e.$broadcast("print")}function u(){var t=!0;e.$broadcast("print",t)}function m(t){y.submit=t,s.GetCurrentApplication().then(function(t){var i=y.model.facility.address_is_customer_address,r={customerFullName:y.model.customer_contact.name,addressLineOne:i?y.model.customer_contact.address:y.model.facility.address,addressCity:i?y.model.customer_contact.city:y.model.facility.city,addressState:i?y.model.customer_contact.state:y.model.facility.state,addressZip:i?y.model.customer_contact.zip:y.model.facility.zip};if(y.model.nameplate||y.model.generatorMover){var d=y.model.nameplate?y.model.nameplate.energy_source:y.model.generatorMover.energy_source;r.energySourceId=d}o.GetHiddenModules().then(function(i){var o=i.data;c.contains(o,"geocode")||t.system.addressLineOne===r.addressLineOne&&t.system.addressCity===r.addressCity&&t.system.addressState===r.addressState&&t.system.addressZIP===r.addressZip?(s.UpdateAppInfo(r).then(function(e){y.currentApplication=e,y.currentApplication.typeDisplayName=y.currentApplication.typeName+" Application"}),y.submit&&e.$broadcast("schemaFormValidate"),s.SaveApplication(y.model).then(function(){y.submit?y.appForm.$valid&&s.SubmitApplication(y.model).then(function(t){l.success("Application submitted!"),s.GetNextApplicationInfo().then(function(t){t&&t.typeOptions&&t.typeOptions.length>0?(y.nextTypeOptions=t.typeOptions,y.nextTypeModal=a.open({templateUrl:"app/application/form/edit/editor.submitted.modal.html",scope:e,backdrop:"static"})):n.go("applications.list")})}):l.success("Application saved!")})):f(r)})})}function f(t){y.addressData=t,y.geocodeModal=a.open({templateUrl:"app/application/address/address.verify.html",scope:e})}function g(){y.geocodeModal.dismiss("cancel")}function v(t){var o=i.AddressOnTwoLines;null!=t&&(o?(y.addressData.addressLineOne=t.AddressLineOne,y.addressData.addressLineTwo=t.AddressLineTwo):(y.addressData.addressLineOne=t.AddressLineTwo?t.AddressLineOne+" "+t.AddressLineTwo:t.AddressLineOne,y.addressData.addressLineTwo=""),y.addressData.addressCity=t.AddressCity,y.addressData.addressState=t.AddressState,y.addressData.addressZip=t.AddressZIP,y.addressData.latitude=t.Latitude,y.addressData.longitude=t.Longitude),h(),s.UpdateAppInfo(y.addressData).then(function(e){y.currentApplication=e,y.currentApplication.typeDisplayName=y.currentApplication.typeName+" Application",y.geocodeModal.dismiss("cancel")}),y.submit&&e.$broadcast("schemaFormValidate"),s.SaveApplication(y.model).then(function(){y.submit?y.appForm.$valid&&s.SubmitApplication(y.model).then(function(t){l.success("Application submitted!"),s.GetNextApplicationInfo().then(function(t){t&&t.typeOptions&&t.typeOptions.length>0?(y.nextTypeOptions=t.typeOptions,y.nextTypeModal=a.open({templateUrl:"app/application/form/edit/editor.submitted.modal.html",scope:e,backdrop:"static"})):n.go("applications.list")})}):l.success("Application saved!")})}function h(){var e=y.model.facility.address_is_customer_address;e?(y.model.customer_contact.address=y.addressData.addressLineOne,y.model.customer_contact.city=y.addressData.addressCity,y.model.customer_contact.state=y.addressData.addressState,y.model.customer_contact.zip=y.addressData.addressZip):(y.model.facility.address=y.addressData.addressLineOne,y.model.facility.city=y.addressData.addressCity,y.model.facility.state=y.addressData.addressState,y.model.facility.zip=y.addressData.addressZip)}function b(){y.paymentModal=a.open({templateUrl:"app/application/form/edit/tenants/default.payment.modal.html",scope:e,backdrop:!0})}var y=e.vm;y.onPricingFieldChange=d,y.printApplication=p,y.printPayment=u,y.appInfoUpdate=m,y.showPaymentModal=b,y.selectAddress=v,y.cancelGeocode=g}return e.$inject=["$scope","$filter","$modal","$state","UiValues","ApplicationsManager","AccountManager","jsUtils","toastr","_"],{restrict:"A",scope:!1,controller:e}}angular.module("app.form.edit").directive("defaultTenant",e),e.$inject=[]}(),function(){function e(e,t,a,n){function i(){a.GetCurrentApplication().then(function(e){l.currentApplication=e,o()})}function s(){t.go("application.edit",{applicationId:l.currentApplication.id})}function o(){a.GetPrintableSchemaForType(l.currentApplication.typeId).then(function(e){l.model=l.currentApplication.content||{},l.schema=e.schema,l.form=e.form,n.formSchema=e})}function r(){l.printing=!0,e.$emit("print")}var l=this;l.printing=!1,l.readonly=!0,e.readonly=!0,l.editApplication=s,l.printApplication=r,i()}angular.module("app.form").controller("Form",e),e.$inject=["$scope","$state","ApplicationsManager","EditorManager"]}(),function(){function e(e,t){return{restrict:"E",scope:"=",link:function(t,a,n){var i=(t.vm,n.userIsExternal||!0),s=n.internalMessages||!1,o={External:'<button class="btn btn-default btn-sm" ng-click="vm.openExternalPostModal()" ng-if="coreVM.user.email==appVM.currentApplication.assignedSpoc.email">Send Message to Customer</button>',Internal:'<button class="btn btn-default btn-sm" ng-click="vm.openInternalPostModal()">Post Internally</button>',Utility:'<button class="btn btn-default btn-sm" ng-click="vm.openExternalPostModal()">Send Message to Utility</button>'};if("true"==i)var r="External",l="Utility",c="Message";else if("true"==s)var r="Internal",l=r,c="Post";else var r="External",l=r,c="Message";var d=r+" "+c+"s",p=angular.lowercase(r)+"Messages",u='<div layout="row" ng-repeat="message in vm.'+p+'"><div flex="20"><i class="icon-user icon-2x"></i><div>{{::message.senderName}}</div><div ng-if="message.senderTitle" class="caption text-charcoal">{{::message.senderTitle | uppercase}}</div></div><div flex="80"><div class="caption" am-time-ago="message.timeStamp" ng-hide="vm.'+p+'[$index-1].date == message.date"></div><button ng-if="message.senderIsCurrentUser && coreVM.user.isExternal===false && !message.statusChangeToName" ng-click="vm.confirmPostDelete(message)" aria-label="{{message.isExternal ? \'Delete Message\' : \'Delete Post\'}}"><i class="icon-x"></i></button><p ng-bind-html="message.body | decode | lineBreaks"></p><button ng-if="message.fileNames.length > 0" ng-repeat="fileName in message.fileNames" ng-click="vm.downloadFile(fileName)" aria-label="Download File" file-downloader><i class="icon-files"></i> {{fileName | decode}}</button></div></div>',m='<h5>No messages have been sent or received for this application.</h5><p>Click <strong ng-click="vm.open'+r+'PostModal()">here</strong> to send one!</p>',f='<div><div class="no-padding"><div layout="row" flex><p flex="25">'+d+'</p><span flex="75" layout="row"><span flex></span><span flex>'+o[l]+'</span></span></div></div></div><div class="padding" ng-switch="vm.'+p+'.length"><div ng-switch-when="0">'+m+"</div><div ng-switch-default>"+u+"</div></div>",g=e(f)(t);a.replaceWith(g)}}}angular.module("app.messages").directive("messagesContainer",e),e.$inject=["$compile","$timeout"]}(),function(){function e(e,t,a,n,i,s,o,r,l,c){function d(){U()}function p(e,t){var a=e.isExternal;a||N.showExternalMessages?N.openExternalPostModal(a):N.openInternalPostModal()}function u(){O(),I(),P(),N.modalInstance=t.open({templateUrl:"app/application/messages/post/messages.post.internal.html",scope:e})}function m(a){O(),I(),N.postTemplates||a||g(),N.modalInstance=t.open({templateUrl:"app/application/messages/post/messages.post.external.html",scope:e})}function f(){O(),N.modalInstance.dismiss("cancel")}function g(){s.GetPostTemplates().then(function(e){N.postTemplates=e.data})}function v(){N.notifyUsers.length>0&&(N.notifyUsernames=c.pluck(N.notifyUsers,"email")),N.attachments.length>0&&(N.attachmentNames=c.pluck(N.attachments,"fileName")),s.PostInternal(N.newMessage,N.attachmentNames,N.notifyUsernames).then(function(){N.modalInstance.dismiss("cancel"),D()})}function h(){N.attachments.length>0&&(N.attachmentNames=c.pluck(N.attachments,"fileName")),s.PostExternal(N.newMessage,N.attachmentNames).then(function(){N.modalInstance.dismiss("cancel"),E()})}function b(){N.notifyUser.selected?w(N.notifyUser):y()}function y(){N.notifyUser.selected=!0,N.notifyUsers.push(N.notifyUser)}function w(e){e.selected=!1,N.notifyUsers=c.without(N.notifyUsers,e)}function x(){N.attachFile.selected?M(N.attachFile):k()}function k(){N.attachFile.selected=!0,N.attachments.push(N.attachFile)}function M(e){e.selected=!1,N.attachments=c.without(N.attachments,e)}function $(t){var a=o.GetFileUrl(t);e.$broadcast("downloadFile",{url:a})}function A(a){N.currentPost=a,N.currentPost.senderIsAssignedSpoc&&N.currentPost.isExternal?(N.currentPost.type="Message",N.currentPost.action="Sent"):(N.currentPost.type="Post",N.currentPost.action="Posted"),N.modalInstance=t.open({templateUrl:"app/application/messages/messages.delete.html",scope:e,backdrop:!0})}function S(e){s.DeletePost(e.id).then(function(e){N.modalInstance.dismiss("cancel"),l.success(e.message),N.showExternalMessages?E():D(),N.currentPost={}})}function T(e){N.loadingMessages=!0,"external"===e?E():"internal"===e&&D()}function C(e){n(function(){N.newMessage=e.body},1e3)}function E(){s.GetExternal().then(function(e){N.messages=e.data,N.messages.body=decodeURI(N.messages.body),N.loadingMessages=!1})}function D(){s.GetInternal().then(function(e){N.messages=e.data,N.messages.body=decodeURI(N.messages.body),N.loadingMessages=!1})}function I(){o.GetFiles().then(function(e){N.files=e.data,c.each(N.files,function(e){var t=a("fileMimeTypeFilter")(e.fileMimeType);e.label="<div class='row selectItem'><div class='col-xs-5 selectShow'><i class='icon-file-"+t+"'></i> "+e.fileName+"</div><div class='col-xs-5 selectHide'>"+e.fileTypeName+"</div></div>"})})}function P(){s.GetUsers().then(function(e){N.users=e.data,c.each(N.users,function(e){e.label="<div class='row selectItem'><div class='col-xs-5 selectShow'>"+e.fullName+"</div><div class='col-xs-5 selectHide'>"+e.title+"</div></div>"})})}function O(){N.newMessage="",N.selectedTemplate="",N.attachments=[],N.attachmentNames=[],N.notifyUser={},N.notifyUsers=[],N.notifyUsernames=[]}function U(){e.$on("appStatusUpdated",function(){N.showExternalMessages===!0?E():D()}),e.$watch("vm.selectedTemplate",function(e,t){N.newMessage=e})}var N=this;N.filterMessages=T,N.openModal=p,N.openExternalPostModal=m,N.openInternalPostModal=u,N.closeModal=f,N.submitExternalPost=h,N.submitInternalPost=v,N.userSelected=b,N.deselectUser=w,N.fileAttached=x,N.deselectFile=M,N.downloadFile=$,N.confirmPostDelete=A,N.deletePost=S,N.templateSelected=C,d()}angular.module("app.messages").controller("Messages",e),e.$inject=["$scope","$modal","$filter","$timeout","ApplicationsManager","MessagesManager","FilesManager","AccountManager","toastr","_"]}(),function(){function e(e,t,a){function n(){var e="/api/applications/"+t.GetCurrentApplicationId()+"/posts/external";return a.Get(e).then(function(e){return e.data})}function i(){var e="/api/applications/"+t.GetCurrentApplicationId()+"/posts/internal";return a.Get(e).then(function(e){return e.data})}function s(){var e="/api/applications/"+t.GetCurrentApplicationId()+"/posttemplates";return a.Get(e).then(function(e){return e.data})}function o(e,n){var i="/api/applications/"+t.GetCurrentApplicationId()+"/posts/external",s={Body:e,FileNames:n,NotifyUsernames:[]};return a.Post(i,s)}function r(e,n,i){var s="/api/applications/"+t.GetCurrentApplicationId()+"/posts/internal",o={Body:e,FileNames:n,NotifyUsernames:i};return a.Post(s,o)}function l(){var e="/api/account/internal";return a.Get(e).then(function(e){return e.data})}function c(e){var n="/api/applications/"+t.GetCurrentApplicationId()+"/posts/"+e;return a.Delete(n).then(function(e){return e.data})}return{GetExternal:n,GetInternal:i,GetPostTemplates:s,PostExternal:o,PostInternal:r,GetUsers:l,DeletePost:c}}angular.module("app.messages").factory("MessagesManager",e),e.$inject=["$filter","ApplicationsManager","ServiceManager"]}(),function(){function e(e,t){function a(){s()}function n(){t.close(o.message)}function i(){t.dismiss("cancel")}function s(){e.$watch("selectedTemplate",function(e,t){o.newMessage=e})}var o=this;o.ok=n,o.cancel=i,o.message="",a()}angular.module("app.messages").controller("MessagesAdd",e),e.$inject=["$scope","$modalInstance"]}(),function(){angular.module("app.application").directive("changeOwner",function(){return{restrict:"EA",templateUrl:"app/application/owner/owner.change.dropdown.html",scope:"="}})}(),function(){function e(e,t,a,n,i,s,o){function r(){l()}function l(){n.GetQuestions().then(function(e){f.questions=e,u=f.questions.length,p()})}function c(t,a,i){n.PostAnswer(t.id,a,t.newComment).then(function(n){f.today||(f.today=new Date),f.questions[i].answer={isApproved:a,text:d(a),comments:t.newComment,lastModifiedDateTime:f.today},m===u?(s.success(n.data.message),e.$emit("appStatusUpdated")):p()})}function d(e){return e===!1?"Denied":e===!0?"Approved":void 0}function p(){g.push(o.pluck(f.questions,"answer")),m=g.length}var u,m,f=this,g=[];f.questions=[],f.showFeederAnalysisButton="demo"===i.api.xtenant,f.postAnswer=c,r()}angular.module("app.review").controller("Review",e),e.$inject=["$scope","$timeout","ApplicationsManager","ReviewManager","Constants","toastr","_"]}(),function(){function e(e,t,a){function n(){var n=[],i="/api/applications/questions";return e.GetCurrentApplication().then(function(e){var s=e.technicalReviewAnswers;return t.Get(i).then(function(e){return questions=e.data.data,a.each(questions,function(e){var t=a.findWhere(s,{questionId:e.id});t&&(e.answer=t,e.answer.text=t.isApproved?"Approved":"Denied",e.modifiedTime=t.lastModifiedDateTime),n.push(e)}),n})})}function i(a,n,i){var s="/api/applications/"+e.GetCurrentApplicationId()+"/answers",o=[{QuestionId:a,IsApproved:n,Comments:i}];return t.Post(s,o)}return{GetQuestions:n,PostAnswer:i}}angular.module("app.review").factory("ReviewManager",e),e.$inject=["ApplicationsManager","ServiceManager","_"]}(),function(){function e(e,t,a,n,i,s,o,r,l,c){function d(){m(),p(),f()}function p(){i.GetCurrentApplication().then(function(e){g.currentApplication=e,u(v.typeId)})}function u(e){i.GetStatusesForType(g.currentApplication.typeId).then(function(e){g.allStatuses=e.data;var t=c.reject(e.data,function(e){return"Flag"===e.statusType}),a=c.groupBy(t,function(e){return e.milestoneOrder});g.timelinePlaceholders=c.values(a),s.GetStatusChanges(g.currentApplication.id).then(function(e){g.appStatusChanges=e.data,g.groupedAppStatusChanges=c.groupBy(g.appStatusChanges,function(e){return e.toId});var t=c.findWhere(g.allStatuses,{statusId:g.appStatusChanges[0].toId});if(t&&"Flag"==t.statusType)var a=!0,n=c.find(g.appStatusChanges,function(e){var t=c.findWhere(g.allStatuses,{statusId:e.toId});return"Flag"!==t.statusType});c.each(g.timelinePlaceholders,function(e){c.each(e,function(e){e.dates=c.pluck(g.groupedAppStatusChanges[e.statusId],"changeDate"),a&&e.statusId==n.toId?(e.isPaused=!0,e.awaitingUserAction=1==t.allowsExternalApplicationEdits?!0:!1):e.dates.length>0&&("Phase"==e.statusType&&t.statusId==e.statusId?e.isPending=!0:e.isComplete=!0),1==e.takesPrecedenceForMilestone&&(!e.dates||e.dates&&0==e.dates.length)?e.okToHide=!0:0==e.takesPrecedenceForMilestone&&e.isComplete&&(e.showMe=!0)})})})})}function m(){o.GetAccount().then(function(e){g.userIsExternal=e.isExternal,g.userIsInternal=!e.isExternal})}function f(){a.$on("appStatusUpdated",function(){u(g.currentApplication.typeId)})}var g=this;g.milestoneData={},g.milestones={},g.statusChanges={},g.pendingMilestone={},g.internalUsers={};var v={};d()}angular.module("app.status").controller("Status",e),e.$inject=["$modal","$rootScope","$scope","$state","ApplicationsManager","StatusManager","AccountManager","ApplicationManager","toastr","_"]}(),function(){function e(e,t){function a(e){var a="/api/applications/types/"+e+"/milestones";return t.Get(a).then(function(e){return e.data})}function n(e){var a="/api/applications/"+e+"/statuschanges";return t.Get(a).then(function(e){return e.data})}function i(e){var a="/api/applications/"+e+"/activities";return t.Get(a).then(function(e){return e.data})}return{GetMilestones:a,GetStatusChanges:n,GetActivities:i}}angular.module("app.status").factory("StatusManager",e),e.$inject=["ApplicationsManager","ServiceManager"]}(),function(){function e(e,t,a,n,i,s){function o(){a.GetCurrentApplication().then(function(e){l.currentApplication=e})}function r(){var t=s.reduce(e.$parent.appVM.UDFs,function(e,t){return t.value&&e.push({id:t.id,value:t.value}),e},[]);a.UpdateUDFs(t).then(function(e){l.editUDFs=!1,i.success("You have succesfully updated the Utility Info for this Application!")})}var l=this;l.editUDFs=!1,l.updateUDFs=r,o()}angular.module("app.utility").controller("Utility",e),e.$inject=["$scope","$state","ApplicationsManager","EditorManager","toastr","_"]}(),function(){function e(e){function t(){}function a(t){e.SetCurrentApplicationId(t)}var n=this;n.setCurrentApplicationId=a,t()}angular.module("app.applications").controller("Applications",e),e.$inject=["ApplicationsManager"]}(),function(){function e(){var e=this;this.CurrentApplicationId="",this.CurrentApplicationLocationInformation=null,this.CurrentApplicationFormDetails=null,this.CurrentApplication=null,this.ApplicationTypes=null,this.CurrentAppTypeStatuses=null,this.setCurrentApplicationLocationInfo=function(t){e.CurrentApplicationLocationInformation=e.applicationLocationInformation(t)},this.setCurrentApplicationFormDetails=function(t){e.CurrentApplicationFormDetails=e.savedApplicationForm(t)},this.setCurrentApplication=function(t){e.CurrentApplication=t,e.CurrentApplicationId=t.id},this.SetTypes=function(t){e.ApplicationTypes=t},this.setCurrentAppTypeStatuses=function(t){e.CurrentAppTypeStatuses=t},this.getCurrentAppTypeStatuses=function(){return e.CurrentAppTypeStatuses},this.clearCurrentApplication=function(){delete e.CurrentApplication,delete e.CurrentApplicationId,delete e.addressOne,delete e.addressTwo,delete e.city,delete e.state,delete e.zip,delete e.id,delete e.CurrentAppTypeStatuses,delete e.UDFs},this.applicationLocationInformation=function(t){this.addressOne=t.addressLineOne,this.addressTwo=t.addressLineTwo,this.city=t.addressCity,this.state=t.addressState,this.zip=t.addressZIP,this.id=e.CurrentApplicationId},this.savedApplicationForm=function(t){this.data=t,this.id=e.CurrentApplicationId}}angular.module("app.applications").service("ApplicationsModel",e),e.$inject=[]}(),function(){function e(e,t,a,n,i,s,o,r,l){function c(e,t){var a={skip:q.currentItemIndex,take:q.itemsToFetch,status:e.status,search:e.search,sort:e.sort,asc:e.asc,my:e.my},i="/api/applications";return n.Get(i,a).then(function(e){u(e,t);var a=p(e,t);return a})}function d(e){var t="/api/applications/"+e;return n.Get(t).then(function(e){return e.data})}function p(e,t){return{items:t?e.data.data.locations:e.data.data.internalApplications,totalApplications:e.data.data.totalApplications,totalLocations:e.data.data.totalLocations,responseMessage:e.data.message}}function u(e,t){try{q.totalItems=t?e.data.data.totalLocations:e.data.data.totalApplications;var a=t?e.data.data.locations:e.data.data.internalApplications;q.currentItemIndex+=a.length,q.items.push.apply(q.items,a)}catch(n){l.error(n)}}function m(e,a){if(q.items.length>=q.totalItems){var i=t.defer();return i.resolve(q.items),i.promise}var s={skip:q.currentItemIndex,take:q.itemsToFetch,status:e.status,search:e.search,sort:e.sort,asc:e.asc,my:e.my},o="/api/applications";return n.Get(o,s).then(function(e){return u(e,a),q.items},function(e){l.error("response.data.error_message")})}function f(){if(i.CurrentApplication&&i.CurrentApplication.id&&e.params.applicationId&&e.params.applicationId!==i.CurrentApplication.id&&i.clearCurrentApplication(),i.CurrentApplication&&i.CurrentApplication.id===y()){var a=t.defer();return a.resolve(i.CurrentApplication),a.promise}var s="/api/applications/"+y();return n.Get(s).then(function(e){return i.setCurrentApplication(e.data.data),e.data.data})}function g(){var e="/api/applications/"+y();return n.Get(e).then(function(e){return i.setCurrentApplication(e.data.data),e.data.data})}function v(e){var t="/api/applications/"+y()+"/content";return n.Put(t,e).then(function(t){return i.setCurrentApplicationFormDetails(e),t.data})}function h(){var e="/api/applications/"+y()+"/submit";return n.Put(e).then(function(e){return e.data})}function b(){var e="/api/applications/"+y();return n.Delete(e).then(function(e){return e.data})}function y(){return i.CurrentApplicationId?i.CurrentApplicationId:e.params.applicationId}function w(e){var t="/api/applications/types/"+e+"/statuses";return n.Get(t).then(function(e){return e.data})}function x(){if(i.CurrentAppTypeStatuses){var e=t.defer();return e.resolve(i.CurrentAppTypeStatuses),e.promise}var a="/api/applications/statuses";return n.Get(a).then(function(e){return i.setCurrentAppTypeStatuses(e.data),e.data})}function k(){if(i.ApplicationTypes){var e=t.defer();return e.resolve(i.ApplicationTypes),e.promise}var a="/api/applications/types";return n.Get(a).then(function(e){return i.SetTypes(e.data),e.data})}function M(){var e={};return k().then(function(t){var a=t.data;return f().then(function(t){if(t.associatedApplicationId)e.typeOptions=[];else{var n=r.findWhere(a,{id:t.typeId});if(n.workflowNextStepTypeIds.length>0){var i=n.workflowNextStepTypeIds,s=r.filter(a,function(e){
return r.contains(i,e.id)});e.typeOptions=s}}return e})})}function $(e){var t="/api/schemas/"+e;switch(e){case"LevelOne":e="Level1";break;case"LevelTwo":e="Level2";break;case"LevelThree":e="Level3";break;case"LevelFour":e="Level4"}if(o.isDev&&s.api.useLocalFormSchema){var a={};return S().then(function(t){return a.schema=t.data.schema,T(e).then(function(e){return a.form=e.data.form,a})})}return n.Get(t).then(function(e){return e.data.data.schema})}function A(e){var t="/api/schemas/"+e;return n.Get(t).then(function(e){return r.each(e.data.data.schema.schema.properties,function(e){e.readonly=!0,e.print=!0,r.each(e.properties,function(e){e.readonly=!0,e.print=!0})}),r.each(e.data.data.schema.form,function(e){e.readonly=!0,e.print=!0,r.each(e.items,function(e){e.readonly=!0,e.print=!0,r.each(e.items,function(e){e.readonly=!0,e.print=!0})})}),e.data.data.schema})}function S(){var e="data/"+s.api.xtenant+"/schemas/editor.json",t={content:null};return a.get(e).then(function(e){return t.content=e,t.content})}function T(e){var t="data/"+s.api.xtenant+"/forms/"+e+".json",n={content:null};return a.get(t).then(function(e){return n.content=e,n.content})}function C(e){var t="/api/applications/types/"+e+"/energysources";return n.Get(t).then(function(e){return e.data.data})}function E(){var e="/api/applications/energysources";return n.Get(e).then(function(e){return e.data.data})}function D(e){var t="/api/applications/energysources/"+e+"/types";return n.Get(t).then(function(e){return e.data.data})}function I(){var e="/api/applications/locations";return n.Get(e).then(function(e){return e.data})}function P(e){e?i.CurrentApplicationId=e:delete i.CurrentApplicationId}function O(e){e?(i.CurrentApplication=e,P(e.id)):(delete i.CurrentApplication,P())}function U(){for(q.currentItemIndex=0;q.items.length>0;)q.items.pop()}function N(e,t){var a="/api/applications/"+t+"/pricing?nameplateCapacity="+e;return n.Get(a).then(function(e){return e.data.data.totalPrice})}function F(){var e="/api/applications/udfs";return n.Get(e).then(function(e){return e.data.data})}function V(e){var t="/api/applications/"+y()+"/udfs";return n.Post(t,e).then(function(e){return e.data})}function L(){var e="/api/applications";return n.Get(e).then(function(e){var t=e.data.data.internalApplications;return F().then(function(e){return r.each(t,function(t){r.each(e,function(e){var a=r.find(t.applicationUDFDetails,function(t){return t.id===e.id});t[e.id]=a?a.value:""}),delete t.applicationUDFDetails}),t})})}function R(e){var t="/api/applications/"+y();return n.Put(t,e).then(function(){return i.clearCurrentApplication(),f().then(function(e){return e})})}var q=this;return this.currentItemIndex=0,this.itemsToFetch=s.appValues.itemsToFetchInQueue,this.items=[],this.totalItems=null,this.isExternal=!0,{GetApplications:c,GetApplication:d,GetCurrentApplication:f,ForceGetCurrentApplication:g,GetCurrentApplicationId:y,SaveApplication:v,SubmitApplication:h,DeleteApplication:b,GetApplicationTypes:k,GetStatuses:x,GetStatusesForType:w,GetSchemaForType:$,GetPrintableSchemaForType:A,GetEnergySources:C,GetAllEnergySources:E,GetTypesPerEnergySource:D,GetLocations:I,SetCurrentApplicationId:P,SetCurrentApplication:O,QueueScroll:m,ResetResults:U,PriceApplication:N,GetNextApplicationInfo:M,GetUDFs:F,UpdateUDFs:V,GetAllApplications:L,UpdateAppInfo:R}}angular.module("app.applications").factory("ApplicationsManager",e),e.$inject=["$state","$q","$http","ServiceManager","ApplicationsModel","Constants","AppValues","_","toastr"]}(),function(){function e(e,t){function a(e,t,a){n().then(function(t){e.contentUrl=t,e.items=e.vm.my.items})}function n(){return e.GetAccount().then(function(e){return e.isPublic,"app/applications/list/public.queue.html"})}var i={link:a,restrict:"E",template:'<div ng-include="contentUrl"></div>'};return i}angular.module("app.list").directive("queue",e),e.$inject=["AccountManager","ApplicationsManager"]}(),function(){function e(e,t,a){function n(n,i,s){i.bind("click",function(){var n=e("date")(new Date,"MM.dd.yyyy"),i="ApplicationQueue_"+n,s=document.createElement("a");t.GetAllApplications().then(function(e){var t=a.convert(e);s.href=t,s.style="visibility:hidden",s.download=i+".csv",document.body.appendChild(s),s.click(),document.body.removeChild(s)})})}var i={link:n,restrict:"A"};return i}angular.module("app.list").directive("queueExport",e),e.$inject=["$filter","ApplicationsManager","JsonToCsvConverter"]}(),function(){function e(e,t,a,n,i,s,o,r,l){function c(){o.GetAccount().then(function(e){S.isUserExternal=e.isExternal,g(),d(),u(),S.isUserExternal||m(),p(),f()})}function d(){S.isUserExternal?S.queueTemplate="app/applications/list/list.external.html":S.queueTemplate="app/applications/list/list.internal.html"}function p(){S.loadingData=!0,s.ResetResults(),s.GetApplications(S.queryParams,S.isUserExternal).then(function(e){S.applicationData=e,S.noSearchResults=n.staticText.noSearchResults,S.loadingData=!1})}function u(){S.queryParams={status:S.statusFilter,search:S.searchString,sort:S.isUserExternal?"":"DaysRemaining",asc:!0,my:"false"}}function m(){S.UDFsInQueue={};var e=[{headerId:"EnergySource",name:"Source",sort:"none"},{headerId:"Address",name:"System",sort:"none"},{headerId:"Type",name:"Type",sort:"none"},{headerId:"CustomerName",name:"Customer Name",sort:"none"},{headerId:"OwnerName",name:"Assigned To",sort:"none"},{headerId:"LastUpdated",name:"Last Updated",sort:"none"},{headerId:"DaysRemaining",name:"Days Remaining",sort:"asc"},{headerId:"Status",name:"Status",sort:"none"}];s.GetUDFs().then(function(t){S.udfsInQueue=l.filter(t,function(e){return e.isShownInQueue}),l.each(S.udfsInQueue,function(e){e.sort="none",e.isUDF=!0,e.headerId=e.id}),e.splice.apply(e,[4,0].concat(S.udfsInQueue)),S.internalHeaders=e})}function f(){return s.GetStatuses().then(function(e){S.statuses=e.data})}function g(){s.SetCurrentApplication(null)}function v(){p()}function h(e){s.SetCurrentApplicationId(e)}function b(e){S.noSearchResults="Filtering...",S.statusFilterDisplay=e.name,S.statusFilter=e.id,S.queryParams.status=e.id;({id:e.id,name:e.name});p()}function y(){S.noSearchResults="Loading...",S.statusFilterDisplay="",S.statusFilter="",S.queryParams.status="",p()}function w(e,t){13===e&&(S.noSearchResults="Searching...",S.searchString=t,S.queryParams.search=t,p())}function x(){S.noSearchResults="Loading...",S.searchString="",S.queryParams.search="",p()}function k(){return!S.isQueueBusy&&S.applicationData?(S.isQueueBusy=!0,s.QueueScroll(S.queryParams,S.isUserExternal).then(function(e){S.applicationData.items=e,S.isQueueBusy=!1},function(e){S.isQueueBusy=!1})):void 0}function M(){S.modalInstance=a.open({templateUrl:"app/application/application.add.modal.html",scope:e})}function $(e){S.noSearchResults="Sorting...",S.queryParams.sort=e,l.each(S.internalHeaders,function(t){t.headerId===e?"none"===t.sort||"asc"===t.sort?(S.queryParams.asc=!1,t.sort="desc"):"desc"===t.sort&&(S.queryParams.asc=!0,t.sort="asc"):t.sort="none"}),p()}function A(e,t){var a=l.find(e,function(e){return e.id===t});return a?a.value:""}var S=this;S.updateApplications=v,S.addApplication=M,S.setCurrentApplicationId=h,S.filterApplications=b,S.clearFilter=y,S.searchApplications=w,S.clearSearch=x,S.queueScroll=k,S.sort=$,S.getUDFValue=A,S.isUserExternal=!0,S.title="Queue";S.title="",S.appType="",S.canGetStarted=!1,S.appCount=0,S.statusFilter=t.params.status,S.searchString=t.params.search,S.emptyQueuePlaceholder=n.staticText.emptyQueue,S.noSearchResults="Loading...",c()}angular.module("app.list").controller("List",e),e.$inject=["$scope","$state","$modal","Constants","UiValues","ApplicationsManager","AccountManager","ListManager","_"]}(),function(){function e(e,t){function a(a){t.setCurrentApplicationLocationInfo(a);var n="/api/applications";return e.Post(n,a).then(function(e){return e.data})}var n={StartNewApplication:a};return n}angular.module("app.list").factory("ListManager",e),e.$inject=["ServiceManager","ApplicationsModel"]}(),function(){function e(){function e(e){o.CurrentUser=e}function t(){return o.CurrentUser}function a(){delete o.CurrentUser}function n(e){o.HiddenModules=e}function i(){return o.HiddenModules}function s(){delete o.HiddenModules}var o=this;this.SetUser=e,this.GetCurrentUser=t,this.ClearCurrentUser=a,this.SetHiddenModules=n,this.GetHiddenModules=i,this.ClearHiddenModules=s}angular.module("app.account").service("AccountModel",e),e.$inject=[]}(),function(){function e(e,t,a){function n(){var a=t.GetCurrentUser();if(a){var n=e.defer();return n.resolve(a),n.promise}return i()}function i(){var e="/api/account";return a.Get(e).then(function(e){return t.SetUser(e.data.data),e.data.data})}function s(){var e="/api/account/all";return a.Get(e).then(function(e){return e.data.data})}function o(e){var t="/token";e.grant_type="password";var n={headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(e){var t=[];for(var a in e)t.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return t.join("&")}};return a.Post(t,e,n)}function r(e){var t="/api/account";return a.Post(t,e)}function l(){var e="/api/account/publicroles";return a.Get(e).then(function(e){return e.data})}function c(){var e="/api/account/spocroles";return a.Get(e).then(function(e){return e.data})}function d(){var e="/api/account/internalroles";return a.Get(e).then(function(e){return e.data})}function p(e){var t="/api/account/validateemail";return a.Post(t,e)}function u(e){var t="/api/account/resetpassword";return a.Post(t,e)}function m(){t.ClearCurrentUser()}function f(e){var t="/api/account/forgotpassword";return a.Post(t,e)}function g(e){var t="/api/account";return a.Put(t,e)}function v(e,t){var n="/api/account/"+t;return a.Put(n,e)}function h(e){var t="/api/account/changepassword";return a.Post(t,e)}function b(e){var t="/api/account/sendconfirmation";return a.Post(t,e)}function y(e){var t="/api/account/resendconfirmation/"+e;return a.Post(t)}function w(){var e="/api/account/resendconfirmation/";return a.Post(e)}function x(){var n=t.GetHiddenModules();if(n){var i=e.defer();return i.resolve(n),i.promise}var s="/api/tenant/hiddenmodules";return a.Get(s).then(function(e){return t.SetHiddenModules(e.data),e.data})}function k(){t.ClearHiddenModules()}return{GetAccount:n,RefreshAccount:i,GetAllAccounts:s,LoginUser:o,RegisterUser:r,GetPublicRoles:l,GetSPOCRoles:c,GetInternalRoles:d,ValidateEmail:p,ResetPassword:u,ClearCurrentUser:m,ForgotPassword:f,UpdateSettings:g,UpdateOtherUserSettings:v,ChangePassword:h,ResendEmailConfirmation:b,ResendConfirmationToUser:y,ResendConfirmationToCurrentUser:w,GetHiddenModules:x,ClearHiddenModules:k}}angular.module("app.account").factory("AccountManager",e),e.$inject=["$q","AccountModel","ServiceManager"]}(),function(){function e(e,t,a,n,i,s,o,r,l,c){function d(){p(),f()}function p(){e.$on("$stateChangeStart",function(e,t,a,n,i){b(),M.fromState=n,M.toState=t,M.stateObject=t,M.stateArray=t.name.split(/[\. ,:-]+/g),M.state=t.name||"",M.previousState=n.name||"",M.previousParams=i,M.stateHeading=u(),m(),w(e)})}function u(){var e="app/",t=c.last(M.stateArray);return c.each(M.stateArray,function(a){e+=a+"/",a==t&&(e+=a+".heading.html")}),e}function m(){M.hideNav=c.contains(o.states.hideNav,M.state),M.showLandingNav=c.contains(o.states.showLandingNav,M.state),M.showLandingBanner=c.contains(o.states.showLandingBanner,M.state),M.fullBackground=M.hideNav}function f(){e.$on("unauthorized",function(){"login"!==a.current.name&&a.go("login")}),t.$on("accountUpdated",g)}function g(){s.RefreshAccount().then(function(e){M.user=e})}function v(){i.Remove(l.tokenKey),s.ClearCurrentUser(),s.ClearHiddenModules(),n.path("/login")}function h(e,t){a.go(e,t)}function b(){var e=i.Get(l.tokenKey);e?s.GetAccount().then(function(e){M.user=e,y(),M.hiddenModules||x()}):M.user&&(delete M.user,v())}function y(){return M.user?void(M.userIsAdmin=c.contains(c.pluck(M.user.roles,"id"),"SuperAdmin")||c.contains(c.pluck(M.user.roles,"id"),"Admin")):void b()}function w(e){k()&&e.preventDefault()}function x(){s.GetHiddenModules().then(function(e){M.hiddenModules=e.data})}function k(e){var t=e?e:M.state;return c.contains(t,M.hiddenModules)}var M=this;M.asideCollapsed=!0,M.utilityNameId=o.staticText.utilityNameId,M.tenant=o.api.xtenant,M.utility=r.Name,d(),M.logout=v,M.goToState=h,M.stateIsHidden=k}angular.module("app.core").controller("Core",e),e.$inject=["$rootScope","$scope","$state","$location","LocalStorageManager","AccountManager","Constants","UiValues","AppValues","_"]}(),function(){function e(e,t){function a(){n()}function n(){i.footerContactLinks=t.where(e.Links,{Type:"contact"}),i.footerSupportLinks=t.where(e.Links,{Type:"support"})}var i=this;a()}angular.module("app.layout").controller("Footer",e),e.$inject=["UiValues","_"]}(),function(){function e(e,t,a){function n(){i(),s()}function i(){var n=a.UtilityLogoUrl;o.internalLogoUrl=e.trustAsResourceUrl(n);var i=a.UtilityExternalLogoUrl?a.UtilityExternalLogoUrl:a.UtilityLogoUrl;o.externalLogoUrl=e.trustAsResourceUrl(i),t.GetAccount().then(function(e){o.account=e})}function s(){o.account.isExternal===!0?o.queueTemplate="app/applications/list/external.queue.html":o.queueTemplate="app/applications/list/internal.queue.html"}var o=this;o.account={},o.queueTemplate="",o.aside={},o.activate=n,o.navbarCollapsed=!0,n()}function t(e,t){function a(){n()}function n(){var a=t.UtilityExternalLogoUrl?t.UtilityExternalLogoUrl:t.UtilityLogoUrl;i.externalLogoUrl=e.trustAsResourceUrl(a)}var i=this;a()}angular.module("app.layout").controller("Navbar",e).controller("LandingNavbar",t),e.$inject=["$sce","AccountManager","UiValues"],t.$inject=["$sce","UiValues"]}(),function(){function e(e,t){return{restrict:"E",scope:"false",controller:"Notifications",link:function(t){function a(){n.unreadCount&&n.unreadCount>-1&&n.favicon.badge(n.unreadCount)}var n=t.notifyVM;n.favicon=new Favico({bgColor:"#555",animation:"none",position:"right",fontStyle:"normal"}),n.favicon.badge(0),e(a,5e3)}}}angular.module("app.notifications").directive("notificationsBadge",e),e.$inject=["$timeout","NotificationsManager"]}(),function(){function e(e,t,a,n,i){return{restrict:"A",scope:!1,link:function(s,o,r){var l=s.notifyVM;if(!a.IsPolling()){a.IsPolling(!0);var c=e(function(){!document.getElementById("notifications")&&t.DoesExist(i.tokenKey)&&l.fetchNotifications()},n.appValues.notificationPollingTime);s.$on("logout",function(){e.cancel(c)})}}}}angular.module("app.notifications").directive("notificationsPolling",e),e.$inject=["$interval","LocalStorageManager","NotificationsManager","Constants","AppValues"]}(),function(){function e(e,t,a){function n(){e.ClearNotifications(),s()}function i(){var e=!0;s(e)}function s(t){e.GetNotifications(t).then(function(e){l(e)})}function o(a){t.SetCurrentApplicationId(a.applicationId),a.isRead===!1&&(d.unreadCount--,e.ReadNotification(a.id).then(function(e){l(e)}))}function r(){d.disableMarkAsRead=!0,e.ReadAllNotifications().then(function(e){l(e),d.disableMarkAsRead=!1})}function l(e){d.totalCount=e.totalCount||0,d.notifications=e.notifications,d.unreadCount=e.unreadCount||0}function c(e){return"NewApplicationPost"==e.type?"application.messages({applicationId:notification.applicationId})":"application.status({applicationId:notification.applicationId})"}var d=this;d.readNotification=o,d.readAll=r,d.fetchNotifications=s,d.fetchMoreNotifications=i,d.goToNotificationSource=c,d.severityLevelClasses={Low:"low-severity",Medium:"medium-severity",High:"high-severity"},n()}angular.module("app.notifications").controller("Notifications",e),e.$inject=["NotificationsManager","ApplicationsManager","_"]}(),function(){function e(e,t,a,n){function i(e){var a={skip:e?c.currentItemIndex:0,take:c.itemsToFetch},n="/api/notifications",i=!0;return t.Get(n,a,i).then(function(t){return t.data&&t.data.data.notifications&&t.data.data.notifications.length>0&&(c.totalNotifications=t.data.data.totalNotifications,e||(c.notifications=[]),c.notifications.push.apply(c.notifications,t.data.data.notifications),c.totalUnreadNotifications=t.data.data.totalUnreadNotifications),c.currentItemIndex=c.notifications.length,{notifications:c.notifications,totalCount:c.totalNotifications,unreadCount:c.totalUnreadNotifications}})}function s(e){var a="/api/notifications/"+e,n={isRead:"true"};return t.Put(a,n).then(function(e){return i()})}function o(){var e=n.where(c.notifications,{isRead:!1}),a=n.pluck(e,"id"),s="/api/notifications",o={NotificationIds:a};return t.Put(s,o).then(function(e){return i()})}function r(){c.notifications=[],c.totalNotifications=null,c.totalUnreadNotifications=null,c.isPolling=!1}function l(e){return e?void(c.isPolling=e):c.isPolling}var c=this;this.currentItemIndex=0,this.itemsToFetch=a.appValues.itemsToFetchInQueue,this.notifications=[],this.totalNotifications=null,this.totalUnreadNotifications=null,this.isPolling=!1;var d={GetNotifications:i,ReadNotification:s,ReadAllNotifications:o,ClearNotifications:r,IsPolling:l};return d}angular.module("app.notifications").factory("NotificationsManager",e),e.$inject=["$q","ServiceManager","Constants","_"]}(),function(){function e(){return{restrict:"E",replace:!0,templateUrl:"app/core/layout/sidenav.html"}}angular.module("app.layout").directive("sideNav",e)}(),function(){function e(e){return{restrict:"E",templateUrl:"app/core/layout/viewport/viewport.html",link:function(t,a,n){var i=n.vmAlias;t.vpHeadingTemplate=n.vmAlias?t[i].vpHeadingTemplate:t.vm.vpHeadingTemplate?t.vm.vpHeadingTemplate:null,t.headingTemplate=e.current.data.headingTemplate,t.subViews=n.vmAlias?t[i].subViews:t.vm.subViews}}}angular.module("app.layout").directive("viewportLayout",e),e.$inject=["$state"]}(),function(){function e(){function e(e){var t=localStorage.getItem(e);return i(t)?angular.fromJson(t):t}function t(t,a){if("string"==typeof a)localStorage.setItem(t,a);else try{var n=angular.toJson(a);localStorage.setItem(t,n)}catch(i){localStorage.setItem(t,i)}return e(t)}function a(e){localStorage.removeItem(e)}function n(t){return e(t)?!0:!1}function i(e){try{JSON.parse(e)}catch(t){return!1}return!0}return{Get:e,Set:t,Remove:a,DoesExist:n}}angular.module("app.localStorage").factory("LocalStorageManager",e),e.$inject=[]}(),function(){function e(e,t){function a(t,a,n){return e.get(o+t,{params:a,ignoreLoadingBar:n})}function n(t,a,n){return e.post(o+t,a,n)}function i(t,a){return e.put(o+t,a)}function s(t){return e["delete"](o+t)}var o=t.api.url;return{Get:a,Post:n,Put:i,Delete:s}}function t(e,t,a,n,i,s){function o(){if(a.DoesExist(s.tokenKey)){var e=a.Get(s.tokenKey),t=new Date,n=new Date(e[".expires"]);if(!(t>n)){var i=e.token_type+" "+e.access_token;return i}console.log("Removing Token"),a.Remove(s.tokenKey)}return null}var r=this;r.request=function(e){var t=o();return e.headers.Authorization=t,e.headers["X-Tenant"]=n.api.xtenant,e},r.responseError=function(n){return 401!==n.status?503===n.status?(i.error("Sorry, the website is currently unavailable.  Please try again later."),t.reject(n)):(n.data&&n.data.error_description?i.error(n.data.error_description):n.data&&n.data.message&&i.error(n.data.message),t.reject(n)):(a.Remove(s.tokenKey),void e.$broadcast("unauthorized"))},r.response=function(e){return e}}angular.module("app.serviceManager").factory("ServiceManager",e).service("APIInterceptor",t),e.$inject=["$http","Constants"],t.$inject=["$rootScope","$q","LocalStorageManager","Constants","toastr","AppValues"]}(),function(){function e(e,t,a,n,i){function s(){o(),r().then(function(e){e?(h(),l(),c()):t.go("applications.list")})}function o(){b.subViews=[{icon:"icon-chart",name:"Charts",state:"dashboard.charts"},{icon:"icon-contact",name:"Maps",state:"dashboard.maps"}]}function r(){return n.GetHiddenModules().then(function(e){return-1===e.data.indexOf("dashboard")})}function l(){b.systems.options={scaleShowVerticalLines:!1,responsive:!0},b.time.options={scaleShowLabels:!0},b.energy.options={scaleShowLabels:!0}}function c(){u(),f(),v()}function d(e){"count"===e?f():"capacity"===e&&g()}function p(e){"count"===e?u():"capacity"===e&&m()}function u(){a.GetTotalInstallationsByMonth(b.dateRange).then(function(e){b.systems.labels=e.months,b.systems.data=e.data})}function m(){a.GetTotalCapacityByMonth(b.dateRange).then(function(e){b.systems.labels=e.months,b.systems.data=e.data})}function f(){a.GetTotalInstallationsByEnergySource().then(function(e){b.energy.labels=e.energySource,b.energy.data=e.data})}function g(){a.GetTotalCapacityByEnergySource().then(function(e){b.energy.labels=e.energySource,b.energy.data=e.data})}function v(){a.GetTimeInEachApplicationStatus().then(function(e){b.time.labels=e.status,b.time.data=e.timeInStatus})}function h(){if(!b.dateRange){var t=new Date,a=new Date;a.setMonth(a.getMonth()-12),b.dateRange={startDate:e("date")(a,"YYY-MM-DD"),endDate:e("date")(t,"YYY-MM-DD")}}return b.dateRange}var b=this;b.systems={},b.time={},b.energy={},s(),b.updateByMonth=p,b.updateByEnergySource=d}angular.module("app.dashboard").controller("Dashboard",e),e.$inject=["$filter","$state","DashboardManager","AccountManager","Constants"]}(),function(){function e(e,t,a){function n(e){var t="/api/dashboard/systemcounts",a="systemCount";return s(t,a)}function i(e){var t="/api/dashboard/capacity",a="capacity";return s(t,a)}function s(e,n){var i={filter:"SubmitMonth"};return t.Get(e,i).then(function(e){var e=e.data,t=a.pluck(e.data,"filterName"),i=a.pluck(e.data,n);return{months:t,data:[i]}})}function o(e){var t="/api/dashboard/systemcounts",a="systemCount";return l(t,a)}function r(e){var t="/api/dashboard/capacity",a="capacity";return l(t,a)}function l(e,n){var i={filter:"EnergySource"};return t.Get(e,i).then(function(e){var e=e.data,t=a.pluck(e.data,"filterName"),i=a.pluck(e.data,n);return{energySource:t,data:i}})}function c(){var t=e.defer(),n={data:[{status:"Submitted",percentageOfTime:15},{status:"Payment Received",percentageOfTime:15},{status:"In Completeness Review",percentageOfTime:15},{status:"In Technical Review",percentageOfTime:15},{status:"Approved",percentageOfTime:20},{status:"Completed",percentageOfTime:20}]},i=a.pluck(n.data,"status"),s=a.pluck(n.data,"percentageOfTime"),o={status:i,timeInStatus:s};return t.resolve(o),t.promise}return{GetTotalInstallationsByMonth:n,GetTotalCapacityByMonth:i,GetTotalInstallationsByEnergySource:o,GetTotalCapacityByEnergySource:r,GetTimeInEachApplicationStatus:c}}angular.module("app.dashboard").service("DashboardManager",e),e.$inject=["$q","ServiceManager","_"]}(),function(){function e(e,t,a,n){function i(){s().then(function(e){return e?void 0:void $state.go("applications.list")})}function s(){return t.GetHiddenModules().then(function(e){return-1===e.data.indexOf("maps")})}var o=this,r=6;i(),a.then(function(t){o.options={scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,zoomControl:!0,mapTypeControl:!0,streetViewControl:!0},e.GetSystemLocations().then(function(e){var t=[];o.pointMarkers=[];var a,n,i=new google.maps.LatLngBounds,s=new google.maps.Size(1,1),l={url:"images/marker.png",scaledSize:s};angular.forEach(e.data,function(e,s){e.latitude&&e.longitude&&0!==e.latitude&&0!==e.longitude&&e.nameplateCapacity&&0!==e.nameplateCapacity&&e.energySourceId&&(a="icon-"+e.energySourceId+" map-icon",o.pointMarkers.push({id:e.id,latitude:e.latitude,longitude:e.longitude,title:e.energySourceId,options:{labelAnchor:"5 10",labelClass:a,icon:l}}),n=new google.maps.LatLng(e.latitude,e.longitude),t.push({location:n,weight:e.nameplateCapacity}),i.extend(n))});var c=i.getCenter();o.heatlayer={center:{latitude:c.A,longitude:c.F},zoom:r,heatLayerCallback:function(e){var a=new google.maps.MVCArray(t);e.setData(a)}},o.pointMap={center:{latitude:c.A,longitude:c.F},zoom:r,options:o.options}})})}angular.module("app.maps").controller("Map",e),e.$inject=["MapManager","AccountManager","uiGmapGoogleMapApi","_"]}(),function(){function e(e){function t(){var t="/api/systems/locations";return e.Get(t).then(function(e){return e.data})}return{GetSystemLocations:t}}angular.module("app.maps").service("MapManager",e),e.$inject=["ServiceManager"]}(),function(){function e(e,t,a){function n(){}var i=this,s=t.staticText.landingVideoUrl+"?modestbranding=1&autohide=1&showinfo=0&controls=0&subtlebranding=0";i.landingVideoUrl=e.trustAsResourceUrl(s),i.utility=a.Name,n()}angular.module("app.landing").controller("Landing",e),e.$inject=["$sce","Constants","UiValues"]}(),function(){function e(e,t,a,n,i,s){function o(){r(),l()}function r(){a.RegistrationMessage?(u.message=a.RegistrationMessage,a.RegistrationMessage=""):t.params&&t.params.confirmed&&(u.message=i.staticText.successfulRegister)}function l(){n.DoesExist(s.tokenKey)&&d()}function c(){u.loggingIn=!0,a.LoginUser(u.login).then(function(e){n.Set(s.tokenKey,e.data),d(),p()})}function d(){a.GetAccount().then(function(){u.loggingIn=!1,t.go("applications.list")})}function p(){u.userLoginModel={}}var u=this;u.loginUser=c,u.loggingIn=!1,o()}angular.module("app.login").controller("Login",e),e.$inject=["$scope","$state","AccountManager","LocalStorageManager","Constants","AppValues"]}(),function(){function e(e,t,a,n){function i(){}function s(){e.forgotPasswordFrm.$valid&&a.ForgotPassword(c.forgotPasswordModel).then(o,r)}function o(e){a.RegistrationMessage=e.data.message,t.go("login")}function r(e){c.msgClass="alert-danger",c.msg=e.data.message,403===e.status&&(c.showReconfirm=!0)}function l(){a.ResendEmailConfirmation(c.forgotPasswordModel).then(function(e){n.success("Confirmation email was re-sent to "+c.forgotPasswordModel.Email)})}var c=this;c.forgotPasswordModel={},c.msg="",c.forgotPassword=s,c.reconfirm=l,i()}angular.module("app.forgotPassword").controller("ForgotPassword",e),e.$inject=["$scope","$state","AccountManager","toastr"]}(),function(){function e(e){function t(t){var a="/api/account/forgotpassword";return e.Post(a,t)}return{ForgotPassword:t}}angular.module("app.forgotPassword").factory("ForgotPasswordManager",e),e.$inject=["ServiceManager"]}(),function(){function e(e,t,a,n,i){function s(){o()}function o(){t.params&&t.params.newAccount&&(u.message=i.staticText.newAccount)}function r(){e.resetPasswordFrm.$valid?a.ResetPassword(u.resetPasswordModel).then(l,c):n.error("The passwords do not match!")}function l(e){u.msgClass="alert-success",a.RegistrationMessage=e.data.message,p(),t.go("login")}function c(e){u.msgClass="alert-danger",u.msg=e.data.message}function d(){u.resetPasswordModel.newPassword&&u.resetPasswordModel.confirmPassword&&u.resetPasswordModel.newPassword!==u.resetPasswordModel.confirmPassword&&n.error("The passwords do not match!")}function p(){u.resetPasswordModel={},e.resetPasswordFrm.$setPristine(),e.resetPasswordFrm.$setUntouched()}var u=this;u.resetPasswordModel={},u.busy=!1,u.msg="",u.resetPasswordModel.userId=t.params.userId,u.resetPasswordModel.code=encodeURIComponent(t.params.code),u.checkPasswordMatch=d,u.resetPassword=r,s()}angular.module("app.resetPassword").controller("ResetPassword",e),e.$inject=["$scope","$state","AccountManager","toastr","Constants"]}(),function(){function e(e,t,a,n,i,s){function o(){r()}function r(){a.GetPublicRoles().then(function(e){u.publicRoles=e.data})}function l(){u.submitting=!0,a.RegisterUser(u.userRegModel).then(c,d)}function c(e){u.submitting=!1,i.success(e.data.message),a.RegistrationMessage=e.data.message,t.go("login")}function d(e){u.submitting=!1,i.error(response.data.message)}function p(){u.userRegModel.Email&&a.ValidateEmail({Email:u.userRegModel.Email}).then(function(t){e.registerFrm.email.$setValidity("isExist",!0)},function(t){e.registerFrm.email.$setValidity("isExist",!1)})}var u=this;u.registerText=s.where(n.Links,{Type:"registration"}),u.registerUser=l,u.validateEmail=p,u.submitting=!1,u.userRegModel={roles:[]},u.msg="",o()}angular.module("app.registration").controller("Registration",e).filter("field",function(){return function(e,t){var a="";return angular.forEach(e,function(e){e.LinkId===t&&(a=e.Text)}),a}}),e.$inject=["$scope","$state","AccountManager","UiValues","toastr","_"]}(),function(){function e(e,t,a){function n(){i(),s()}function i(){e.Get().then(function(e){o.typeStatuses=e.data})}function s(){o.helpText=a.where(t.Links,{Type:"help",LinkId:"regulations"})[0]}var o=this;o.title="Help",o.typeStatuses={},n()}angular.module("app.help").controller("Help",e),e.$inject=["HelpManager","UiValues","_"]}(),function(){function e(e){function t(){var t="/api/applications/types";return e.Get(t).then(function(e){return e.data})}return{Get:t}}angular.module("app.help").factory("HelpManager",e),e.$inject=["ServiceManager"]}(),function(){function e(e,t,a,n,i){function s(){o(),l(),c(),p(),f()}function o(){v.subViews=[{icon:"icon-user",name:"Account",state:"settings.account"},{icon:"icon-password",name:"Password",state:"settings.password"},{icon:"icon-contact",name:"Contact",state:"settings.contact"},{icon:"icon-preferences",name:"Preferences",state:"settings.preferences"}]}function r(){var a=v["new"]||v.account;t.UpdateSettings(a).then(function(){e.$emit("accountUpdated"),n.success("Your settings have been updated.")})}function l(){t.GetAccount().then(function(e){v.account=e,"string"!=typeof e.roles[0]&&(v.account.roleRepresentations=e.roles),"string"!=typeof e.roles[0]&&(v.account.roles=i.pluck(e.roles,"id")),e.isExternal||d(),v["new"]=angular.copy(v.account),v["static"]=angular.copy(v.account)})}function c(){t.GetPublicRoles().then(function(e){v.publicRoles=e.data,v.publicRoleNames=i.pluck(v.publicRoles,"name")})}function d(){t.GetSPOCRoles().then(function(e){v.SPOCRoles=e.data})}function p(){v.states=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jesery","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"]}function u(){t.ChangePassword(v.passwords).then(function(e){n.success("Your password has been updated.")})}function m(){return i.intersection(v.SPOCRoles,v.account.roles).length>0}function f(){i.values(v["new"])!==i.values(v["static"])&&(v["new"]=angular.copy(v.account))}function g(){t.ResendConfirmationToCurrentUser().then(function(){n.success("Email Sent!")})}var v=this;v.updateSettings=r,v.changePassword=u,v.userIsSPOC=m,v.checkFields=f,v.resendEmailConfirmation=g,v.settings={},v.account={},v["new"]={},v.publicRoles={},v.SPOCRoles={},v.passwords={},v.states={},v.passwordExpirationDaysThreshold=a.appValues.passwordExpirationDaysThreshold,v.vpHeadingTemplate="app/settings/settings.heading.html",s()}angular.module("app.settings").controller("Settings",e),e.$inject=["$scope","AccountManager","Constants","toastr","_"]}(),function(){angular.module("app.aside",[]).directive("aside",function(){return{restrict:"EA",scope:"=",compile:function(e,t){var a=t.title||"Insert Title Here",n=t.state||"",i=t.content?t.content:"",s=t.template?"'"+t.template+"'":"",o='<div class="aside left" tabindex="-1" role="dialog" style="display: block;"><div class="aside-dialog"> <div class="aside-content"> <div class="aside-header"><button class="btn btn-lg btn-clear aside-title" ui-sref="'+n+'">'+a+'</button> <button type="button" class="btn btn-md btn-clear pull-right" ng-click="coreVM.asideCollapsed = !coreVM.asideCollapsed">&#8672;</button> </div> <div class="aside-body"> <div ng-bind-html="'+i+'"></div> <div ng-include="'+s+'"></div> </div> <div class="aside-footer"></div> </div> </div> </div>';e.append(o)}}})}(),function(){function e(){function e(e){var t={},a=new Date;switch(e){case"YTD":return t.endDate=a.GetStringFormat("YYY-MM-DD"),void(t.startDate=new Date(a.getYear(),1,1).GetStringFormat("YYY-MM-DD"));case"six-months":return t.endDate=a,a.setMonth(a.getMonth()-6),void(t.startDate=a.GetStringFormat("YYY-MM-DD"));case"twelve-months":
return t.endDate=a.get,a.setMonth(a.getMonth()-12),void(t.startDate=a.GetStringFormat("YYY-MM-DD"))}return t}return{restrict:"E",controller:["$scope",function(t){var a=t.vm;a.updateChart=function(t){$(t.currentTarget).children().removeClass("active"),$(t.target).addClass("active");var n=t.target.getAttribute("id");a.dateRange=e(n)}}],templateUrl:"app/widgets/date-range-selector/date-range-selector.html"}}angular.module("app.dateRangeSelect",[]).directive("dateRangeSelector",e)}(),function(){angular.module("app.fileUpload").directive("fileUploadFull",["FileUploader","FileUploadManager",function(e,t){return{restrict:"EA",scope:{FileType:"=",Files:"="},templateUrl:"app/widgets/file_uploader/file_uploader_full.html",controller:"FileUpload",link:function(e,t,a){e.fileType=a.fileType}}}])}(),function(){angular.module("app.fileUpload").directive("fileUpload",["$modal","FileUploader","FileUploadManager","FilesManager","toastr",function(e,t,a,n,s){return{restrict:"EA",scope:{fileType:"=",fileKey:"=",ngModel:"=",btnOnly:"="},template:'<input type="file" nv-file-select uploader="vm.uploader" id="{{fileId}}" class="pull-left input-file" /><div ng-class="{\'input-group\': !btnOnly || (btnOnly && fileUploaded)}"><span ng-class="{\'input-group-btn\': !btnOnly}" ng-if="!fileUploaded"><button class="btn btn-default" ng-click="vm.uploadFileInEditor(fileId, fileType, btnOnly)" type="button"><i class="icon-upload"></i> {{vm.buttonText || \'Upload File\'}}</button></span><span class="input-group-addon" ng-show="fileUploaded"><i class="icon-files"></i> Uploaded</span><input ng-show="!btnOnly || fileUploaded" type="text" class="form-control" value="{{ngModel ? ngModel : vm.placeholder}}" ng-class="{\'uploaded\': ngModel}"><span class="input-group-btn" ng-if="fileUploaded && !btnOnly"><button class="btn btn-default" type="button" ng-click="vm.confirmFileDelete()"><i class="icon-delete"></i> Delete File</button></span></div>',controller:"Files as vm",link:function(e,t,a){function n(){if(e.btnOnly)e.fileId=e.fileKey;else for(e.fileId="",i=0;i<e.fileKey.length;i++)0===i?e.fileId=e.fileKey[i]:e.fileId+="."+e.fileKey[i]}function s(){e.ngModel?e.fileUploaded=!0:e.fileUploaded=!1}function o(){e.$on("fileChanged",function(t,a){document.getElementById(e.fileId).value=null,"uploaded"==a.changeType?(e.ngModel=a.fileName,e.fileUploaded=!0):"deleted"==a.changeType&&(!a.fileId||a.fileName==e.ngModel&&a.fileId!=e.fileId)&&(e.ngModel=void 0,e.fileUploaded=!1)})}n(),s(),o()}}}])}(),function(){function e(e,t,a,n){function i(){l.fileTypes={},s(),l.fileItem={file:{fileType:{}}},l.uploader=new a({}),l.uploader.uploadItem=o,l.uploader.uploadAll=r,l.uploader.onBeforeUploadItem=function(e){l.fileItem=e}}function s(){t.GetFileTypes().then(function(e){l.fileTypes=e.data})}function o(a){t.UploadFile(a).success(function(t){a.isSuccess=!0,e.$emit("getFiles"),a.remove()})}function r(){n.each(l.uploader.queue,function(e){o(e)})}var l=this;i()}angular.module("app.fileUpload").controller("FileUpload",e),e.$inject=["$scope","FileUploadManager","FileUploader","_"]}(),function(){"use strict";function e(e,t){function a(){var e="/api/applications/filetypes";return t.Get(e,!0).then(function(e){return e.data})}function n(a,n){var i=n||"/api/applications/"+e.GetCurrentApplicationId()+"/files?fileName="+a.file.name+"&fileMimeType="+a.file.type+"&fileTypeId=";a.file.fileType&&(i+=a.file.fileType.id),a.file.notes&&(i=i+"&notes="+a.file.notes);var s=new FormData;return s.append("file",a._file),t.Post(i,s,{transformRequest:angular.identity,headers:{"Content-Type":void 0}})}var i={GetFileTypes:a,UploadFile:n};return i}angular.module("app.fileUpload").factory("FileUploadManager",e),e.$inject=["ApplicationsManager","ServiceManager"]}(),function(){angular.module("app.formBuilder",[]).directive("checkboxTextboxSwitcher",function(){var e=function(e,t,a){var n=a.value;"true"===n?t.html('<input ng-model="'+a.ngModel+'" type="checkbox" checked>'):"false"===n?t.html('<input ng-model="'+a.ngModel+'" type="checkbox">'):t.html('<input class="form-control" ng-model="'+a.ngModel+'" type="number" value="'+n+'"">')};return{restrict:"E",require:"ngModel",link:e,scope:"="}})}(),function(){function e(){function e(e,t,a){for(var n=e.split("."),i=t,s=0;s<n.length;s++)s+1==n.length?i[n[s]]=a:(i[n[s]]||(i[n[s]]={}),i=i[n[s]]);return i}return{SetValueOnObjectFromStringProperty:e}}angular.module("jsUtils",[]).factory("jsUtils",e)}(),function(){function e(){function e(e){var t="object"!=typeof e?JSON.parse(e):e,a="",n="";for(var i in t[0])n+=i+",";n=n.slice(0,-1),a+=n+"\r\n";for(var s=0;s<t.length;s++){var n="";for(var i in t[s]){var o=t[s][i]||"";n+='"'+o+'",'}n.slice(0,n.length-1),a+=n+"\r\n"}if(""==a)return void alert("Invalid data");var r="data:text/csv;charset=utf-8,"+escape(a);return r}var t={convert:e};return t}angular.module("app.jsonToCsvConvert",[]).factory("JsonToCsvConverter",e),e.$inject=[]}(),function(){function e(){return{restrict:"E",compile:function(e,t){var a=t["class"]?t["class"]:"",n='<p class="loading-indicator lead '+a+'" ng-hide="'+t.ngHide+'"><i class="icon-refresh icon-spin"></i> Loading</p>';e.replaceWith(n)}}}angular.module("app.loadingIndicator",[]).directive("loadingIndicator",e)}(),function(){function e(){return{require:"ngInclude",restrict:"A",link:function(e,t,a){t.replaceWith(t.children())}}}angular.module("app.includeReplace",[]).directive("includeReplace",e)}(),function(){function e(){return{restrict:"E",compile:function(e,t){var a=t.pageName||t.page,n='<div class="flex-column"><h1 class="no-wrap"><i class="page-title-icon icon-'+t.page+'"></i> <span class="page-title">'+a+"</span></h1></div>";e.replaceWith(n)}}}angular.module("app.pageTitle",[]).directive("pageTitle",e)}(),function(){function e(){function e(e,t,a){e.$on("print",function(e,t){if(t){$("body").addClass("print-payment");$("#print-slip").clone().attr("id","print-slip-copy").appendTo("body");window.print(),$("body").removeClass("print-payment"),$("#print-slip-copy").remove(),window.scrollTo(0,document.body.scrollHeight)}else window.print()})}return{restrict:"A",link:e,scope:!1}}angular.module("app.print",[]).directive("print",e)}(),function(){function e(e){return{restrict:"A",controller:["$scope",function(e){e.spies=[],this.addSpy=function(t){e.spies.push(t)}}],link:function(t,a){var n;n=[],t.$watch(function(){var e=document.getElementById("applicationForm");return e?e.querySelector("fieldset input"):e},function(e,i){if(e!==i){var s,o,r,l;for(l=[],o=0,r=t.spies.length;r>o;o++)s=t.spies[o],n[s.id]&&0!==n[s.id].length||l.push(n[s.id]=a.find("#"+s.id));return l}}),$(e).scroll(function(){var a,i,s,o,r,l;for(a=null,l=t.spies,a=l[0],o=0,r=l.length;r>o;o++)if(s=l[o],s.out(),void 0!==n[s.id].offset()){var c=e.scrollY?e.scrollY:document.documentElement.scrollTop;(i=n[s.id].offset().top)-c<=100&&(s.pos=i,null===a&&(a=s),a.pos<s.pos&&(a=s))}return $(window).scrollTop()+$(window).height()>=$(document).height()&&(s.pos=i,a=s),null!==a?a["in"]():void 0})}}}function t(e,t,a){return{restrict:"A",require:"^scrollSpy",link:function(e,t,n,i){e.$watch(function(){return $("#sideNav .nav-status").attr("spy")},function(){t.click(function(){a.scrollTo($(t).attr("spy"))}),i.addSpy({id:n.spy,"in":function(){t.addClass("active")},out:function(){t.removeClass("active")}})})}}}angular.module("app.scrollspy").directive("scrollSpy",e).directive("spy",t),e.$inject=["$window"],t.$inject=["$location","$anchorScroll","anchorSmoothScroll"]}(),function(){angular.module("app.scrollspy").service("anchorSmoothScroll",function(){this.scrollTo=function(e){function t(){return self.pageYOffset?self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0}function a(e){for(var t=document.getElementById(e),a=t.offsetTop,n=t;n.offsetParent&&n.offsetParent!=document.body;)n=n.offsetParent,a+=n.offsetTop;return a}var n=95,i=t(),s=a(e)-n,o=s>i?s-i:i-s;if(100>o)return void scrollTo(0,s);var r=Math.round(o/100);r>=20&&(r=20);var l=Math.round(o/25),c=s>i?i+l:i-l,d=0;if(s>i)for(var p=i;s>p;p+=l)setTimeout("window.scrollTo(0, "+c+")",d*r),c+=l,c>s&&(c=s),d++;else for(var p=i;p>s;p-=l)setTimeout("window.scrollTo(0, "+c+")",d*r),c-=l,s>c&&(c=s),d++}})}(),function(){function e(){return{restrict:"A",scope:{},link:function(e,t){e.$on("$stateChangeStart",function(e,a){t.parents("[ui-view]").length===a.name.split(".").length-1&&t.addClass("loading-state")}),e.$on("$viewContentLoaded",function(){t.removeClass("loading-state")})}}}angular.module("app.stateLoader",[]).directive("stateLoader",e)}(),angular.module("app").run(["$templateCache",function(e){e.put("app/StyleGuide.html",'<nav class="navbar navbar-inverse navbar-fixed-top"><div class=container><div class=navbar-header><button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target=#navbar aria-expanded=false aria-controls=navbar><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand href=#>Bootstrap theme</a></div><div id=navbar class="navbar-collapse collapse"><ul class="nav navbar-nav"><li class=active><a href=#>Home</a></li><li><a href=#about>About</a></li><li><a href=#contact>Contact</a></li><li class=dropdown><a href=# class=dropdown-toggle data-toggle=dropdown role=button aria-expanded=false>Dropdown <span class=caret></span></a><ul class=dropdown-menu role=menu><li><a href=#>Action</a></li><li><a href=#>Another action</a></li><li><a href=#>Something else here</a></li><li class=divider></li><li class=dropdown-header>Nav header</li><li><a href=#>Separated link</a></li><li><a href=#>One more separated link</a></li></ul></li></ul></div></div></nav><div class="container theme-showcase" role=main><div class=jumbotron><h1>Theme example</h1><p>This is a template showcasing the optional theme stylesheet included in Bootstrap. Use it as a starting point to create something more unique by building on or modifying it.</p></div><div class=page-header><h1>Text Styles</h1></div><h1>Heading 1 (h1)</h1><h2>Heading 2 (h2)</h2><h3>Heading 3 (h3)</h3><h4>Heading 4 (h4)</h4><h5>Heading 5 (h5)</h5><p>Paragraph (p)</p><div class=page-header><h1>Buttons</h1></div><p><button type=button class="btn btn-lg btn-default">Default</button> <button type=button class="btn btn-lg btn-primary">Primary</button> <button type=button class="btn btn-lg btn-success">Success</button> <button type=button class="btn btn-lg btn-info">Info</button> <button type=button class="btn btn-lg btn-warning">Warning</button> <button type=button class="btn btn-lg btn-danger">Danger</button> <button type=button class="btn btn-lg btn-link">Link</button></p><p><button type=button class="btn btn-default">Default</button> <button type=button class="btn btn-primary">Primary</button> <button type=button class="btn btn-success">Success</button> <button type=button class="btn btn-info">Info</button> <button type=button class="btn btn-warning">Warning</button> <button type=button class="btn btn-danger">Danger</button> <button type=button class="btn btn-link">Link</button></p><p><button type=button class="btn btn-sm btn-default">Default</button> <button type=button class="btn btn-sm btn-primary">Primary</button> <button type=button class="btn btn-sm btn-success">Success</button> <button type=button class="btn btn-sm btn-info">Info</button> <button type=button class="btn btn-sm btn-warning">Warning</button> <button type=button class="btn btn-sm btn-danger">Danger</button> <button type=button class="btn btn-sm btn-link">Link</button></p><p><button type=button class="btn btn-xs btn-default">Default</button> <button type=button class="btn btn-xs btn-primary">Primary</button> <button type=button class="btn btn-xs btn-success">Success</button> <button type=button class="btn btn-xs btn-info">Info</button> <button type=button class="btn btn-xs btn-warning">Warning</button> <button type=button class="btn btn-xs btn-danger">Danger</button> <button type=button class="btn btn-xs btn-link">Link</button></p><div class=page-header><h1>Tables</h1></div><div class=row><div class=col-md-6><table class=table><thead><tr><th>#</th><th>First Name</th><th>Last Name</th><th>Username</th></tr></thead><tbody><tr><td>1</td><td>Mark</td><td>Otto</td><td>@mdo</td></tr><tr><td>2</td><td>Jacob</td><td>Thornton</td><td>@fat</td></tr><tr><td>3</td><td>Larry</td><td>the Bird</td><td>@twitter</td></tr></tbody></table></div><div class=col-md-6><table class="table table-striped"><thead><tr><th>#</th><th>First Name</th><th>Last Name</th><th>Username</th></tr></thead><tbody><tr><td>1</td><td>Mark</td><td>Otto</td><td>@mdo</td></tr><tr><td>2</td><td>Jacob</td><td>Thornton</td><td>@fat</td></tr><tr><td>3</td><td>Larry</td><td>the Bird</td><td>@twitter</td></tr></tbody></table></div></div><div class=row><div class=col-md-6><table class="table table-bordered"><thead><tr><th>#</th><th>First Name</th><th>Last Name</th><th>Username</th></tr></thead><tbody><tr><td rowspan=2>1</td><td>Mark</td><td>Otto</td><td>@mdo</td></tr><tr><td>Mark</td><td>Otto</td><td>@TwBootstrap</td></tr><tr><td>2</td><td>Jacob</td><td>Thornton</td><td>@fat</td></tr><tr><td>3</td><td colspan=2>Larry the Bird</td><td>@twitter</td></tr></tbody></table></div><div class=col-md-6><table class="table table-condensed"><thead><tr><th>#</th><th>First Name</th><th>Last Name</th><th>Username</th></tr></thead><tbody><tr><td>1</td><td>Mark</td><td>Otto</td><td>@mdo</td></tr><tr><td>2</td><td>Jacob</td><td>Thornton</td><td>@fat</td></tr><tr><td>3</td><td colspan=2>Larry the Bird</td><td>@twitter</td></tr></tbody></table></div></div><div class=page-header><h1>Labels</h1></div><h1><span class="label label-default">Default</span> <span class="label label-primary">Primary</span> <span class="label label-success">Success</span> <span class="label label-info">Info</span> <span class="label label-warning">Warning</span> <span class="label label-danger">Danger</span></h1><h2><span class="label label-default">Default</span> <span class="label label-primary">Primary</span> <span class="label label-success">Success</span> <span class="label label-info">Info</span> <span class="label label-warning">Warning</span> <span class="label label-danger">Danger</span></h2><h3><span class="label label-default">Default</span> <span class="label label-primary">Primary</span> <span class="label label-success">Success</span> <span class="label label-info">Info</span> <span class="label label-warning">Warning</span> <span class="label label-danger">Danger</span></h3><h4><span class="label label-default">Default</span> <span class="label label-primary">Primary</span> <span class="label label-success">Success</span> <span class="label label-info">Info</span> <span class="label label-warning">Warning</span> <span class="label label-danger">Danger</span></h4><h5><span class="label label-default">Default</span> <span class="label label-primary">Primary</span> <span class="label label-success">Success</span> <span class="label label-info">Info</span> <span class="label label-warning">Warning</span> <span class="label label-danger">Danger</span></h5><h6><span class="label label-default">Default</span> <span class="label label-primary">Primary</span> <span class="label label-success">Success</span> <span class="label label-info">Info</span> <span class="label label-warning">Warning</span> <span class="label label-danger">Danger</span></h6><p><span class="label label-default">Default</span> <span class="label label-primary">Primary</span> <span class="label label-success">Success</span> <span class="label label-info">Info</span> <span class="label label-warning">Warning</span> <span class="label label-danger">Danger</span></p><div class=page-header><h1>Badges</h1></div><p><a href=#>Inbox <span class=badge>42</span></a></p><ul class="nav nav-pills" role=tablist><li role=presentation class=active><a href=#>Home <span class=badge>42</span></a></li><li role=presentation><a href=#>User</a></li><li role=presentation><a href=#>Messages <span class=badge>3</span></a></li></ul><div class=page-header><h1>Dropdown menus</h1></div><div class="dropdown theme-dropdown clearfix"><a id=dropdownMenu1 href=# class="sr-only dropdown-toggle" data-toggle=dropdown role=button aria-expanded=false>Dropdown <span class=caret></span></a><ul class=dropdown-menu role=menu aria-labelledby=dropdownMenu1><li class=active role=presentation><a role=menuitem tabindex=-1 href=#>Action</a></li><li role=presentation><a role=menuitem tabindex=-1 href=#>Another action</a></li><li role=presentation><a role=menuitem tabindex=-1 href=#>Something else here</a></li><li role=presentation class=divider></li><li role=presentation><a role=menuitem tabindex=-1 href=#>Separated link</a></li></ul></div><div class=page-header><h1>Navs</h1></div><ul class="nav nav-tabs" role=tablist><li role=presentation class=active><a href=#>Home</a></li><li role=presentation><a href=#>User</a></li><li role=presentation><a href=#>Messages</a></li></ul><ul class="nav nav-pills" role=tablist><li role=presentation class=active><a href=#>Home</a></li><li role=presentation><a href=#>User</a></li><li role=presentation><a href=#>Messages</a></li></ul><div class=page-header><h1>Navbars</h1></div><nav class="navbar navbar-default"><div class=container><div class=navbar-header><button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target=.navbar-collapse><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand href=#>Project name</a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav"><li class=active><a href=#>Home</a></li><li><a href=#about>About</a></li><li><a href=#contact>Contact</a></li><li class=dropdown><a href=# class=dropdown-toggle data-toggle=dropdown role=button aria-expanded=false>Dropdown <span class=caret></span></a><ul class=dropdown-menu role=menu><li><a href=#>Action</a></li><li><a href=#>Another action</a></li><li><a href=#>Something else here</a></li><li class=divider></li><li class=dropdown-header>Nav header</li><li><a href=#>Separated link</a></li><li><a href=#>One more separated link</a></li></ul></li></ul></div></div></nav><nav class="navbar navbar-inverse"><div class=container><div class=navbar-header><button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target=.navbar-collapse><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand href=#>Project name</a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav"><li class=active><a href=#>Home</a></li><li><a href=#about>About</a></li><li><a href=#contact>Contact</a></li><li class=dropdown><a href=# class=dropdown-toggle data-toggle=dropdown role=button aria-expanded=false>Dropdown <span class=caret></span></a><ul class=dropdown-menu role=menu><li><a href=#>Action</a></li><li><a href=#>Another action</a></li><li><a href=#>Something else here</a></li><li class=divider></li><li class=dropdown-header>Nav header</li><li><a href=#>Separated link</a></li><li><a href=#>One more separated link</a></li></ul></li></ul></div></div></nav><div class=page-header><h1>Alerts</h1></div><div class="alert alert-success" role=alert><strong>Well done!</strong> You successfully read this important alert message.</div><div class="alert alert-info" role=alert><strong>Heads up!</strong> This alert needs your attention, but it\'s not super important.</div><div class="alert alert-warning" role=alert><strong>Warning!</strong> Best check yo self, you\'re not looking too good.</div><div class="alert alert-danger" role=alert><strong>Oh snap!</strong> Change a few things up and try submitting again.</div><div class=page-header><h1>Progress bars</h1></div><div class=progress><div class=progress-bar role=progressbar aria-valuenow=60 aria-valuemin=0 aria-valuemax=100 style="width: 60%;"><span class=sr-only>60% Complete</span></div></div><div class=progress><div class="progress-bar progress-bar-success" role=progressbar aria-valuenow=40 aria-valuemin=0 aria-valuemax=100 style="width: 40%"><span class=sr-only>40% Complete (success)</span></div></div><div class=progress><div class="progress-bar progress-bar-info" role=progressbar aria-valuenow=20 aria-valuemin=0 aria-valuemax=100 style="width: 20%"><span class=sr-only>20% Complete</span></div></div><div class=progress><div class="progress-bar progress-bar-warning" role=progressbar aria-valuenow=60 aria-valuemin=0 aria-valuemax=100 style="width: 60%"><span class=sr-only>60% Complete (warning)</span></div></div><div class=progress><div class="progress-bar progress-bar-danger" role=progressbar aria-valuenow=80 aria-valuemin=0 aria-valuemax=100 style="width: 80%"><span class=sr-only>80% Complete (danger)</span></div></div><div class=progress><div class="progress-bar progress-bar-striped" role=progressbar aria-valuenow=60 aria-valuemin=0 aria-valuemax=100 style="width: 60%"><span class=sr-only>60% Complete</span></div></div><div class=progress><div class="progress-bar progress-bar-success" style="width: 35%"><span class=sr-only>35% Complete (success)</span></div><div class="progress-bar progress-bar-warning" style="width: 20%"><span class=sr-only>20% Complete (warning)</span></div><div class="progress-bar progress-bar-danger" style="width: 10%"><span class=sr-only>10% Complete (danger)</span></div></div><div class=page-header><h1>List groups</h1></div><div class=row><div class=col-sm-4><ul class=list-group><li class=list-group-item>Cras justo odio</li><li class=list-group-item>Dapibus ac facilisis in</li><li class=list-group-item>Morbi leo risus</li><li class=list-group-item>Porta ac consectetur ac</li><li class=list-group-item>Vestibulum at eros</li></ul></div><div class=col-sm-4><div class=list-group><a href=# class="list-group-item active">Cras justo odio</a> <a href=# class=list-group-item>Dapibus ac facilisis in</a> <a href=# class=list-group-item>Morbi leo risus</a> <a href=# class=list-group-item>Porta ac consectetur ac</a> <a href=# class=list-group-item>Vestibulum at eros</a></div></div><div class=col-sm-4><div class=list-group><a href=# class="list-group-item active"><h4 class=list-group-item-heading>List group item heading</h4><p class=list-group-item-text>Donec id elit non mi porta gravida at eget metus. Maecenas sed diam eget risus varius blandit.</p></a> <a href=# class=list-group-item><h4 class=list-group-item-heading>List group item heading</h4><p class=list-group-item-text>Donec id elit non mi porta gravida at eget metus. Maecenas sed diam eget risus varius blandit.</p></a> <a href=# class=list-group-item><h4 class=list-group-item-heading>List group item heading</h4><p class=list-group-item-text>Donec id elit non mi porta gravida at eget metus. Maecenas sed diam eget risus varius blandit.</p></a></div></div></div><div class=page-header><h1>Panels</h1></div><div class=row><div class=col-sm-4><div class="panel panel-default"><div class=panel-heading><h3 class=panel-title>Panel title</h3></div><div class=panel-body>Panel content</div></div><div class="panel panel-primary"><div class=panel-heading><h3 class=panel-title>Panel title</h3></div><div class=panel-body>Panel content</div></div></div><div class=col-sm-4><div class="panel panel-success"><div class=panel-heading><h3 class=panel-title>Panel title</h3></div><div class=panel-body>Panel content</div></div><div class="panel panel-info"><div class=panel-heading><h3 class=panel-title>Panel title</h3></div><div class=panel-body>Panel content</div></div></div><div class=col-sm-4><div class="panel panel-warning"><div class=panel-heading><h3 class=panel-title>Panel title</h3></div><div class=panel-body>Panel content</div></div><div class="panel panel-danger"><div class=panel-heading><h3 class=panel-title>Panel title</h3></div><div class=panel-body>Panel content</div></div></div></div><div class=page-header><h1>Wells</h1></div><div class=well><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas sed diam eget risus varius blandit sit amet non magna. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Cras mattis consectetur purus sit amet fermentum. Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit. Aenean lacinia bibendum nulla sed consectetur.</p></div></div>'),e.put("app/admin/admin.html","<viewport-layout></viewport-layout>"),e.put("app/application/application.add.modal.help.html",'<div class=popover id=app-type><div class=arrow></div><div class=popover-title><h5 class=no-margin-top>How long is the Interconnection review process?</h5><span>Each level of Interconnection has a different review process time set by the Illinois Commerce Commission (ICC) regulations:</span></div><div class="popover-content popover-list"><div class="list-group no-margin"><div class=list-group-item ng-repeat="type in modalVM.appTypes" ng-if=type.helpText><strong>{{type.name}}</strong> - {{type.helpText}}</div></div></div><div class=popover-footer><span ng-bind=modalVM.helpText.PreText></span> <a ng-href={{modalVM.helpText.LinkHref}} target=_blank class=strong>{{modalVM.helpText.Text}}</a> <span ng-bind=modalVM.helpText.PostText></span></div></div>'),e.put("app/application/application.add.modal.html",'<div ng-controller="NewApplication as modalVM" class=add-application-modal><div class=modal-header><h3 class=modal-title>New Application</h3></div><div class=modal-body><div class=form-section ng-show=modalVM.locations><div ng-class="{\'form-group\': modalVM.locations.length > 0}"><label>System <small>Start an application for:</small></label><div class="btn-group btn-group-justified" ng-if="modalVM.locations.length > 0"><label class="btn btn-default" ng-change=modalVM.locationTypeSelected() ng-model=modalVM.isNew btn-radio=false>An existing system</label> <label class="btn btn-default" ng-change=modalVM.locationTypeSelected() ng-model=modalVM.isNew btn-radio=true>A new system</label></div></div><div ng-show="modalVM.isNew===false" class=form-group><div class=form-section><button type=button class="btn btn-default" ng-model=modalVM.location data-html=1 bs-options="location as location.label for location in modalVM.locations | orderBy:\'fullAddress\'" bs-select placeholder="Select system" ng-change=modalVM.locationSelected()><span class=caret></span></button></div><div ng-show=modalVM.location><label>Customer</label> <input type=text class=form-control ng-model=modalVM.customerFullName ng-model-options="{ updateOn: \'blur\' }" placeholder="Full Name" name=CustomerName></div></div><div ng-show="modalVM.isNew===true" ng-cloak><form class=form><div class=form-group><input type=text class=form-control ng-model=modalVM.newStreet placeholder={{modalVM.addressLineOnePlaceholder}} ng-model-options="{ updateOn: \'blur\' }"></div><div class=form-group ng-if="modalVM.addressOnTwoLines == true"><input type=text class=form-control ng-model=modalVM.newStreet2 placeholder="Address Line 2" ng-model-options="{ updateOn: \'blur\' }"></div><div class="row form-section"><div class=col-xs-4><input type=text class=form-control ng-model=modalVM.newCity placeholder=City ng-model-options="{ updateOn: \'blur\' }"></div><div class=col-xs-4><input ng-if="modalVM.newStates.length===1" class=form-control ng-model=modalVM.newState ng-init="modalVM.newState = modalVM.newStates[0]" placeholder=modalVM.newStates[0] disabled><select ng-if="modalVM.newStates.length > 1" class=form-control ng-model=modalVM.newState><option selected disabled value>Select state</option><option ng-repeat="state in modalVM.newStates">{{state}}</option></select></div><div class=col-xs-4><form><input type=text class=form-control ng-model=modalVM.newZip placeholder=ZIP ng-change=modalVM.showErrorIfInvalidZip() ng-model-options="{ updateOn: \'blur\' }"></form></div></div><label>Customer</label><div class=form-group><input name=CustomerName type=text class=form-control ng-model=modalVM.customerFullName ng-model-options="{ updateOn: \'blur\' }" placeholder="Full Name"></div></form></div></div><div ng-cloak class=form-section ng-show="modalVM.location || modalVM.isNew"><label ng-cloak>Application Type <i class=icon-help-circle data-template=app/application/application.add.modal.help.html data-trigger=click auto-close=true bs-popover></i></label><div class="btn-group btn-group-justified" ng-model=modalVM.appType><a class="btn wrap valign-top" ng-click=modalVM.appTypeSelected(type.id) ng-class="modalVM.appType==type.id ? \'btn-primary\' : \'btn-default\'" id={{type.id}} ng-repeat="type in modalVM.appTypes | orderBy:type.displayOrder"><strong>{{type.name}}</strong><p><small>{{type.detail}}</small></p></a></div></div><div ng-cloak class=form-section ng-show="modalVM.location || modalVM.appType"><div class=form-group><label>Energy Source</label><div ng-switch=modalVM.isNew><div ng-switch-when=false><input type=text class=form-control ng-model=modalVM.energySource.name disabled></div><div ng-switch-when=true><select ng-model=modalVM.energySource ng-options="source as source.name for source in modalVM.energySourceList" ng-select=modalVM.energySourceSelected() class=form-control><option disabled selected value>Select energy source</option></select></div></div></div></div></div><div class=modal-footer><div class=row><div class=col-xs-6><button class="btn btn-default btn-block" ng-click="vm.modalInstance.dismiss(\'cancel\')">Cancel</button></div><div class=col-xs-6><button class="btn btn-primary btn-block" ng-click=modalVM.startNewApplication()>Submit</button></div></div></div></div>'),e.put("app/application/application.delete.modal.html",'<div class=modal-header><h3 class=modal-title>Delete Application</h3></div><div class=modal-body><p>Are you sure you want to delete this application?</p><h4><div class=iconic><div class=iconic-icon><i class=icon-{{appVM.currentApplication.system.energySourceId}}></i></div><div class=iconic-text><div class=iconic-text-main>{{appVM.appType}}</div><div class="iconic-text-sub weak">{{appVM.appLocation}}</div></div></div></h4></div><div class=modal-footer><div class=row><div class=col-xs-6><button class="btn btn-default btn-block" ng-click="appVM.deleteModal.dismiss(\'cancel\')">No</button></div><div class=col-xs-6><button class="btn btn-primary btn-block" ng-click=appVM.deleteApplication()>Yes</button></div></div></div>'),e.put("app/application/application.heading.html",'<div class=flex-column><table class="table table-condensed table-valign-mid" print-table ng-cloak><tr><td class=hidden-xs><small>CUSTOMER</small></td><td>{{appVM.currentApplication.customerFullName}}</td></tr><tr><td class=hidden-xs><small>LOCATION</small></td><td nowrap><div bs-tooltip data-title={{appVM.appLocation}} data-container=body data-placement=bottom class=no-wrap>{{appVM.currentApplication.system.addressLineOne}}<span ng-show="appVM.currentApplication.system.addressLineOne && appVM.currentApplication.system.addressZIP" class="hidden-xs printRemove"><span class=pipe>|</span>{{appVM.currentApplication.system.addressZIP}}</span></div></td></tr></table></div><div class=flex-column><table class="table table-condensed table-valign-mid" print-table ng-cloak><tr><td class=hidden-xs><small>TYPE</small></td><td>{{appVM.currentApplication.typeName}}</td></tr><tr><td class=hidden-xs><small>SOURCE</small></td><td>{{appVM.currentApplication.system.energySourceName}}</td></tr></table></div><div class=flex-column><table class="table table-condensed table-valign-mid" print-table ng-cloak><tr class=status><td class=hidden-xs><small>STATUS</small></td><td>{{appVM.currentApplication.statusName}}</td></tr><tr class=owner ng-if="coreVM.user.isExternal===false"><td class=hidden-xs><small>OWNER</small></td><td>{{appVM.currentApplication.owner.fullName || appVM.currentApplication.ownerPlaceholder}}</td></tr><tr ng-if="appVM.currentApplication.statusAllowsApplicationEdits && appVM.currentApplication.userCanModifyApplication && coreVM.user.isExternal===true"><td colspan=2><span class="label label-md label-warning status"><i class=icon-edit></i><span>Edits Required</span></span></td></tr></table></div><div class="flex-column text-right no-wrap printRemove"><span class="btn-group no-wrap"><button ng-if="appVM.currentApplication.associatedApplicationId.length > -1" type=button class="btn btn-sm btn-default" ng-click=appsVM.setCurrentApplicationId(appVM.currentApplication.associatedApplicationId) ui-sref=application.status({applicationId:appVM.currentApplication.associatedApplicationId}) bs-tooltip data-title="View Associated Application" data-container=body data-placement=bottom><i class=icon-initial-application></i></button> <button ng-if="coreVM.user.isExternal===false && appVM.currentApplication.statusId && appVM.currentApplication.statusId!==\'Saved\'" type=button class="btn btn-sm btn-default" ng-click=appVM.openStatusChangeModal() bs-tooltip data-title="Change Status" data-container=body data-placement=bottom><i class=icon-status></i></button> <button ng-if="coreVM.user.isExternal===false && appVM.currentApplication.statusId && appVM.currentApplication.statusId!==\'Saved\'" type=button class="btn btn-sm btn-default" ng-click=appVM.openOwnerChangeModal() bs-tooltip data-title="Change Owner" data-container=body data-placement=bottom><i class=icon-user-utility></i></button> <button ng-if="appVM.currentApplication.statusAllowsApplicationEdits && appVM.currentApplication.userCanModifyApplication" type=button class="btn btn-sm btn-default" ui-sref="application.edit({applicationId: appVM.currentApplication.id})" bs-tooltip data-title="Edit Application" data-container=body data-placement=bottom><i class=icon-edit></i></button> <button ng-if="appVM.currentApplication.statusAllowsApplicationEdits && appVM.currentApplication.userCanModifyApplication && appVM.currentApplication.statusId!==\'MoreInformationRequired\'" type=button class="btn btn-sm btn-default" ng-click=appVM.confirmApplicationDelete() bs-tooltip data-title="Delete Application" data-container=body data-placement=bottom><i class=icon-delete></i></button></span></div>'),
e.put("app/application/application.html","<div ng-switch=coreVM.state><div id=body-container ng-switch-when=application.edit ng-if=\"coreVM.toState.name == 'application.edit'\"><div class=viewport><div class=viewport-body id=viewportBody ui-view></div></div></div><viewport-layout vm-alias=appVM ng-hide=\"coreVM.state=='application.edit'\" ng-switch-default></viewport-layout></div>"),e.put("app/applications/applications.html","<ui-view id=applications></ui-view>"),e.put("app/dashboard/dashboard.html","<viewport-layout></viewport-layout>"),e.put("app/help/help.html",'<div id=help ng-cloak><div id=main-header><page-title page=help page-name=Help></page-title></div><div id=body-container><div id=content-container-full><div class="panel panel-default" ng-if=vm.helpText><div class=panel-heading><div class=panel-title><h4>Regulations</h4></div></div><div class=panel-body><p><span ng-bind=vm.helpText.PreText></span> <a ng-href={{vm.helpText.LinkHref}} target=_blank class=strong>{{vm.helpText.Text}}</a> <span ng-bind=vm.helpText.PostText></span></p></div></div><div class="panel panel-default"><div class=panel-heading><div class=panel-title><h4>Status Descriptions <small>by Application Type</small></h4></div></div><div class="panel-body no-padding-top-bottom"><accordion><accordion-group class=panel-accordion ng-class="{\'open\': status.open}" ng-repeat="type in vm.typeStatuses" is-open=status.open ng-hide="type.statuses.length < 1"><accordion-heading>{{type.name}} <i class=pull-right ng-class="{\'icon-chevron-down\': status.open, \'icon-chevron-right\': !status.open}"></i></accordion-heading><table class="table table-bordered table-striped"><thead><tr><th>STATUS</th><th>DESCRIPTION</th></tr></thead><tbody><tr ng-repeat="status in type.statuses"><td><strong>{{status.name}}</strong></td><td>{{status.description}}</td></tr></tbody></table></accordion-group></accordion></div></div></div></div></div>'),e.put("app/settings/settings.heading.html","<div class=pull-right><div ng-if=\"vm.account.passwordExpirationDaysRemaining < vm.passwordExpirationDaysThreshold && vm.account.passwordExpirationDaysRemaining >= 0\" class=\"alert alert-warning\" style=margin-top:-4px;><strong>Warning:</strong><ng-pluralize count=vm.account.passwordExpirationDaysRemaining when=\"{'0': 'Your password has expired. Please change it below.', 'one': 'Your password expires in 1 day. Please change it below.', 'other': 'Your password expires in {} days. Please change it below.'}\"></ng-pluralize></div><div ng-if=\"vm.account.passwordExpirationDaysRemaining < vm.passwordExpirationDaysThreshold && vm.account.passwordExpirationDaysRemaining < 0\" class=\"alert alert-info\" style=margin-top:-4px;><strong>Information:</strong> It's been a while since you last changed your password. Please change it below.</div></div>"),e.put("app/settings/settings.html","<viewport-layout></viewport-layout>"),e.put("app/admin/branding/branding.heading.html",""),e.put("app/admin/branding/branding.html",'<div class=panel-group role=tablist ng-model=multiplePanels.activePanels ng-init="multiplePanels.activePanels=vm.activePanels" aria-multiselectable=true data-allow-multiple=true bs-collapse><div class="panel panel-default"><div class=panel-heading role=tab><h4 class=panel-title><a bs-collapse-toggle>Links</a> <a type=button class="btn btn-xs btn-default" ng-click=vm.openLinkModal()>+ New</a></h4></div><div class=panel-collapse role=tabpanel bs-collapse-target><table class=table><thead><tr><th>Link ID</th><th>Link Text</th><th>URL</th><th>&nbsp;</th></tr></thead><tbody><tr ng-repeat-start="link in vm.tenantLinks"><td colspan=4 ng-hide="vm.tenantLinks[$index-1].type == link.type" class=bg-info>{{link.type | uppercase}}</td></tr><tr ng-repeat-end><td><strong>{{link.linkId}}</strong></td><td>{{link.text}}</td><td><small class="link-info break-all">{{link.linkHref}}</small></td><td nowrap class=no-wrap><div class="btn-group btn-group-xs no-wrap"><a class="btn btn-default" type=button ng-click=vm.openLinkModal(link)><i class=icon-edit></i></a> <a class="btn btn-default" type=button ng-click=vm.openDeleteLinkModal(link)><i class=icon-delete></i></a></div></td></tr></tbody></table></div></div><div class=row><div class=col-xs-6><div class="panel panel-default"><div class=panel-heading role=tab><h5 class=panel-title><a bs-collapse-toggle>Logo</a> <span class="fileUpload btn btn-xs btn-default">+ New<input type=file class=upload nv-file-select uploader=vm.uploader></span></h5></div><div class=panel-collapse role=tabpanel bs-collapse-target><div class="panel-body bg-primary"><img class=img-responsive ng-src={{vm.logoUrl}} alt="Your control panel logo"></div></div></div></div><div class=col-xs-6><div class="panel panel-default"><div class=panel-heading role=tab><h5 class=panel-title><a bs-collapse-toggle>External Logo</a> <span class="fileUpload btn btn-xs btn-default">+ New<input type=file class=upload nv-file-select uploader=vm.uploaderExternal></span></h5></div><div class=panel-collapse role=tabpanel bs-collapse-target><div class=panel-body><img class=img-responsive ng-src={{vm.externalLogoUrl}} alt="Your public-facing external logo"></div></div></div></div></div></div>'),e.put("app/admin/branding/link.delete.modal.html",'<div class=modal-header><h3 class=modal-title>Delete Link</h3></div><div class=modal-body><p>Are you sure you want to delete this link?</p><table class=table><tbody><tr><td><strong>Link ID</strong></td><td>{{vm.link.linkId}}</td></tr><tr><td><strong>Category</strong></td><td>{{vm.link.type | capitalizeFirstLetter}}</td></tr><tr><td><strong>Display Text</strong></td><td>{{vm.link.text}}</td></tr><tr><td><strong>URL</strong></td><td class=link>{{vm.link.linkHref}}</td></tr></tbody></table></div><div class=modal-footer><div class=row><div class=col-xs-6><button class="btn btn-default btn-block" ng-click="vm.deleteLinkModal.dismiss(\'cancel\');">No, Cancel</button></div><div class=col-xs-6><button class="btn btn-primary btn-block" ng-click=vm.deleteLink()>Yes, Delete</button></div></div></div>'),e.put("app/admin/branding/link.edit.modal.html",'<div class=modal-header><h3 class=modal-title>{{vm.isNewLink ? \'Create New\' : \'Edit\'}} Link</h3></div><div class=modal-body><form class="form form-horizontal"><div class=form-group><label for=linkId class="control-label col-xs-2">Link ID</label><div class=col-xs-10><input name=linkId type=text class=form-control ng-model=vm.link.linkId placeholder="Link ID" ng-disabled="vm.isNewLink==false"></div></div><div class=form-group><label for=category class="control-label col-xs-2">Category</label><div class=col-xs-10><input name=category type=text class=form-control ng-model=vm.link.type placeholder=Category></div></div><div class=form-group><label for=displayText class="control-label col-xs-2">Display Text</label><div class=col-xs-10><input name=displayText type=text class=form-control ng-model=vm.link.text placeholder="Display Text"></div></div><div class=form-group><label for=url class="control-label col-xs-2">URL</label><div class=col-xs-10><input name=url type=text class=form-control ng-model=vm.link.linkHref placeholder=URL></div></div></form></div><div class=modal-footer><div class=row><div class=col-xs-6><button class="btn btn-default btn-block" ng-click="vm.linkModal.dismiss(\'cancel\');">Cancel</button></div><div class=col-xs-6 ng-switch=vm.isNewLink><button class="btn btn-primary btn-block" ng-switch-when=true ng-click=vm.addLink(vm.link)>Add</button> <button class="btn btn-primary btn-block" ng-switch-when=false ng-click=vm.updateLink(vm.link)>Update</button></div></div></div>'),e.put("app/admin/modules/modules.heading.html",""),e.put("app/admin/modules/modules.html",'<span class="abs-top-right hide-print" ng-include=headingTemplate ng-if=headingTemplate></span><table class="table table-valign-mid"><thead><tr><th>Module</th><th>Status</th><th></th></tr></thead><tbody><tr ng-repeat="module in vm.activeModules"><td>{{module.module | capitalizeFirstLetter}}</td><td>Active</td><td class=text-right><button type=button class="btn btn-default btn-xs btn-danger-hover" ng-click="vm.changeModuleStatus(module, false)">Deactivate</button></td></tr><tr ng-repeat="module in vm.hiddenModules" class=text-gray><td>{{module.module | capitalizeFirstLetter}}</td><td>Inactive</td><td class=text-right><button type=button class="btn btn-default btn-xs btn-success-hover" ng-click="vm.changeModuleStatus(module, true)">Activate</button></td></tr></tbody></table>'),e.put("app/admin/operations/holiday.add.modal.html",'<div class=modal-header><h3 class=modal-title>Add Holiday</h3></div><div class=modal-body><form class=form><div class=form-group><datepicker ng-model=vm.holidayToAdd min-date=vm.getMinDate() max-date=vm.getMaxDate() show-weeks=true class="well well-sm" custom-class="getDayClass(date, mode)"></datepicker></div></form></div><div class=modal-footer><div class=row><div class=col-xs-6><button class="btn btn-default btn-block" ng-click="vm.addHolidayModal.dismiss(\'cancel\');">Cancel</button></div><div class=col-xs-6><button class="btn btn-primary btn-block" ng-click=vm.addHoliday()>Add</button></div></div></div>'),e.put("app/admin/operations/holiday.delete.modal.html",'<div class=modal-header><h3 class=modal-title>Delete {{vm.holidayToDelete | date}}?</h3></div><div class=modal-footer><div class=row><div class=col-xs-6><button class="btn btn-default btn-block" ng-click="vm.deleteModal.dismiss(\'cancel\');">Cancel</button></div><div class=col-xs-6><button class="btn btn-primary btn-block" ng-click=vm.deleteHoliday()>Delete</button></div></div></div>'),e.put("app/admin/operations/operations.heading.html",""),e.put("app/admin/operations/operations.html",'<span class="abs-top-right hide-print" ng-include=headingTemplate ng-if=headingTemplate></span><div class="panel panel-default"><div class=panel-heading><h4 class=panel-title>Utility-Defined Fields <a type=button class="btn btn-xs btn-default" ng-click=vm.openUdfAddModal()>+ New</a></h4></div><table class="table table-valign-mid table-responsive"><thead><tr><th>Field Name</th><th>Field ID</th><th class=text-center>Shown In Queue</th><th class=text-center>Visible Externally</th><th></th></tr></thead><tr ng-repeat="udf in vm.udfs"><td>{{udf.name}}</td><td>{{udf.id}}</td><td class=text-center><i ng-class="{\'icon-success\': udf.isShownInQueue}"></i></td><td class=text-center><i ng-class="{\'icon-success\': udf.isVisibleExternally}"></i></td><td class="text-right no-wrap" nowrap><div class=btn-group><a class="btn btn-xs btn-default" type=button ng-click=vm.openUdfUpdateModal(udf)><i class=icon-edit></i></a> <a class="btn btn-xs btn-default" type=button ng-click=vm.openUdfDeleteModal(udf)><i class=icon-delete></i></a></div></td></tr></table></div><div class="panel panel-default"><div class=panel-heading><form class="form-inline pull-right" ng-show=vm.showStateAddForm><div class=form-group><select class=form-control ng-model=vm.stateToAdd ng-options="state for state in vm.validStates | filter:vm.stateNotAlreadyAdded"><option value selected disabled>State</option></select></div><div class=btn-group><button type=button class="btn btn-sm btn-default" ng-click="vm.showStateAddForm=false"><i class=icon-x></i></button> <button type=button class="btn btn-sm btn-success" ng-click=vm.createState()><i class=icon-save></i></button></div></form><h4 class=panel-title>Operating States <button type=button class="btn btn-xs btn-default" ng-click="vm.showStateAddForm=true" ng-hide="vm.showStateAddForm===true">+ New</button></h4></div><table class="table table-valign-mid table-responsive"><tr ng-repeat="state in vm.tenantStates"><td>{{state.stateName}} <span ng-show=state.isDefault><strong>(default state)</strong></span></td><td class=text-right nowrap><div class=btn-group><a class="btn btn-xs btn-default" type=button ng-click=vm.makeDefaultState(state) ng-show=!state.isDefault>Make Default</a> <a class="btn btn-xs btn-default" type=button ng-show=!state.isDefault ng-click=vm.deleteState(state)><i class=icon-delete></i></a></div></td></tr></table></div><div class="panel panel-default"><div class=panel-heading><form class="form-inline pull-right"><div class="input-group input-group-sm"><span class=input-group-addon>Year</span> <input type=number class="form-control input-sm" ng-model=vm.currentHolidayYear ng-change=vm.getHolidays()></div></form><h4 class=panel-title>Holidays <button type=button class="btn btn-xs btn-default" ng-click=vm.openHolidayAddModal()>+ New</button></h4></div><table class="table table-valign-mid table-responsive" ng-show="vm.holidays.length > 0"><tr ng-repeat="holiday in vm.holidays"><td>{{holiday | date:\'MMM dd, y\'}}</td><td class=text-right><a class="btn btn-default btn-xs" type=button ng-click=vm.openHolidayDeleteModal(holiday)><i class=icon-delete></i></a></td></tr></table><div ng-hide="vm.holidays.length > 0 || !vm.holidays" ng-cloak class=panel-body>No holidays defined yet for this year! <a ng-click=vm.openHolidayAddModal()>Click here</a> to add one.</div></div>'),e.put("app/admin/operations/udf.add.modal.html",'<div class=modal-header><h3 class=modal-title>New Utility-Defined Field</h3></div><div class=modal-body><form class=form><div class=form-group><input type=text class=form-control ng-model=vm.udf.name ng-model-options="{ updateOn: \'blur\' }" placeholder="Field Name"></div><div class=form-group><input type=text class=form-control ng-model=vm.udf.id ng-model-options="{ updateOn: \'blur\' }" placeholder="Field ID"></div><div class=checkbox><label><input type=checkbox value ng-model=vm.udf.isShownInQueue>Shown in Queue</label></div><div class=checkbox><label><input type=checkbox value ng-model=vm.udf.isVisibleExternally>Visible Externally</label></div></form></div><div class=modal-footer><div class=row><div class=col-xs-6><button class="btn btn-default btn-block" ng-click="vm.addModal.dismiss(\'cancel\');">Cancel</button></div><div class=col-xs-6><button class="btn btn-primary btn-block" ng-click=vm.addUDF()>Add</button></div></div></div>'),e.put("app/admin/operations/udf.delete.modal.html",'<div class=modal-header><h3 class=modal-title>Delete {{vm.udf.name}}?</h3></div><div class=modal-footer><div class=row><div class=col-xs-6><button class="btn btn-default btn-block" ng-click="vm.deleteModal.dismiss(\'cancel\');">Cancel</button></div><div class=col-xs-6><button class="btn btn-primary btn-block" ng-click=vm.deleteUDF()>Delete</button></div></div></div>'),e.put("app/admin/operations/udf.update.modal.html",'<div class=modal-header><h3 class=modal-title>Update {{vm.udf.name}}</h3></div><div class=modal-body><form class=form><div class=form-group><input type=text class=form-control ng-model=vm.udf.newValue.name ng-model-options="{ updateOn: \'blur\' }" placeholder={{vm.udf.name}}><div class=checkbox><label><input type=checkbox value ng-model=vm.udf.newValue.isShownInQueue>Shown in Queue</label></div><div class=checkbox><label><input type=checkbox value ng-model=vm.udf.newValue.isVisibleExternally>Visible Externally</label></div></div></form></div><div class=modal-footer><div class=row><div class=col-xs-6><button class="btn btn-default btn-block" ng-click="vm.updateModal.dismiss(\'cancel\');">Cancel</button></div><div class=col-xs-6><button class="btn btn-primary btn-block" ng-click=vm.updateUDF()>Update UDF</button></div></div></div>'),e.put("app/admin/security/security.heading.html",'<div ng-class="{\'btn-group\': vm.editSecuritySettings}"><button type=button class="btn btn-xs btn-default" ng-click="vm.editSecuritySettings=!vm.editSecuritySettings" ng-switch=vm.editSecuritySettings ng-init="vm.editSecuritySettings=false"><span ng-switch-when=false><i class=icon-edit></i></span><span ng-switch-when=true><i class=icon-x></i></span></button> <button type=button class="btn btn-xs btn-success" ng-click=vm.updateSecuritySettings() ng-if=vm.editSecuritySettings><i class=icon-save></i></button></div>'),e.put("app/admin/security/security.html",'<span class="abs-top-right hide-print" ng-include=headingTemplate ng-if=headingTemplate></span><table class="table table-valign-mid table-responsive"><tr ng-repeat="key in vm.securityKeys"><td>{{key | camelCaseToSpaced | capitalizeFirstLetter}}<span ng-if="vm.securitySettings[key]===true || vm.securitySettings[key]===false">?</span></td><td class=text-center ng-switch=vm.editSecuritySettings><div ng-switch-when=true ng-switch=vm.securitySettings[key]><div ng-switch-when=true><input ng-model=vm.securitySettings[key] type=checkbox checked></div><div ng-switch-when=false><input ng-model=vm.securitySettings[key] type=checkbox></div><div ng-switch-default><input class="form-control input-sm" type=number ng-model=vm.securitySettings[key]></div></div><div ng-switch-when=false ng-switch=vm.securitySettings[key]><div ng-switch-when=true><i class="icon-success text-success"></i></div><div ng-switch-when=false></div><div ng-switch-default>{{vm.securitySettings[key] | number}}</div></div></td></tr></table>'),e.put("app/admin/typeStatuses/typeStatuses.heading.html",""),e.put("app/admin/typeStatuses/typeStatuses.html",'<span class="abs-top-right hide-print" ng-include=headingTemplate ng-if=headingTemplate></span>'),e.put("app/admin/types/types.heading.html",""),e.put("app/admin/types/types.html",'<span class="abs-top-right hide-print" ng-include=headingTemplate ng-if=headingTemplate></span>'),e.put("app/admin/users/users.add.modal.html",'<div ng-controller="NewUser as modalVM"><div class=modal-header><h3 class=modal-title>Add New User</h3></div><div class=modal-body><div class=form-section><div ng-class=form-group><h4>New User Type:</h4><div class="btn-group btn-group-justified"><label class="btn btn-default" ng-model=modalVM.externalOrInternalUser btn-radio="\'externalUser\'">External User</label> <label class="btn btn-default" ng-model=modalVM.externalOrInternalUser btn-radio="\'internalUser\'">Internal User</label></div></div></div><div><form class=form><h4>User:</h4><div class=form-group><input type=text class=form-control ng-model=modalVM.newEmail ng-model-options="{ updateOn: \'blur\' }" placeholder=Email></div><div class="row form-group"><div class=col-xs-6><input type=text class=form-control ng-model=modalVM.newFirstName ng-model-options="{ updateOn: \'blur\' }" placeholder="First Name"></div><div class=col-xs-6><input type=text class=form-control ng-model=modalVM.newLastName ng-model-options="{ updateOn: \'blur\' }" placeholder="Last Name"></div></div><div ng-if="modalVM.externalOrInternalUser == \'internalUser\'" class=form-group><input type=text class=form-control ng-model=modalVM.newTitle ng-model-options="{ updateOn: \'blur\' }" placeholder=Title></div><div ng-if="modalVM.externalOrInternalUser == \'externalUser\'" ng-class=form-group><h4>Select Role:</h4><label class="btn btn-default btn-group-justified" ng-repeat="role in vm.externalRoles" ng-model=modalVM.externalRoleSelection btn-radio=role.id>{{role.name}}</label></div><div ng-if="modalVM.externalOrInternalUser == \'internalUser\'" ng-class=form-group><h4>Select Roles:</h4><label class="btn btn-default btn-group btn-group-justified" ng-repeat="role in vm.internalRoles" ng-model=modalVM.internalRoleSelection[role.id] btn-checkbox>{{role.name}}</label></div><div ng-if="modalVM.externalOrInternalUser == \'internalUser\' && modalVM.showAcceptingNewApps()" ng-class=form-group><h4>Is this SPOC accepting new applications?</h4><div class="btn-group btn-group-justified"><label class="btn btn-default" ng-model=modalVM.acceptingNewApps btn-radio="\'yes\'">Yes</label> <label class="btn btn-default" ng-model=modalVM.acceptingNewApps btn-radio="\'no\'">No</label></div></div></form></div></div><div class=modal-footer><div class=row><div class=col-xs-6><button class="btn btn-default btn-block" ng-click="vm.newUserModal.dismiss(\'cancel\')">Cancel</button></div><div class=col-xs-6><button class="btn btn-primary btn-block" ng-click=modalVM.createUser()>Create User</button></div></div></div></div>'),e.put("app/admin/users/users.edit.roles.modal.html",'<div ng-controller="ChangeRoles as modalVM"><div class=modal-header><h3 class=modal-title>Manage Roles</h3></div><div class=modal-body><form class=form><div ng-if="modalVM.externalOrInternal == \'external\'" ng-class=form-group><h4>Select Role:</h4><label class="btn btn-default btn-group-justified" ng-repeat="role in modalVM.externalRoles" ng-model=modalVM.externalRoleSelection btn-radio=role.id>{{role.name}}</label></div><div ng-if="modalVM.externalOrInternal == \'internal\'" ng-class=form-group><h4>Select Roles:</h4><div class=row ng-repeat="role in modalVM.internalRoles"><label><input type=checkbox ng-model=modalVM.internalRoleSelection[role.id] ng-disabled=modalVM.disableAdminSelect(role)>{{role.name}}</label></div></div></form></div><div class=modal-footer><div class=row><div class=col-xs-6><button class="btn btn-default btn-block" ng-click="vm.manageRolesModal.dismiss(\'cancel\')">Cancel</button></div><div class=col-xs-6><button class="btn btn-primary btn-block" ng-click=modalVM.updateRoles()>Update Roles</button></div></div></div></div>'),e.put("app/admin/users/users.heading.html",'<form class=form-inline><a type=button class="btn btn-default" ng-click=vm.addUser()>+ New</a> <input type=text class=form-control placeholder="Search by Name" ng-model=searchUsersQuery></form>'),e.put("app/admin/users/users.html",'<span class="abs-top-right hide-print" ng-include=headingTemplate ng-if=headingTemplate></span><table class="table table-striped table-valign-mid table-responsive"><thead><tr><th>Name, Email</th><th>Type</th><th>Role(s)</th><th class=text-center>Status</th><th class=text-center>Confirmed Email?</th><th class=text-center>Has Password?</th><th class=text-center>Accepting New Apps?</th><th></th></tr></thead><tr ng-repeat="user in vm.users | orderBy: \'fullName\' | filter:searchUsersQuery" ng-class="{\'text-gray\': user.userIsDeactivated}"><td><p><strong>{{user.fullName}}</strong></p><small>{{user.email}}</small></td><td>{{user.isExternal ? \'External\' : \'Internal\'}}</td><td><div class=no-wrap ng-repeat="role in user.roles">{{role.name}}<span ng-show="$last===false">;</span></div></td><td class=text-center>{{user.userIsDeactivated ? \'Inactive\' : \'Active\'}}</td><td ng-switch=user.emailConfirmed class=text-center><div ng-switch-when=true><i class=icon-success></i></div><div ng-switch-when=false><button type=button class="btn btn-xs btn-default" ng-click=vm.resendEmail(user) ng-disabled="user.userIsDeactivated==true">Resend Email</button></div></td><td class=text-center><i ng-class="{\'icon-success\': user.hasPassword}"></i></td><td class=text-center><div ng-show=vm.userIsSpoc(user) ng-switch=user.spocIsAcceptingNewApplications><div ng-switch-when=true><i class=icon-success></i> <button type=button class="btn btn-xs btn-default" ng-click="vm.setSpocReceivingApplications(user, false)" ng-disabled="user.userIsDeactivated==true">Stop</button></div><div ng-switch-when=false><i class=icon-x></i> <button type=button class="btn btn-xs btn-default" ng-click="vm.setSpocReceivingApplications(user, true)" ng-disabled="user.userIsDeactivated==true">Start</button></div></div></td><td nowrap><div class="btn-group-vertical btn-group btn-block"><a type=button class="btn btn-xs btn-default" ng-if="user.userIsDeactivated===false" ng-click=vm.manageRoles(user)>Manage Roles</a> <a type=button class="btn btn-xs btn-default" ng-if="user.userIsDeactivated===false" ng-click=vm.deactivateUser(user)>Deactivate</a> <a type=button class="btn btn-xs btn-default" ng-if="user.userIsDeactivated===true" ng-click=vm.reactivateUser(user)>Activate</a></div></td></tr></table>'),e.put("app/application/address/address.verify.html",'<div><div class=modal-header><h3 class=modal-title>Address Verification</h3></div><div class=modal-body ng-switch=modalVM.doneLoading><div ng-switch-when=false><div class=text-center><i class="icon-refresh icon-spin icon-4x"></i><h3>Verifying Address</h3></div></div><div ng-switch-when=true><div ng-if=!modalVM.timedOut><div ng-if="modalVM.formattedAddresses.length > 0"><h3>Select an Address</h3><h4>Verified Addresses</h4><div class=list-group ng-init="modalVM.selection = modalVM.formattedAddresses[0]"><div class=list-group-item ng-class="{ active: modalVM.selection == address }" ng-repeat="address in modalVM.formattedAddresses" ng-click=modalVM.setSelection(address)>{{address.FullAddress}}</div></div><h4>Unverified Address</h4><div class=list-group><div class=list-group-item ng-class="{ active: modalVM.selection == null }" ng-click=modalVM.setSelection(null)>{{modalVM.keyAddress}}</div><div class="alert alert-danger" ng-show="modalVM.selection == null">Warning: This address is unverified. While you may continue using it, it is highly suggested to choose from the verified options.</div></div><div class="btn-group btn-group-justified"><a class="btn btn-default" ng-click=modalVM.cancelGeocode()>Cancel</a> <a class="btn btn-primary" ng-click=modalVM.selectAddress()>Use Selected Address</a></div></div><div ng-if="modalVM.formattedAddresses.length <= 0"><div class="alert alert-warning">No addresses found, make sure all information entered was correct</div><br><div class="btn-group btn-group-justified"><a class="btn btn-default" ng-click=modalVM.cancelGeocode()>Back</a></div></div></div><div ng-if=modalVM.timedOut><div class="alert alert-danger">There was an error verifying the following address:<p class=strong>{{modalVM.keyAddress}}</p></div><div class="btn-group btn-group-justified"><a class="btn btn-default" ng-click=modalVM.cancelGeocode()>Cancel</a> <a class="btn btn-primary" ng-click=modalVM.getVerifiedAddresses()>Retry</a></div></div></div></div></div>'),e.put("app/application/files/files.delete.modal.html",'<div class=modal-header><h3 class=modal-title>Delete File</h3></div><div class=modal-body><p>Are you sure you want to delete this file?</p><h4><div class=iconic><div class=iconic-icon><i ng-if=vm.currentFile.fileMimeType class="icon-file-{{vm.currentFile.fileMimeType | fileMimeTypeFilter}}"></i> <i ng-if=$parent.vm.currentFile.file.type class="icon-file-{{$parent.vm.currentFile.file.type | fileMimeTypeFilter}}"></i></div><div class=iconic-text><div class=iconic-text-main><strong>{{(vm.currentFile.fileName ? vm.currentFile.fileName : $parent.ngModel) | decode}}</strong></div><div class=iconic-text-sub ng-if=vm.currentFile.fileTypeName>{{vm.currentFile.fileTypeName}}</div></div></div></h4></div><div class=modal-footer><div class=row><div class=col-xs-6><button class="btn btn-default btn-block" ng-click="vm.fileDeleteModal.dismiss(\'cancel\')">No</button></div><div class=col-xs-6><button ng-if=vm.currentFile class="btn btn-primary btn-block" ng-click=vm.deleteFile(vm.currentFile.fileName)>Yes</button> <button ng-if=!vm.currentFile class="btn btn-primary btn-block" ng-click=vm.deleteFile($parent.ngModel)>Yes</button></div></div></div>'),e.put("app/application/files/files.heading.html",'<div ng-if="vm.uploader.queue.length > 1" class=btn-group><button type=button class="btn btn-success" ng-click=vm.uploader.uploadAll() ng-disabled=!vm.uploader.queue.length bs-tooltip data-trigger=hover data-title="Save Files"><i class=icon-save></i></button> <button type=button class="btn btn-default" ng-click=vm.uploader.clearQueue() ng-disabled=!vm.uploader.queue.length bs-tooltip data-trigger=hover data-title=Cancel><i class=icon-x></i></button></div><span class="fileUpload btn btn-default" bs-tooltip data-trigger=hover data-title="Upload File(s)" ng-hide="vm.uploader.queue.length > 1" data-container=body data-placement=left><i class=icon-upload><input type=file class=upload nv-file-select uploader=vm.uploader multiple></i></span>'),e.put("app/application/files/files.html",'<span class="abs-top-right hide-print" ng-include=headingTemplate ng-if=headingTemplate></span><div ng-if="vm.files.length <= 0 && vm.uploader.queue.length <= 0" class=text-center><h5 class=no-margin-top>No files have been uploaded for this application.</h5><p>Click <span class="fileUpload strong link">here<input type=file class=upload nv-file-select uploader=vm.uploader multiple></span> to upload some!</p></div><table class="table table-valign-mid" ng-if="vm.files.length > 0 || vm.uploader.queue.length > 0"><thead><tr><th class=no-padding-top>File</th><th class=no-padding-top>Type</th><th class=no-padding-top>Note</th><th class=no-padding-top></th></tr></thead><tbody><tr ng-repeat-start="file in vm.files | orderBy:\'fileName\'" ng-init="file.edit=false"><td><span><i class="file-type-icon icon-file-{{file.fileMimeType | fileMimeTypeFilter}} icon-2x hidden-xs"></i> <strong>{{file.fileName | decode}}</strong></span></td><td><div ng-if=!file.edit>{{file.fileTypeName}}</div><div ng-if=file.edit><select class="form-control dropdown-toggle" ng-model=file.fileTypeId><option ng-repeat="type in vm.fileTypes" ng-selected="{{type.id == file.fileTypeId}}" value={{type.id}}>{{type.name}}</option></select></div></td><td><div ng-if=!file.edit>{{file.notes}}</div><div ng-if=file.edit><input class=form-control ng-model=file.notes></div></td><td class="text-right hidden-xs" nowrap><div ng-hide=file.edit class=btn-group><button class="btn btn-default btn-xs" ng-click=vm.downloadFile(file.fileName) bs-tooltip data-trigger=hover data-title="Download File" data-container=body file-downloader><i class=icon-download></i></button> <button class="btn btn-default btn-xs" ng-click="file.edit=!file.edit" bs-tooltip data-trigger=hover data-title="Edit File" data-container=body ng-if=appVM.canEditFiles()><i class=icon-edit></i></button> <button class="btn btn-default btn-xs" ng-click=vm.confirmFileDelete(file) bs-tooltip data-trigger=hover data-title="Delete File" data-container=body ng-if=appVM.canEditFiles()><i class=icon-delete></i></button></div><div ng-hide=!file.edit class=btn-group><button class="btn btn-success btn-xs" ng-click=vm.updateFile(file) bs-tooltip data-trigger=hover data-title="Save Changes" data-container=body><i class=icon-save></i></button> <button class="btn btn-default btn-xs" ng-click="file.edit=!file.edit" bs-tooltip data-trigger=hover data-title="Cancel Edit" data-container=body><i class=icon-x></i></button></div></td></tr><tr class="visible-xs no-border-top" ng-repeat-end><td colspan=3><div ng-hide=file.edit class="btn-group btn-group-justified"><div class=btn-group role=group><button class="btn btn-default" ng-click=vm.downloadFile(file.fileName) file-downloader><i class=icon-download></i> Download</button></div><div class=btn-group role=group><button class="btn btn-default" ng-click="file.edit=!file.edit" ng-disabled=appVM.currentApplication.statusAllowsApplicationEdits><i class=icon-edit>Edit</i></button></div><div class=btn-group role=group><button class="btn btn-default" ng-click=vm.confirmFileDelete(file) ng-disabled=appVM.currentApplication.statusAllowsApplicationEdits><i class=icon-delete></i> Delete</button></div></div><div ng-hide=!file.edit class="btn-group btn-group-justified"><div class=btn-group role=group><button class="btn btn-success" ng-click=vm.updateFile(file)><i class=icon-save></i> Save</button></div><div class=btn-group role=group><button class="btn btn-default" ng-click="file.edit=!file.edit"><i class=icon-x></i> Cancel</button></div></div></td></tr><tr ng-repeat="item in vm.uploader.queue"><td><strong>{{item.file.name}}</strong></td><td><select class="form-control dropdown-toggle" data-ng-options="fileType.name for fileType in vm.fileTypes" data-ng-model=item.file.fileType></select></td><td><input type=text class=form-control data-ng-model=item.file.notes></td><td nowrap class=text-center><button type=button class="btn btn-success btn-xs" ng-click=vm.uploader.uploadItem(item) ng-disabled="item.isReady || item.isUploading || item.isSuccess" ng-hide=item.isSuccess bs-tooltip data-trigger=hover data-title="Save File" data-container=body><i class=icon-save></i></button> <button type=button class="btn btn-default btn-xs" ng-click=item.remove() ng-hide=item.isSuccess bs-tooltip data-trigger=hover data-title=Cancel data-container=body><i class=icon-x></i></button></td></tr></tbody></table>'),
e.put("app/application/files/files.overwrite.modal.html",'<div class=modal-header><h3 class=modal-title>Overwrite File</h3></div><div class=modal-body><p>A file with this name already exists. Are you sure you want to overwrite it?</p><h4><div class=iconic><div class=iconic-icon><i ng-if=vm.currentFile.fileMimeType class="icon-file-{{vm.currentFile.fileMimeType | fileMimeTypeFilter}}"></i> <i ng-if=$parent.vm.currentFile.file.type class="icon-file-{{$parent.vm.currentFile.file.type | fileMimeTypeFilter}}"></i></div><div class=iconic-text><div class=iconic-text-main><strong>{{vm.currentFile.fileName ? vm.currentFile.fileName : $parent.vm.currentFile.file.name}}</strong></div></div></div></h4></div><div class=modal-footer><div class=row><div class=col-xs-6><button ng-if=vm.currentFile class="btn btn-default btn-block" ng-click="vm.fileOverwriteModal.dismiss(\'cancel\');vm.cancelFileUpload()">No</button></div><div class=col-xs-6><button ng-if=vm.currentFile class="btn btn-primary btn-block" ng-click="vm.fileOverwriteModal.dismiss(\'cancel\');vm.postFile()">Yes</button> <button ng-if=!vm.currentFile class="btn btn-primary btn-block" ng-click="vm.fileOverwriteModal.dismiss(\'cancel\');$parent.postFile($parent.ngModel)">Yes</button></div></div></div>'),e.put("app/application/form/form.heading.html",'<span bs-tooltip data-trigger=hover data-title="Print Application" data-placement=left><button type=button class="btn btn-default" print-btn><i class=icon-print></i></button></span>'),e.put("app/application/form/form.html",'<span class="abs-top-right hide-print" ng-include=headingTemplate ng-if=headingTemplate></span><div sf-schema=vm.schema sf-form=vm.form sf-model=vm.model id=form-data class="form-horizontal printSection"></div><div class="printOnly dont-break"><h3>Utility-Defined Fields</h3><table class="table table-valign-mid"><tbody><tr ng-repeat="UDF in appVM.UDFs | orderBy:name"><td class=col-xs-6><strong>{{UDF.name}}</strong></td><td class=col-xs-6>{{UDF.value}}</td></tr></tbody></table></div>'),e.put("app/application/messages/messages.add.button.html",""),e.put("app/application/messages/messages.delete.html","<div class=modal-header><h3 class=modal-title>Delete {{vm.currentPost.type}}</h3></div><div class=modal-body><p>Are you sure you want to delete this {{vm.currentPost.type | lowercase}}?</p><div class=well><p class=white-space>{{vm.currentPost.body}}</p><hr><p><strong>{{vm.currentPost.action}}</strong>: {{vm.currentPost.timeStamp | date:'longDate'}} @ {{vm.currentPost.timeStamp | date:'h:mma'}}</p></div></div><div class=modal-footer><div class=row><div class=col-xs-6><button class=\"btn btn-default btn-block\" ng-click=\"vm.modalInstance.dismiss('cancel')\">No</button></div><div class=col-xs-6><button class=\"btn btn-primary btn-block\" ng-click=vm.deletePost(vm.currentPost)>Yes</button></div></div></div>"),e.put("app/application/messages/messages.display.html",'<md-subheader><md-list class=no-padding><md-list-item layout=row flex><p flex=25>Messages</p><span ng-if="coreVM.user.isExternal===false" flex=75 layout=row><span flex></span> <span flex><md-button class=md-raised ng-if="vm.showExternalMessages && coreVM.user.email==appVM.currentApplication.assignedSpoc.email" type=button ng-click=vm.openExternalPostModal()>Send Message to Customer</md-button><md-button class=md-raised ng-if=!vm.showExternalMessages type=button ng-click=vm.openInternalPostModal()>Post Internally</md-button></span></span> <span ng-if="coreVM.user.isExternal===true" flex=75><input type=button class="btn btn-default" ng-click=vm.openExternalPostModal() value="Send Message to Utility"></span></md-list-item></md-list></md-subheader><md-content class=md-padding ng-switch=vm.messages.length><div ng-switch-when=0><h5>No messages have been sent or received for this application.</h5><p>Click <strong ng-click="vm.showExternalMessages ? vm.openExternalPostModal() : vm.openInternalPostModal()">here</strong> to send one!</p></div><div ng-switch-default layout=row ng-repeat="message in vm.messages" ng-class={}><div flex=25><md-icon md-svg-src=img/icons/user.svg class="icon-2x md-avatar"></md-icon><div>{{::message.senderName}}</div><div ng-if=message.senderTitle class=md-caption>{{::message.senderTitle | uppercase}}</div></div><div flex=75><div class=md-caption am-time-ago=message.timeStamp ng-hide="vm.messages[$index-1].date == message.date"></div><md-button ng-if="message.senderIsCurrentUser && coreVM.user.isExternal===false && !message.statusChangeToName" ng-click=vm.confirmPostDelete(message) aria-label="{{message.isExternal ? \'Delete Message\' : \'Delete Post\'}}"><i class=icon-x></i></md-button><md-button ng-if=message.statusChangeToName ui-sref=application.status>{{message.statusChangeToName}}</md-button><p ng-bind-html="message.body | decode | lineBreaks"></p><md-button ng-if="message.fileNames.length > 0" ng-repeat="fileName in message.fileNames" ng-click=vm.downloadFile(fileName) aria-label="Download File" file-downloader><i class=icon-files></i> {{fileName | decode}}</md-button></div></div></md-content>'),e.put("app/application/messages/messages.heading.html",'<span class=pull-right ng-if="(vm.showExternalMessages && (coreVM.user.email==appVM.currentApplication.assignedSpoc.email || coreVM.user.isExternal)) || vm.showExternalMessages==false"><button type=button class="btn btn-sm btn-default" ng-click="vm.openModal(coreVM.user, appVM.currentApplication)"><i class=icon-edit></i></button></span><div ng-switch=coreVM.user.isExternal style=margin-right:40px><div ng-switch-when=false><div class="btn-group btn-group-sm" ng-init="vm.showExternalMessages=false"><label class="btn btn-default" ng-model=vm.showExternalMessages btn-radio=false ng-click="vm.filterMessages(\'internal\')">Internal</label> <label class="btn btn-default" ng-model=vm.showExternalMessages btn-radio=true ng-click="vm.filterMessages(\'external\')">Customer</label></div></div><div ng-switch-when=true ng-hide=true ng-init="vm.showExternalMessages=true"></div></div>'),e.put("app/application/messages/messages.html",'<span class="abs-top-right hide-print" ng-include=headingTemplate ng-if=headingTemplate></span><div class=messages><div ng-if="!vm.messages || vm.messages.length === 0" class=text-center><h5 class=no-margin-top>No messages have been sent or received for this application.</h5><p ng-if="(vm.showExternalMessages && (coreVM.user.email==appVM.currentApplication.assignedSpoc.email || coreVM.user.isExternal)) || vm.showExternalMessages==false">Click <span class="strong link" ng-click="vm.showExternalMessages ? vm.openExternalPostModal() : vm.openInternalPostModal()">here</span> to send one!</p></div><div class=message-container ng-repeat="message in vm.messages" ng-class="{\'internal outgoing\': message.isExternal===false && message.senderIsCurrentUser, \'internal incoming\': message.isExternal===false && message.senderIsCurrentUser===false, \'external outgoing\': message.isExternal && message.senderIsAssignedSpoc, \'external incoming\': message.isExternal && message.senderIsAssignedSpoc===false}"><div class=message><div class="message-sender message-sender-incoming"><div class="text-center user-icon"><i class="icon-user icon-3x"></i><div class=small>{{::message.senderName}}<div ng-if=message.senderTitle class="small text-gray">{{::message.senderTitle | uppercase}}</div></div></div></div><div class=message-content><div class="small date-time text-center text-gray" bs-tooltip data-title="{{message.timeStamp | date:\'longDate\'}} @ {{message.timeStamp | date:\'h:mma\'}}" data-container=body><span am-time-ago=message.timeStamp></span></div><div class=message-bubble ng-class="{\'left\': message.senderIsCurrentUser, \'right\': message.senderIsCurrentUser===false}"><div class=arrow></div><div id=message-body class="message-body white-space"><button type=button class="btn btn-xs btn-clear delete-post btn-danger-hover text-gray" ng-if="message.senderIsCurrentUser && coreVM.user.isExternal===false && !message.statusChangeToName" ng-click=vm.confirmPostDelete(message) bs-tooltip data-placement=right data-title="{{message.isExternal ? \'Delete Message\' : \'Delete Post\'}}"><small><i class=icon-x></i></small></button><div class="status-label text-center" ng-if=message.statusChangeToName><button class="btn no-padding"><span class="label label-default" ui-sref=application.status>{{message.statusChangeToName}}</span></button></div>{{message.body | decode}}<div ng-if="message.fileNames.length > 0"><br><button class="btn btn-default btn-xs" ng-repeat="fileName in message.fileNames" ng-click=vm.downloadFile(fileName) bs-tooltip data-trigger=hover data-placement=bottom data-title="Download File" file-downloader><i class=icon-files></i> {{fileName | decode}}</button></div></div></div></div><div class="message-sender message-sender-outgoing"><div class="text-center user-icon"><i class="icon-user icon-3x"></i><div class=small>{{::message.senderName}}<div ng-if=message.senderTitle class="small text-gray">{{::message.senderTitle | uppercase}}</div></div></div></div></div></div></div>'),e.put("app/application/owner/owner.change.dropdown.html",'<div class=form-group><label><span ng-if=appVM.currentApplication.owner>Change Owner <small>from <strong>{{appVM.currentApplication.owner.fullName}}</strong> to:</small></span> <span ng-if=!appVM.currentApplication.owner>Assign Owner</span></label><select ng-model=appVM.newOwner ng-options="user.fullName for user in appVM.internalUsers" class=form-control><option selected disabled value>Select user</option></select></div>'),e.put("app/application/owner/owner.change.modal.html",'<div class=modal-header><h3 class=modal-title>Update Application</h3></div><div class=modal-body><change-owner></change-owner></div><div class=modal-footer><div class=row><div class=col-xs-6><button class="btn btn-default btn-block" ng-click="appVM.ownerModal.dismiss(\'cancel\')">Cancel</button></div><div class=col-xs-6><button class="btn btn-primary btn-block" ng-click=appVM.changeApplicationOwner(appVM.newOwner)>Assign Owner</button></div></div></div>'),e.put("app/application/review/review.heading.html",'<div class=btn-group><a type=button class="btn btn-default btn-icon-tooltip" ng-if=vm.showFeederAnalysisButton ng-href="http://connectthegridiit.azurewebsites.net/review?feederId=1" target=_blank><i class=icon-chart bs-tooltip data-trigger=hover data-title="Review Feeder DG Output" data-placement=left data-container=body></i></a> <button type=button class="btn btn-default btn-icon-tooltip" print="{\'idToPrint\': \'technical-review\', \'titleId\': \'form-title\'}"><i class=icon-print bs-tooltip data-trigger=hover data-title="Print Technical Review" data-placement=top data-container=body data-target=button></i></button></div>'),e.put("app/application/review/review.html",'<span class="abs-top-right hide-print" ng-include=headingTemplate ng-if=headingTemplate></span><div class="flex-row tech-review" ng-repeat="question in vm.questions"><div class="flex-column tech-review-status"><div class=text-center><div class="icon-stack icon-lg" ng-class="{\'success\': question.answer.isApproved===true, \'danger\': question.answer.isApproved===false, \'inactive\': !question.answer}"><i class="icon-circle icon-stack-2x icon-stack-indicator"></i> <i class="icon-open-circle-thin icon-stack-2x icon-stack-indicator-dark"></i> <i class="icon-stack-1x icon-stack-icon" ng-class="{\'icon-success\': question.answer.isApproved===true, \'icon-x\': question.answer.isApproved===false, \'icon-stack-xl icon-pending\': !question.answer}"></i></div><div class=stack-label><span ng-class="{\'strong\': question.answer, \'text-gray small\': !question.answer}">{{question.answer.text || \'Unanswered\'}}</span><br><small ng-show=question.answer>{{question.answer.lastModifiedDateTime | date:\'MM-dd-yyyy\' || vm.today | date:\'MM-dd-yyyy\'}}</small></div></div></div><div class="flex-column tech-review-item"><div ng-class="{\'well well-sm\': question.answer}">{{question.text}}<div ng-if=question.answer.comments><hr><p>{{question.answer.comments}}</p></div></div><div class="well well-sm comment-box hide-print" ng-hide=question.answer><div class=row><div class="col-md-8 col-sm-7"><textarea class=form-control rows=2 placeholder=Comment... ng-model=question.newComment></textarea></div><div class="col-md-4 col-sm-5"><div class="btn-group btn-group-justified approve-deny"><div class=btn-group role=group><button class="btn btn-default btn-success-hover" ng-click="vm.postAnswer(question, true, $index)"><i class=icon-success></i> Approve</button></div><div class=btn-group role=group><button class="btn btn-default btn-danger-hover" ng-click="vm.postAnswer(question, false, $index)"><i class=icon-x></i> Deny</button></div></div></div></div></div></div></div>'),e.put("app/application/status/status.change.modal.html",'<div class=modal-header><h3 class=modal-title>Update Application</h3></div><div class="modal-body status-change-modal"><div class=form-group><label>Change Status <small>from <strong>{{appVM.currentApplication.statusName}}</strong> to:</small></label><select ng-model=appVM.newStatus ng-options="status as status.statusName for status in appVM.statuses" ng-change=appVM.getTemplateForAppStatusChange(appVM.newStatus) class=form-control><option selected disabled value>Select status</option></select></div><div ng-if=appVM.statusDetail.statusChangePostTemplate class=accordion><div class=form-group><label>Send Message <small>to <strong>{{appVM.currentApplication.recipientFullName}}</strong> about this status change</small></label> <textarea class=form-control ng-model=appVM.statusDetail.statusChangePostTemplate rows=9 placeholder="Type message here"></textarea></div><div ng-if=appVM.statusDetail.ownerChangeIsSuggested><span class=pull-right bs-tooltip data-title="When updating an application\'s status to {{appVM.newStatus.statusName | uppercase}}, an ownership change is suggested. However, it is not required." data-placement=left><i class=icon-help-circle></i></span><change-owner></change-owner></div><div ng-if="appVM.statusDetail.fileTypes.length > 0"><label>Attach File(s)</label><table class="table table-striped table-condensed table-valign-mid"><thead><tr><th class=col-xs-4>Type</th><th class=col-xs-8>File</th></tr></thead><tbody><tr ng-repeat="fileType in appVM.statusDetail.fileTypes"><td><strong>{{::fileType.name}}</strong></td><td nowrap ng-class="{\'form-inline\': !fileType.fileUploaded && !fileType.fileSelected && appVM.statusDetail.filesForStatus[fileType.id].length > 0}"><file-upload file-key=fileType.id file-type=fileType.id ng-model=fileType.fileUploaded ng-hide=fileType.fileSelected data-btn-only=true></file-upload><span ng-if="appVM.statusDetail.filesForStatus[fileType.id].length > 0" ng-hide=fileType.fileUploaded ng-class="{\'input-group\': fileType.fileSelected}"><span class=pipe ng-if=!fileType.fileSelected>OR</span> <span class=input-group-addon ng-if=fileType.fileSelected><i class=icon-files></i> Selected</span><select ng-model=fileType.fileSelected class=form-control ng-options="file.fileName as (file.fileName | decode) for file in appVM.statusDetail.filesForStatus[fileType.id] track by file.fullName" ng-change=vm.fileSelectChanged(fileType.fileSelected)><option value selected disabled>Select existing file</option></select></span></td></tr></tbody></table></div></div></div><div class=modal-footer><div class=row><div class=col-xs-6><button class="btn btn-default btn-block" ng-click="appVM.statusModal.dismiss(\'cancel\')">Cancel</button></div><div class=col-xs-6><button class="btn btn-primary btn-block" ng-click="appVM.changeApplicationStatus(appVM.newStatus, appVM.statusDetail.statusChangePostTemplate, appVM.newOwner)">Update Application</button></div></div></div>'),e.put("app/application/status/status.heading.html",""),e.put("app/application/status/status.html",'<span class="abs-top-right hide-print" ng-include=headingTemplate ng-if=headingTemplate></span><div class=timeline-container><progressbar animate=false value=dynamic type=default class=timeline></progressbar><div class=timeline-events><div class=timeline-event-column ng-repeat="items in vm.timelinePlaceholders"><div class=timeline-event-marker ng-repeat-start="item in items" ng-hide="items[$index - 1].showMe || items[$index + 1].showMe" ng-if="(item.takesPrecedenceForMilestone && items.length > 1) || item.dates.length > 0 || items.length == 1"><span class="icon-stack icon-lg"><i class="icon-circle icon-stack-2x timeline-event-marker-bg"></i> <i class="icon-circle icon-stack-xl timeline-event-marker-color" ng-class="{ \'completed\': (item.isComplete || item.isPending), \'danger\': (item.isPaused && item.awaitingUserAction==true), \'pending\': (item.isPaused && item.awaitingUserAction==false) }"></i> <i class="icon-stack-1x timeline-event-marker-icon" ng-class="{ \'icon-success\': item.isComplete, \'icon-warning\': item.awaitingUserAction, \'icon-pending\': item.isPaused && item.awaitingUserAction==false }"></i></span></div><div class=timeline-event-label-wrapper ng-repeat-end ng-hide="item.okToHide && (items[$index - 1].showMe || items[$index + 1].showMe)" ng-if="(item.takesPrecedenceForMilestone && items.length > 1) || item.dates.length > 0 || items.length == 1"><div class=timeline-event-label><div class=timeline-event-label-name><span>{{item.statusName}}</span></div><div class=timeline-event-label-date ng-repeat="changeDate in item.dates" ng-class="{\'text-gray\': $index !== 0}"><span am-time-ago=changeDate></span></div></div></div></div></div></div><div class="row progress-log panel-viewport"><div class=panel-heading><h3 class=panel-title>History</h3></div><table class=table><thead><tr><th>DATE</th><th>TIME</th><th>STATUS</th></tr></thead><tbody><tr ng-repeat="progress in vm.appStatusChanges"><td>{{progress.changeDate | date:\'EEE MMM dd y\'}}</td><td>{{progress.changeDate | date:\'hh:mm a\'}}</td><td><strong>{{progress.toName}}</strong></td></tr></tbody></table></div>'),e.put("app/application/utility/utility.heading.html",'<button ng-if="coreVM.user.isExternal===false" ng-hide=vm.editUDFs type=button class="btn btn-default" ng-click="vm.editUDFs=!vm.editUDFs" bs-tooltip data-trigger=hover data-title="Edit Utility Info" data-placement=left><i class=icon-edit></i></button><div class=btn-group ng-show=vm.editUDFs><button type=button class="btn btn-default" value=Cancel ng-click="vm.editUDFs=!vm.editUDFs" bs-tooltip data-trigger=hover data-placement=bottom data-title=Cancel><i class=icon-x></i></button> <button type=button class="btn btn-default" value=Save ng-click=vm.updateUDFs() bs-tooltip data-trigger=hover data-placement=bottom data-title=Save><i class=icon-save></i></button></div>'),e.put("app/application/utility/utility.html",'<span class="abs-top-right hide-print" ng-include=headingTemplate ng-if=headingTemplate></span><table class="table table-valign-mid"><tbody><tr ng-repeat="UDF in appVM.UDFs | orderBy:name"><td class=col-xs-6><strong>{{UDF.name}}</strong></td><td class=col-xs-6><span ng-hide=vm.editUDFs>{{UDF.value}}</span> <input type=text ng-show=vm.editUDFs ng-model=UDF.value class=form-control></td></tr></tbody></table>'),e.put("app/applications/list/list.aside.html",'<div ng-controller="List as vm" class=queue-aside><div ng-if="coreVM.user.isExternal===true" ng-style=vm.queueStyle class=queue-aside-external><div class=location-apps ng-repeat="location in vm.applicationData.items"><div class="location strong no-margin"><i class=icon-{{::location.energySourceId}}></i> {{::location.addressLineOne}} <span class=pull-right><i class=icon-circle ng-class="{\'icon-success-color\':status.indicatorLevel===\'Low\',\'icon-warning-color\':status.indicatorLevel===\'Medium\',\'icon-danger-color\':status.indicatorLevel===\'High\'}" ng-repeat="status in location.statuses"></i></span></div><table class="table table-links"><tr ng-repeat="application in location.externalApplications | orderBy: \'typeName\'" ng-click=vm.setCurrentApplicationId(application.id) ui-sref=application.status({applicationId:application.id}) ui-sref-active=active><td class=col-xs-4>{{::application.typeName}}</td><td class=col-xs-9>{{::application.statusName}} <i class=icon-chevron-right></i></td></tr></table></div></div><div ng-if="coreVM.user.isExternal===false" ng-style=vm.queueStyle class=queue-aside-internal><table class="table table-links"><tr ng-repeat="application in vm.applicationData.items" ng-click=vm.setCurrentApplicationId(application.id) ui-sref=application.status({applicationId:application.id}) ui-sref-active=active><td><div><i class=icon-{{::application.energySourceId}}></i> <strong>{{::application.systemAddressLineOne}}</strong></div><div><i class="icon-circle text-clear"></i> <small>{{::application.statusName}}</small></div></td><td><span ng-show=application.daysRemainingAtStatus class=label ng-class="{\'label-success\':application.daysRemainingSeverityLevel===\'Low\', \'label-warning\':application.daysRemainingSeverityLevel===\'Medium\', \'label-danger\':application.daysRemainingSeverityLevel===\'High\'}">{{::application.daysRemainingAtStatus}}</span> <i class="icon-chevron-right text-larger"></i></td></tr></table></div><h5 class="clearfix text-center queue-loading" ng-if=vm.isQueueBusy><i class="icon-refresh icon-spin"></i> Loading...</h5></div>'),e.put("app/applications/list/list.external.html","<h3 ng-if=\"vm.applicationData.items.length === 0\"><p class=text-center>{{vm.noSearchResults}}</p></h3><div ng-show=\"vm.applicationData.items.length > 0\" infinite-scroll=vm.queueScroll() infinite-scroll-container=\"'.viewport-body'\" class=\"queue-infinite-scroll animate fadeIn\" id=queue-external-content><div class=location ng-repeat=\"location in vm.applicationData.items\"><div class=flex-row><div class=flex-column><div class=iconic><div class=iconic-icon bs-tooltip data-title={{location.energySourceName}} data-container=body data-placement=auto><i class=icon-{{::location.energySourceId}}></i></div><div class=iconic-text><div class=iconic-text-main>{{::location.addressLineOne}}</div><div class=iconic-text-sub>{{::location.addressCity}}, {{::location.addressState}} {{::location.addressZip}}</div></div></div></div><div class=\"flex-column text-right location-status\"><span class=\"label label-md status\" ng-class=\"{'label-success':status.indicatorLevel==='Low','label-warning':status.indicatorLevel==='Medium','label-danger':status.indicatorLevel==='High'}\" ng-repeat=\"status in location.statuses\"><i ng-class=\"{'icon-success':status.indicatorLevel==='Low','icon-edit':status.indicatorLevel==='Medium','icon-warning-circle':status.indicatorLevel==='High'}\"></i><span class=hidden-xs>{{::status.text}}</span></span></div></div><table class=\"table table-even-5 table-valign-mid no-margin\"><tr ng-repeat=\"application in location.externalApplications | orderBy:'typeName'\" ng-click=vm.setCurrentApplicationId(application.id) ui-sref=application.status({applicationId:application.id})><td>{{::application.typeName}}</td><td>{{::application.lastModifiedDateTime | date:'mediumDate'}}</td><td>{{::application.customerFullName}}</td><td><span ng-if=application.applicationUDFDetails[1]># {{::application.applicationUDFDetails[1].value}}</span></td><td nowrap><span>{{::application.statusName}}</span> <i class=icon-chevron-right></i></td></tr></table></div><p class=\"clearfix text-center strong\" ng-if=vm.isQueueBusy><i class=\"icon-refresh icon-spin\"></i> Loading...</p></div>"),e.put("app/applications/list/list.html",'<div id=body-container><div class="viewport viewport-with-footer"><div class=viewport-heading><div class=flex-row><div class=flex-column><div id=main-header ng-switch=coreVM.user.isExternal><h1 ng-switch-when=true><i class="page-title-icon icon-applications"></i> My Applications <a type=button class="btn btn-default" ng-click=vm.addApplication()>+ New</a></h1><h1 ng-switch-when=false><i class="page-title-icon icon-applications hidden-xs"></i><select ng-model=vm.queryParams.my class=invisible-select ng-change=vm.updateApplications()><option value=true>My Applications</option><option value=false>All Applications</option></select></h1></div></div><div class="flex-column text-right"><div class=form-inline><div ng-class="vm.statusFilterDisplay ? \'btn-group\' : \'input-group\'" dropdown is-open=status.isopen class="relative margin-right float-left-xs"><button type=button class="btn btn-default dropdown-toggle" dropdown-toggle><i class=icon-filter></i> <span class=hidden-xs>{{vm.statusFilterDisplay ? vm.statusFilterDisplay : \'Filter\'}}</span> <span class="hidden-xs caret" ng-show=vm.statusFilterDisplay></span></button><ul class=dropdown-menu role=menu><li ng-repeat="status in vm.statuses"><a ng-click=vm.filterApplications(status)>{{status.name}}</a></li></ul><button type=button ng-if=vm.statusFilter class="btn btn-default clearFilter" ng-click=vm.clearFilter()><small><i class=icon-x></i></small></button></div><div class=input-group><input type=text class=form-control placeholder=Search ng-model=vm.searchString ng-keypress="vm.searchApplications($event.keyCode, vm.searchString)"> <span class=input-group-btn><a class="input-clear link" ng-if=vm.searchString ng-click=vm.clearSearch()><i class=icon-x></i></a> <button class="btn btn-default hidden-xs" type=submit ng-click=vm.searchApplications(vm.searchString)><i class=icon-search></i></button> <a class="input-clear link visible-xs" ng-if=!vm.searchString ng-click=vm.searchApplications(vm.searchString)><i class=icon-search></i></a></span></div></div></div></div></div><div class="viewport-body queue-viewport"><loading-indicator data-ng-hide=vm.queueTemplate data-class="no-animation animate-slow-2x animate-delay fadeOut"></loading-indicator><div ng-include=vm.queueTemplate class="animate fadeIn"></div></div><div class=viewport-footer><div ng-if=!vm.isUserExternal class=pull-right><button type=button class="btn btn-default" queue-export>Export All</button></div><div class=results><strong>Results:</strong> {{vm.applicationData.totalApplications}} Application<span ng-if="vm.applicationData.totalApplications!==1">s</span> <span ng-if=vm.isUserExternal>for {{vm.applicationData.totalLocations}} Location<span ng-if="vm.applicationData.totalLocations!==1">s</span></span></div></div></div></div>'),e.put("app/applications/list/list.internal.html",'<div infinite-scroll=vm.queueScroll() infinite-scroll-container="\'.viewport-body\'" class="queue-infinite-scroll animate fadeIn" id=queue-internal-content ng-if=vm.applicationData.items><p ng-if="vm.applicationData.items.length===0" ng-hide="vm.loadingData===true" ng-switch=vm.queryParams.my class="text-center lead animate fadeIn"><span ng-switch-when=false>{{vm.noSearchResults}}</span> <span ng-switch-when=true>No applications are currently assigned to you -- hooray!</span></p><table class="table table-valign-mid" id=queue-internal ng-if="vm.applicationData.items.length > 0"><thead><tr><th ng-repeat="header in vm.internalHeaders" ng-click=vm.sort(header.headerId)>{{::header.name}} <i ng-if="header.sort !== \'none\'" class=icon-sort-{{header.sort}}></i></th></tr></thead><tr ng-repeat="application in vm.applicationData.items" ui-sref=application.status({applicationId:application.id})><td><i class="icon-{{::application.energySourceId}} icon-2x" bs-tooltip data-title={{::application.energySourceName}} data-container=body data-placement=auto></i></td><td><div><strong>{{::application.systemAddressLineOne}}</strong></div><small>{{::application.systemAddressLineTwo}}</small></td><td>{{::application.typeName}}</td><td>{{::application.customerFullName}}</td><td ng-repeat="udf in vm.udfsInQueue"><span>{{::vm.getUDFValue(application.applicationUDFDetails, udf.id)}}</span></td><td>{{::application.ownerName}}</td><td>{{::application.lastModifiedDateTime | date:\'mediumDate\'}}</td><td><span class="label label-md" ng-class="{\'label-success\':application.daysRemainingSeverityLevel===\'Low\', \'label-warning\':application.daysRemainingSeverityLevel===\'Medium\', \'label-danger\':application.daysRemainingSeverityLevel===\'High\'}">{{::application.daysRemainingAtStatus}}</span></td><td><span>{{::application.statusName}}</span> <i class=icon-chevron-right></i></td></tr></table><p class="clearfix text-center strong" ng-if=vm.isQueueBusy><i class="icon-refresh icon-spin"></i> Loading...</p></div>'),e.put("app/core/service-manager/unknown.html",'<div class="jumbotron text-center"><h1>Page Not Found!</h1><br><p class=lead>We\'re sorry, but the page that you are looking for could not be found.</p><br><button type=button class="btn btn-primary btn-lg" ng-click="coreVM.goToState(coreVM.previousState, coreVM.previousParams)" ng-if=coreVM.previousState><i class=icon-chevron-left></i> Go back <span ng-show=coreVM.fromState>to <strong>{{coreVM.fromState.title}}</strong></span></button> <button type=button class="btn btn-primary btn-lg" ng-click="coreVM.goToState(\'applications.list\')" ng-hide="coreVM.fromState.name==\'applications.list\'">Go to <span class=demi>Applications</span> <i class=icon-chevron-right></i></button></div>'),e.put("app/dashboard/charts/charts.heading.html",""),e.put("app/dashboard/charts/charts.html",'<div id=installations class="panel panel-default"><div class=panel-heading><div class=pull-right><div class=btn-group ng-init="vm.byMonth=true"><label class="btn btn-default" ng-model=vm.byMonth btn-radio=true ng-click="vm.updateByMonth(\'count\')">Count</label> <label class="btn btn-default" ng-model=vm.byMonth btn-radio=false ng-click="vm.updateByMonth(\'capacity\')">Capacity <small>(kW)</small></label></div></div><div class=panel-title><h5>Submitted Applications <small>by month</small></h5></div></div><div class=panel-body><canvas id=monthly-installations-chart class="chart chart-line" data=vm.systems.data labels=vm.systems.labels height=280px options=vm.systems.options></canvas></div></div><div class=row><div class=col-md-5><div id=time-in-status class="panel panel-default"><div class=panel-heading><div class=panel-title><h5>Average Days per Status <small>Target vs. Actual</small></h5></div></div><div class=panel-body><table class="table table-bordered table-striped table-valign-mid text-center"><thead><tr><th class="no-border col-xs-4"></th><th class=col-xs-4 colspan=2>Completeness Review</th><th class=col-xs-4 colspan=2>Technical Review</th></tr><tr><th>Application</th><th>Target</th><th>Actual</th><th>Target</th><th>Actual</th></tr></thead><tbody><tr><td class=strong>Level 1</td><td>7</td><td><span class="label label-success">5</span></td><td>15</td><td><span class="label label-success">13</span></td></tr><tr><td class=strong>Level 2</td><td>10</td><td><span class="label label-danger">13</span></td><td>20</td><td><span class="label label-success">15</span></td></tr><tr><td class=strong>Level 3</td><td>10</td><td><span class="label label-danger">14</span></td><td>25</td><td><span class="label label-danger">28</span></td></tr><tr><td class=strong>Level 4</td><td>10</td><td><span class="label label-success">9</span></td><td>20</td><td><span class="label label-warning">20</span></td></tr><tr><td class=strong>Net Metering</td><td>10</td><td><span class="label label-danger">11</span></td><td class=text-gray>N/A</td><td class=text-gray>N/A</td></tr></tbody></table><div class="alert alert-info" ng-show="coreVM.tenant !== \'demo\'"><strong>Note:</strong> This table displays static test data for sandbox environments. We will work with you to define your reporting needs.</div></div></div></div><div class=col-md-7><div id=energy-source-installations class="panel panel-default"><div class=panel-heading><div class=pull-right><div class=btn-group ng-init="vm.byEnergySource=true"><label class="btn btn-default" ng-model=vm.byEnergySource btn-radio=true ng-click="vm.updateByEnergySource(\'count\')">Count</label> <label class="btn btn-default" ng-model=vm.byEnergySource btn-radio=false ng-click="vm.updateByEnergySource(\'capacity\')">Capacity <small>(kW)</small></label></div></div><div class=panel-title><h5>Systems per Energy Source</h5></div></div><div class=panel-body><canvas id=installations-by-energy-chart class="chart chart-doughnut" data=vm.energy.data labels=vm.energy.labels legend=true options=vm.energy.options></canvas></div></div></div></div>'),
e.put("app/dashboard/maps/maps.heading.html",""),e.put("app/dashboard/maps/maps.html",'<div class="panel panel-default"><div class=panel-heading><div class=panel-title><h5>Point Map</h5></div></div><div class=panel-body style=min-height:300px><div ng-style=vm.iconMapStyle><ui-gmap-google-map center=vm.pointMap.center zoom=vm.pointMap.zoom options=vm.options><ui-gmap-markers models=vm.pointMarkers coords="\'self\'" idkey=id options="\'options\'" fit="\'true\'"></ui-gmap-markers></ui-gmap-google-map></div></div></div><div class="panel panel-default"><div class=panel-heading><div class=panel-title><h5>Heat Map</h5></div></div><div class=panel-body style=min-height:300px><div ng-style=vm.heatMapStyle><ui-gmap-google-map center=vm.heatlayer.center options=vm.options zoom=vm.heatlayer.zoom><ui-gmap-layer namespace=visualization type=HeatmapLayer show="\'true\'" oncreated=vm.heatlayer.heatLayerCallback fit="\'true\'"></ui-gmap-layer></ui-gmap-google-map></div></div></div>'),e.put("app/external/landing/landing.html",'<div id=landing class=lp-section><div class=container><div class="row text-white"><div class=col-md-5><h1 class="text-large no-margin-top col-sm-12 text-white">Go Green with Solar Energy</h1><div class="col-sm-6 col-md-12"><p class="lead no-margin-top">If you are ready to install a solar system at home, this is the place to start. Every installation is different and you must meet certain requirements before moving forward. Learn more about connecting solar to our system here.</p><button class="btn btn-lg btn-white btn-block" ui-sref=registration>Sign Up</button></div></div><div class="clearfix visible-xs-block"></div><div class="col-md-6 col-md-offset-1 col-sm-6 col-sm-offset-0 col-xs-12"><div class=video><div class="embed-responsive embed-responsive-16by9"><iframe class=embed-responsive-item ng-src={{vm.landingVideoUrl}} frameborder=0 iv_load_policy=3 showinfo=0 autohide=1 controls=0 subtlebranding=0></iframe></div></div></div></div></div><section class="lp-section lp-section-white text-center"><div class=container><div class=row><div class="col-sm-8 col-sm-offset-2 col-xs-12"><h1 class=no-margin-top>Getting Started with Solar</h1><p class=lead>Solar PV systems are clean, quiet, and efficient ways of generating electricity at your home. They leverage sunlight and turn it into electricity for use at your home and by other {{vm.utility}} customers. Let us help you go green.</p><br></div></div><div class=row><div class="col-sm-4 col-xs-12"><img class=img-responsive src=images/landing_thumbnail-1.jpg alt="Solar Photovoltaics (PV) Rebate and Incentive Programs Image"><div class=row><div class="col-xs-10 col-xs-offset-1"><h4>Solar Photovoltaics (PV) Rebate & Incentive Programs</h4><p>Let us help you pay for a new solar PV energy system for your home. {{vm.utility}} offers rebates and other incentives for customers who install solar PV systems for their homes. Click here to connect with one of our installation partners.</p></div></div></div><div class="clearfix visible-xs-block"></div><div class="col-sm-4 col-xs-12"><img class=img-responsive src=images/landing_thumbnail-2.jpg alt="Interconnection and Net Metering Application Procedures Explained Image"><div class=row><div class="col-md-10 col-md-offset-1 col-sm-12 col-sm-offset-0 col-xs-10 col-xs-offset-1"><h4>Interconnection & Net Metering Application Procedures</h4><p>Depending on the system you deploy, the interconnection application process may be different. Different levels are available provided the proposed DG facility passes the system and does not require construction of facilities by {{vm.utility}} to protect reliability and accommodate the interconnection of the DG facility. Start our easy-to-use, on-line application process today.</p></div></div></div><div class="clearfix visible-xs-block"></div><div class="col-sm-4 col-xs-12 column"><img class=img-responsive src=images/landing_thumbnail-3.jpg alt="Find other ways to go green Image"><div class=row><div class="col-xs-10 col-xs-offset-1"><h4>Find Other Ways to Go Green</h4><p>Adding distributed generation is a great way to reduce your impact on the environment, but {{vm.utility}} offers other opportunities as well. Click here to learn more about our home energy checkups and other savings and rebates opportunities.</p></div></div></div></div></div></section><section class="lp-section text-white text-center"><div class=container><div class=row><div class="col-sm-8 col-sm-offset-2 col-xs-10 col-xs-offset-1"><span class="icon-stack icon-3x"><i class="icon-stack-2x icon-circle text-white"></i> <i class="icon-stack-1x icon-user text"></i></span><h3>Qualification for Application</h3><p>The State Commerce Commission established Title 83 State Administrative Code Part 466 (Electric Interconnection of Distributed Generation Facilities) to establish standardized applications and review procedures and agreements for customers wanting to connect generators of 10,000 kVA or less in parallel to a utility\'s electric distribution system.</p></div></div></div></section><section class="lp-section lp-section-white text-center"><div class=container><div class=row><div class="col-sm-8 col-sm-offset-2 col-xs-10 col-xs-offset-1"><span class="icon-stack icon-3x"><i class="icon-stack-2x icon-circle text"></i> <i class="icon-stack-1x icon-review text-white"></i></span><h3>Qualification for Application</h3><p>The State Commerce Commission established Title 83 State Administrative Code Part 466 (Electric Interconnection of Distributed Generation Facilities) to establish standardized applications and review procedures and agreements for customers wanting to connect generators of 10,000 kVA or less in parallel to a utility\'s electric distribution system.</p></div></div></div></section><section class="lp-section text-white text-center"><div class=container><div class=row><div class="col-sm-8 col-sm-offset-2 col-xs-10 col-xs-offset-1"><span class="icon-stack icon-3x"><i class="icon-stack-2x icon-circle text-white"></i> <i class="icon-stack-1x icon-application text"></i></span><h3>Qualification for Application</h3><p>The State Commerce Commission established Title 83 State Administrative Code Part 466 (Electric Interconnection of Distributed Generation Facilities) to establish standardized applications and review procedures and agreements for customers wanting to connect generators of 10,000 kVA or less in parallel to a utility\'s electric distribution system.</p></div></div></div></section></div>'),e.put("app/external/login/login.html",'<div id=login><div class="row"><div class="col-lg-12 col-sm-6 text-center"><p class="lead">Welcome to the new and improved<br>Interconnection and Net Metering homepage</p><p>The Interconnection and Net Metering website is currently being updated to provide you with a user friendly experience.</p><p>Please check back later.</p><br></div></div>'),e.put("app/external/registration/registration.html",'<div id=registration class=row><div class="col-lg-4 col-lg-offset-4 col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2 col-xs-10 col-xs-offset-1"><h1 class=text-center>Register for an Account</h1><form name=registerFrm class=form-horizontal ng-submit=vm.registerUser() novalidate><div class=form-group><div class=col-xs-6 ng-class="{\'has-error\':(registerFrm.firstname.$error.required && (registerFrm.$dirty || registerFrm.$submitted))}"><input type=text id=firstname name=firstname ng-model=vm.userRegModel.FirstName class="form-control input-lg" placeholder="First Name" required></div><div class=col-xs-6 ng-class="{\'has-error\':(registerFrm.lastname.$error.required && (registerFrm.lastname.$dirty || registerFrm.$submitted))}"><input type=text id=lastname name=lastname ng-model=vm.userRegModel.LastName class="form-control input-lg" placeholder="Last Name" required></div><div class=col-xs-12 ng-if="vm.registerText.length > 0"><div class=help-text ng-bind="vm.registerText | field:\'name\'"></div></div></div><div class=form-group ng-class="{\'has-error\':(registerFrm.email.$error.required || registerFrm.email.$error.email || registerFrm.email.$error.pattern || registerFrm.email.$error.isExist) && (registerFrm.email.$dirty||registerFrm.$submitted)}"><div class=col-xs-12><input type=text id=email name=email class="form-control input-lg" placeholder=Email ng-blur=vm.validateEmail() ng-model=vm.userRegModel.Email required ng-pattern="/^[-0-9a-zA-Z.+_]+@[-0-9a-zA-Z.+_]+\\.[a-zA-Z]{2,4}$/"></div><div class=col-xs-12 ng-if="vm.registerText.length > 0"><div class=help-text ng-bind="vm.registerText | field:\'email\'"></div></div></div><div class=form-group><div class=col-xs-6 ng-class="{\'has-error\':(registerFrm.password.$error.required && (registerFrm.$dirty||registerFrm.$submitted))}"><input type=password id=password name=password ng-model=vm.userRegModel.Password class="form-control input-lg" placeholder=Password required></div><div class=col-xs-6 ng-class="{\'has-error\':((registerFrm.confirmpass.$error.required || registerFrm.confirmpass.$error.match) && (registerFrm.confirmpass.$dirty || registerFrm.$submitted))}"><input type=password id=confirmpass name=confirmpass ng-model=vm.userRegModel.ConfirmPassword class="form-control input-lg" placeholder="Confirm Password" required></div><div class=col-xs-12 ng-if="vm.registerText.length > 0"><div class=help-text ng-bind="vm.registerText | field:\'password\'"></div></div></div><div class=form-group><div class="col-xs-12 public-role"><div class="btn-group btn-group-lg btn-group-justified" ng-if="vm.publicRoles.length <= 2"><label class="btn btn-default" ng-repeat="role in vm.publicRoles" ng-model=vm.userRegModel.Role btn-radio="\'{{role.id}}\'"><small>I am a</small><div class=text-larger>{{role.name}}</div></label></div><div class=dropdown ng-if="vm.publicRoles.length > 2"><label type=button class="btn btn-default btn-lg dropdown-toggle btn-block" data-toggle=dropdown aria-haspopup=true aria-expanded=false><span class="col-xs-11 text-left button-label">{{vm.userRegModel.SelectedRole || \'Select Role\'}}</span> <span class="col-xs-1 text-right"><span class=caret></span></span></label><ul class="dropdown-menu btn-block"><li class=btn-lg ng-repeat="role in vm.publicRoles"><a data-ng-click="vm.userRegModel.Role=role.id">{{role.name}}</a></li></ul></div></div><div class=col-xs-12 ng-if="vm.registerText.length > 0"><div class=help-text ng-bind="vm.registerText | field:\'role\'"></div></div></div><div class=form-group><div class=col-xs-12><button type=submit class="btn btn-primary btn-lg btn-block" ng-switch=vm.submitting ng-disabled="vm.submitting==true"><span ng-switch-when=false>Submit</span> <span ng-switch-when=true><i class="icon-refresh icon-spin"></i> Submitting...</span></button><div ng-if=vm.msg class=alert ng-class=vm.msgClass role=alert>{{vm.msg}}</div></div></div></form></div></div>'),e.put("app/settings/account/account.html",'<form class=form-horizontal><div class=form-group><label class="col-sm-1 control-label">Name</label><div class=col-sm-4><input type=text class=form-control id=firstName placeholder="First Name" ng-model=vm.new.firstName></div><div class=col-sm-4><input type=text class=form-control id=lastName placeholder="Last Name" ng-model=vm.new.lastName></div></div><div class=form-group><label class="col-sm-1 control-label">Role</label><div ng-if=vm.account.isExternal class=col-sm-8><select class=form-control ng-options="role for role in vm.publicRoleNames track by role" ng-model=vm.new.roles[0]></select></div><div ng-if=!vm.account.isExternal class=col-sm-8><div class=checkbox ng-repeat="role in vm.account.roleRepresentations"><label><input type=checkbox disabled checked> {{role.name}}</label></div></div></div><div class=form-group><label class="col-sm-1 control-label">Email</label><div class=col-sm-8><div ng-class="{\'input-group\': vm.account.emailConfirmed==false}"><input type=email class=form-control id=email placeholder="Email Address" ng-model=vm.new.email> <span class=input-group-btn ng-if="vm.account.emailConfirmed==false" bs-tooltip data-container=body data-title="Your email address ({{vm.account.email}}) is currently unverified. This will prevent you from submitting applications, though you can still start and save them."><button type=button class="btn btn-danger" ng-click=vm.resendEmailConfirmation()>Resend confirmation email</button></span></div></div><div class=col-sm-1><label class=control-label><i class="icon-help-circle fa-xl" title="What is this used for?" data-content="Your email is used as your username for this site and for all communications generated by this site (notifications, forgot password, etc)." auto-close=true data-placement=right data-trigger=click data-container=body bs-popover></i></label></div></div><div class=form-group><div class=col-sm-9><button class="btn btn-default pull-right" ng-click=vm.updateSettings()>Update Account Information</button></div></div></form>'),e.put("app/settings/contact/contact.html",'<form class=form-horizontal><div class=form-group><label class="col-sm-1 control-label">Company</label><div class=col-sm-8><input type=text class=form-control id=companyName placeholder="Company Name" ng-model=vm.account.companyName></div></div><div class=form-group><label class="col-sm-1 control-label" for=address>Address</label><div class=col-sm-4><input type=text class=form-control id=address placeholder="Address Line 1" ng-model=vm.account.addressLineOne></div><div class=col-sm-4><input type=text class=form-control id=address2 placeholder="Address Line 2" ng-model=vm.account.addressLineTwo></div></div><div class=form-group><div class="col-sm-3 col-sm-offset-1"><input type=text class=form-control id=city placeholder=City ng-model=vm.account.addressCity></div><div class=col-sm-2><select ng-model=vm.account.addressState ng-options="state for state in vm.states" class=form-control><option disabled selected value>State</option></select></div><div class=col-sm-3><input type=text class=form-control id=zip placeholder="Zip Code" ng-model=vm.account.addressZIP></div></div><div class=form-group><label class="col-sm-1 control-label" for=phone>Phone</label><div class=col-sm-8><input type=tel class=form-control id=phone placeholder="Phone Number" ng-model=vm.account.phone></div></div><div class=form-group><div class=col-sm-9><button class="btn btn-default pull-right" ng-click=vm.updateSettings()>Update Contact Information</button></div></div></form>'),e.put("app/settings/password/password.html",'<form class=form-horizontal><div class=form-group><label class="col-sm-2 control-label">Current Password</label><div class=col-sm-7><input type=password class=form-control placeholder="Current Password" ng-model=vm.passwords.oldPassword></div></div><div class=form-group><label class="col-sm-2 control-label">New Password</label><div class=col-sm-7><input type=password class=form-control placeholder="New Password" ng-model=vm.passwords.newPassword></div></div><div class=form-group><label class="col-sm-2 control-label">Confirm New Password</label><div class=col-sm-7><input type=password class=form-control placeholder="Confirm New Password" ng-model=vm.passwords.confirmPassword></div></div><div class=form-group><div class=col-sm-9><button type=button class="btn btn-default pull-right" ng-click=vm.changePassword()>Update Password</button></div></div></form>'),e.put("app/settings/preferences/preferences.html",'<form class=form-horizontal><div class=form-group><div class=col-sm-10><div class=btn-group><label class="btn btn-default" ng-model=vm.account.receivesEmailAlerts btn-radio=true>Yes</label> <label class="btn btn-default" ng-model=vm.account.receivesEmailAlerts btn-radio=false>No</label></div><span class=preference>I want to receive email alerts</span></div></div><div class=form-group><div class=col-sm-10 ng-if=vm.userIsSPOC()><div class=btn-group><label class="btn btn-default" ng-model=vm.account.spocIsAcceptingNewApplications btn-radio=true>Yes</label> <label class="btn btn-default" ng-model=vm.account.spocIsAcceptingNewApplications btn-radio=false>No</label></div><span class=preference>I am accepting new applications</span></div></div><div class=form-group><div class=col-sm-9><button class="btn btn-default pull-right" ng-click=vm.updateSettings()>Update Preferences</button></div></div></form>'),e.put("app/widgets/date-range-selector/date-range-selector.html",'<span class=btn-group ng-click=vm.updateChart($event)><a id=six-months class="btn btn-default active">6M</a> <a id=YTD class="btn btn-default">YTD</a> <a id=twelve-months class="btn btn-default">1Y</a> <a class="btn btn-default" data-placement=bottom data-template=app/widgets/date-range-selector/date-range-selector.popover.html data-animation=am-flip-x data-auto-close=1 bs-popover>Range</a></span>'),e.put("app/widgets/date-range-selector/date-range-selector.popover.html","<div class=popover id=chart-calendar><div class=arrow></div><div class=popover-title>Choose start and end dates:</div><div class=popover-content>Start: <input type=date> End: <input type=date></div></div>"),e.put("app/widgets/file-uploader/file-uploader_full.html",'<div class="fileUpload btn btn-default"><span>Upload File(s)</span> <input type=file class=upload nv-file-select uploader=fileVM.uploader multiple></div><h3 ng-if="fileVM.uploader.queue.length > 0">Upload Queue <small>({{ fileVM.uploader.queue.length }})</small><div ng-if="fileVM.uploader.queue.length > 1" class=pull-right><button type=button class="btn btn-success btn-s" ng-click=fileVM.uploader.uploadAll() ng-disabled=!fileVM.uploader.getNotUploadedItems().length><i class="fa fa-upload"></i> Upload all</button> <button type=button class="btn btn-danger btn-s" ng-click=fileVM.uploader.clearQueue() ng-disabled=!fileVM.uploader.queue.length><i class=icon-delete></i> Remove all</button></div></h3><table class="table table-even-4" ng-if="fileVM.uploader.queue.length > 0"><thead><tr><th>Name</th><th>Type</th><th>Note</th><th></th></tr></thead><tbody><tr ng-repeat="item in fileVM.uploader.queue"><td><strong>{{item.file.name}}</strong></td><td><select class="form-control dropdown-toggle" data-ng-options="fileType.name for fileType in fileVM.fileTypes" data-ng-model=item.file.fileType></select></td><td><input type=text class=form-control data-ng-model=item.file.notes></td><td nowrap class=text-center><button type=button class="btn btn-success btn-xs" ng-click=fileVM.uploader.uploadItem(item) ng-disabled="item.isReady || item.isUploading || item.isSuccess" ng-hide=item.isSuccess><i class="fa fa-upload"></i> Upload</button> <button type=button class="btn btn-danger btn-xs" ng-click=item.remove() ng-hide=item.isSuccess><i class=icon-delete></i> Remove</button> <span ng-show=item.isSuccess><i class="fa fa-check"></i></span> <span ng-show=item.isCancel><i class="fa fa-ban"></i></span> <span ng-show=item.isError><i class=icon-x></i></span></td></tr></tbody></table>'),e.put("app/application/form/edit/editor.form.html",'<div id=form scroll-spy><div class="panel panel-default-inverse"><div class="panel-heading fixed"><div id=form-title class="panel-title print-and-screen" print-section ng-class=vm.animationFadeIn><div class="form-settings pull-right text-right"><h3><span class="label label-default">{{::vm.currentApplication.statusName}}</span></h3></div><h1 class=no-margin><div class=iconic><div class=iconic-icon><i class=icon-{{vm.currentApplication.system.energySourceId}}></i></div><div class=iconic-text><div class=iconic-text-main>{{vm.currentApplication.typeDisplayName}}</div><div class="iconic-text-sub weak">{{vm.currentApplication.customerFullName}} <small>{{vm.currentApplication.system.addressLineOne}}</small></div></div></div></h1></div></div><div id=form-body class=panel-body><h3 id=loading ng-class=vm.animationFadeOutRemove><i class="icon-refresh icon-spin"></i> LOADING...</h3><form name=vm.appForm sf-schema=vm.schema sf-form=vm.form print-remove sf-model=vm.model id=applicationForm ng-class=vm.animationFadeIn editor-status ng-submit=vm.startSubmitProcess() sf-options="{ formDefaults: { ngModelOptions: { updateOn: \'blur\' } }}"></form><div class=form-horizontal print-remove><div class=form-group><div class="col-xs-7 form-submit-btn"><input type=button ng-show=vm.editorStatus.ProgressPercentage ng-click=vm.startSubmitProcess() class="btn btn-primary btn-block" ng-disabled="vm.editorStatus.ProgressPercentage < 100" value="Submit Application"></div></div></div><div sf-schema=vm.printSchema print-only sf-form=vm.printForm sf-model=vm.model id=form-data class="form-horizontal print-section"></div></div></div></div><div id=formNav ng-controller="EditorStatus as formNavVM" class="affix hide-print" ng-class=vm.animationFadeIn print-remove><div class=nav-section><div class=nav-section-content><div id=form-progress-container><progressbar id=form-progress-bar animate=true value=formNavVM.status.ProgressPercentage type=custom></progressbar><div id=form-progress-percent>{{formNavVM.status.ProgressPercentage}}%</div></div><div class=relative ng-class=vm.animationFadeIn id=sideNav du-scroll-container=viewportBody><div class="relative nav-status" ng-repeat="title in formNavVM.navTitles" ng-class="{\'active\' : $first}" du-smooth-scroll={{title.sectionId}} du-scrollspy={{title.sectionId}}><div class=icon-stack><i class="icon-fw icon-stack-2x icon-open-circle-thin"></i><i class="icon-fw icon-stack-1x icon-edit" ng-show="formNavVM.status[title.sectionId]===\'fieldFocus\'"></i> <i class="icon-fw icon-stack-1x icon-success" ng-show="formNavVM.status[title.sectionId]===\'sectionComplete\' || !formNavVM.status[title.sectionId]"></i> <i class="icon-fw icon-stack-1x icon-warning" ng-show="formNavVM.status[title.sectionId]===\'sectionIncomplete\'"></i></div><span>{{title.navTitle}}</span></div></div></div></div><div class=nav-section><div class="nav-section-content more-info" ng-show=formNavVM.activeDisplayName><p>More Information: <strong>{{formNavVM.activeDisplayName}}</strong></p><div ng-repeat="item in formNavVM.helpDocument track by item.fieldName" id={{item.fieldName}} ng-show="formNavVM.active===item.fieldName"><p>{{item.helpText}}</p></div></div></div><div class="nav-section buttons"><div class="nav-section-content actions"><input type=button class="btn btn-primary btn-block" value="View My Applications" ng-click=vm.backToQueue()> <input type=button class="btn btn-primary btn-block" value=Save ng-click=vm.saveApplication()></div></div></div>'),e.put("app/application/form/edit/editor.html","<form-editor></form-editor>"),e.put("app/application/form/edit/editor.submitted.modal.html",'<div class=modal-header><h3 class=modal-title>Would you like to start another application for this system?</h3></div><div class=modal-body><div class=form-group><div class="btn-group btn-group-justified"><label class="btn btn-default" ng-click="vm.yesNextAppType=!vm.yesNextAppType" ng-model=vm.yesNextAppType btn-radio=true><strong>Yes</strong></label> <label class="btn btn-default" ui-sref=applications.list ng-model=vm.yesNextAppType btn-radio=false ng-click="vm.nextTypeModal.dismiss(\'cancel\')"><strong>No</strong>; Go to My Applications</label></div></div><div ng-if="vm.yesNextAppType==true"><label>Select application type</label>&nbsp;<i class=icon-help-circle data-template=app/application/application.add.modal.help.html ng-init="modalVM=vm;modalVM.appTypes=vm.nextTypeOptions" data-trigger=click auto-close=true bs-popover></i><div class="btn-group btn-group-justified" ng-model=vm.nextAppType><a class="btn wrap valign-top" id={{type.id}} ng-if=vm.nextTypeOptions ng-repeat="type in vm.nextTypeOptions | orderBy:type.displayOrder" ng-class="vm.nextAppType==type ? \'btn-primary\' : \'btn-default\'" ng-click=vm.startNextApplication(type)><strong>{{type.name}}</strong><p><small>{{type.detail}}</small></p></a></div></div></div>'),e.put("app/application/messages/post/messages.post.external.html",'<div class=modal-header><h3 class=modal-title>Send Message to <span ng-bind="coreVM.user.isExternal===true ? \'Utility\' : \'Customer\'"></span></h3></div><div class=modal-body><div class=form-group ng-if="coreVM.user.isExternal===false && vm.postTemplates"><label>Message Template <small>(optional)</small></label><select name id ng-model=vm.selectedTemplate class=form-control><option disabled selected value>Select Template</option><option ng-repeat="template in vm.postTemplates" value={{template.body}}>{{template.name}}</option></select></div><div class=form-group><label>Message</label> <textarea class=form-control ng-model=vm.newMessage rows=4 placeholder="Compose message"></textarea></div><div class=form-group><label>Files Attached <small ng-show="vm.attachments.length > 0">({{vm.attachments.length}})</small></label><div class=input-group><div class=input-group-addon><i class=icon-files></i></div><button ng-if="vm.files.length > 0" type=button class="btn btn-default" ng-model=vm.attachments data-html=1 bs-options="file as file.label for file in vm.files" bs-select data-multiple=1 placeholder="Select files" data-icon-checkmark=icon-success ng-disabled="vm.files.length < 1"></button> <input ng-if="vm.files.length < 1" type=text class=form-control placeholder="No files have been uploaded for this application" disabled></div></div></div><div class=modal-footer><div class=row><div class=col-xs-6><button class="btn btn-default btn-block" ng-click=vm.closeModal()>Cancel</button></div><div class=col-xs-6><button class="btn btn-primary btn-block" ng-click=vm.submitExternalPost()>Send</button></div></div></div>'),e.put("app/application/messages/post/messages.post.internal.html",'<div class=modal-header><h3 class=modal-title>Post Internally</h3></div><div class=modal-body><div class=form-group><label>Message</label> <textarea class=form-control ng-model=vm.newMessage rows=4 placeholder="Compose message"></textarea></div><div class=form-group><label>Files Attached <small ng-show="vm.attachments.length > 0">({{vm.attachments.length}})</small></label><div class=input-group><div class=input-group-addon><i class=icon-files></i></div><div ng-if="vm.files.length > 0" class=relative><button type=button class="btn btn-default" ng-model=vm.attachments data-html=1 bs-options="file as file.label for file in vm.files" bs-select data-multiple=1 placeholder="Select files" data-icon-checkmark=icon-success ng-disabled="vm.files.length < 1"></button></div><input ng-if="vm.files.length < 1" type=text class=form-control placeholder="No files have been uploaded for this application" disabled></div></div><div class=form-group><label>Users to Notify <small ng-show="vm.notifyUsers.length > 0">({{vm.notifyUsers.length}})</small></label><div class=input-group><div class=input-group-addon><i class=icon-user></i></div><button type=button class="btn btn-default btn-block text-left" ng-model=vm.notifyUsers data-html=1 bs-options="user as user.label for user in vm.users" bs-select data-multiple=1 placeholder="Select users" data-icon-checkmark="icon-success pull-right" ng-disabled="vm.users.length < 1"></button></div></div></div><div class=modal-footer><div class=row><div class=col-xs-6><button class="btn btn-default btn-block" ng-click=vm.closeModal()>Cancel</button></div><div class=col-xs-6><button class="btn btn-primary btn-block" ng-click=vm.submitInternalPost()>Post</button></div></div></div>'),e.put("app/core/layout/footer/footer.html",'<div id=footer-container class="footer-container printRemove"><div class="footer comed-footer" id=footer ng-controller="Footer as vm"><div class=flex-row><div class=flex-column><table class="table link-menu support"><tr><td>Support</td><td><ul class=list-unstyled><li ng-repeat="supportLink in vm.footerSupportLinks"><a target=_blank ng-href={{supportLink.LinkHref}}>{{supportLink.Text}}</a></li></ul></td></tr></table></div><div class=flex-column><table class="table link-menu contact-us"><tr><td>Contact Us</td><td><ul class=list-unstyled><li ng-repeat="contactLink in vm.footerContactLinks"><a target=_blank ng-href={{contactLink.LinkHref}}>{{contactLink.Text}}</a></li></ul></td></tr></table></div><div class=flex-column><table class="table link-menu site-map"><tr ng-if=coreVM.user><td>Site Map</td><td><ul class=list-unstyled><li ui-sref=applications.queue>My Applications</li><li ui-sref=user.account>Account Settings</li><li ui-sref=help>Help</li><li ng-click=shellVM.logout()>Log Out</li></ul></td></tr><tr ng-if=!coreVM.user><td>Site Map</td><td><ul class=list-unstyled><li ui-sref=login>Log In</li><li ui-sref=forgotPassword>Forgot Password</li><li ui-sref=user.register>Register</li></ul></td></tr></table></div><div class="flex-column hidden-xs"><div class=legal-text><div class=legal><strong>ConnectTheGrid</strong></div><p>Copyright 2015 West Monroe Partners, LLC.<br>All Rights Reserved.</p></div></div></div><div class="flex-row visible-xs legal-text"><div class=separator></div><div class=text-center><strong class=legal>ConnectTheGrid</strong> | <small>Copyright 2015 West Monroe Partners, LLC. All Rights Reserved.</small></div></div></div></div>'),e.put("app/core/layout/navbar/navbar.html",'<nav id=navbar class="navbar navbar-inverse navbar-primary navbar-fixed-top" ng-controller="Navbar as vm" role=navigation><div class="navbar-header printRemove"><button class="navbar-toggle text-white" ng-init="vm.navbarCollapsed = true" ng-click="vm.navbarCollapsed = !vm.navbarCollapsed"><i class=icon-menu></i></button> <a class=navbar-brand ui-sref=applications.list><img ng-src={{vm.internalLogoUrl}} alt=ConnectTheGrid></a></div><img class=printOnly ng-src={{vm.externalLogoUrl}} alt=ConnectTheGrid><div class="collapse navbar-collapse printRemove" ng-class="!vm.navbarCollapsed && \'in\'"><ul class="nav navbar-nav navbar-left"><li><a ui-sref=applications.list ui-sref-active=active ng-click="vm.navbarCollapsed = true"><i class=icon-applications></i> Applications</a></li><li ng-if="!coreVM.user.isExternal && coreVM.hiddenModules && coreVM.hiddenModules.indexOf(\'dashboard\') === -1"><a ui-sref=dashboard.charts ui-sref-active=active ng-click="vm.navbarCollapsed = true"><i class=icon-dashboard></i> Dashboard</a></li><li ng-if="!coreVM.user.isExternal && coreVM.userIsAdmin"><a ui-sref=admin.branding ui-sref-active=active ng-click="vm.navbarCollapsed = true"><i class=icon-admin></i> Admin</a></li><li><a ui-sref=help ui-sref-active=active ng-click="vm.navbarCollapsed = true"><i class=icon-help-circle></i> Help</a></li></ul><ul class="nav navbar-nav navbar-right"><li class=notifications ng-controller="Notifications as notifyVM"><a type=button notifications-polling data-placement=bottom data-template=app/core/layout/navbar/notifications/notifications.html data-animation=am-flip-x data-auto-close=1 bs-popover><span class=hidden-xs><i class=icon-notifications></i> <span class=notify-count ng-if="notifyVM.unreadCount > 0"><span class=icon-stack><i class="icon-stack-xl icon-circle timeline-event-marker-bg transparent"></i> <span class="icon-stack-xl text-white" id=unread-count>{{notifyVM.unreadCount}}</span></span></span></span> <span class=visible-xs><i class=icon-notifications></i> Notifications <span class=badge ng-if="notifyVM.unreadCount > 0">{{notifyVM.unreadCount}}</span></span></a></li><li class=user-profile><a ui-sref=settings.account bs-tooltip data-placement=bottom data-trigger=hover data-title=Settings ng-click="vm.navbarCollapsed = true"><i ng-class="{\'icon-user\': coreVM.user.isExternal, \'icon-user-utility\': coreVM.user.isExternal===false || !coreVM.user.isExternal}"></i> <span class=strong>{{coreVM.user.firstName}} {{coreVM.user.lastName}}<span ng-if=coreVM.user.title class=weak><span class=pipe>|</span><small>{{coreVM.user.title | uppercase}}</small></span></span> <span ng-show="coreVM.user.emailConfirmed == false">&nbsp;<i class=icon-warning-circle></i></span></a></li><li><a ng-click=coreVM.logout() bs-tooltip data-placement=bottom data-trigger=hover data-title="Log Out"><i class="icon-exit hidden-xs"></i> <span class=visible-xs><i class=icon-exit></i> Sign Out</span></a></li></ul></div></nav>'),e.put("app/core/layout/navbar/navbar.landing.html",'<nav id=navbar class="navbar navbar-fixed-top" ng-controller="LandingNavbar as vm" role=navigation><div class=navbar-header><button type=button class=navbar-toggle ng-init="vm.navbarCollapsed = true" ng-click="vm.navbarCollapsed = !vm.navbarCollapsed"><i class="icon-menu icon-2x"></i></button> <a class=navbar-brand ui-sref=login><img class=external-logo ng-src={{vm.externalLogoUrl}} alt=ConnectTheGrid></a></div><div class=navbar-collapse ng-class="{\'in\':vm.navbarCollapsed===false, \'collapsed\':vm.navbarCollapsed===true}" collapse=vm.navbarCollapsed><ul class="nav navbar-nav navbar-right" ng-if=coreVM.user.firstName><li><a ui-sref=user ng-click="vm.navbarCollapsed = true">Welcome, <strong>{{::coreVM.user.firstName}}</strong>!</a></li><li><a ui-sref=applications.list ng-click="vm.navbarCollapsed = true">My Applications</a></li><li><a ng-click=coreVM.logout()>Log Out</a></li></ul></div></nav>'),e.put("app/core/layout/sidenav/sidenav.html",'<md-sidenav class="md-sidenav-left md-whiteframe-z2" md-component-id=left md-is-locked-open="$mdMedia(\'gt-md\')"><md-toolbar class=md-accent><div class=md-padding ng-click="coreVM.goToState(\'settings.account\')" layout=column><div class="icon-stack icon-xl" style=margin-bottom:10px><i class="icon-stack-2x transparent-50 icon-circle"></i> <i ng-class="{\'icon-user\': coreVM.user.isExternal, \'icon-user-utility\': coreVM.user.isExternal===false || !coreVM.user.isExternal}" class=icon-stack-1x></i></div><strong>{{coreVM.user.firstName}} {{coreVM.user.lastName}}</strong><div ng-if=coreVM.user.title><small>{{coreVM.user.title | uppercase}}</small></div></div></md-toolbar><md-content><md-list><md-list-item ng-click="coreVM.goToState(\'applications.list\')"><md-icon md-svg-icon=img/icons/applications.svg></md-icon><p>Applications</p></md-list-item><md-list-item ng-click="coreVM.goToState(\'dashboard.charts\')" ng-if="!coreVM.user.isExternal && coreVM.hiddenModules && coreVM.hiddenModules.indexOf(\'dashboard\') === -1"><md-icon md-svg-icon=img/icons/dashboard.svg></md-icon><p>Dashboard</p></md-list-item><md-list-item ng-click="coreVM.goToState(\'help\')"><md-icon md-svg-icon=img/icons/help-circle.svg></md-icon><p>Help</p></md-list-item></md-list></md-content></md-sidenav>'),e.put("app/core/layout/viewport/viewport.html",'<div id={{coreVM.stateArray[0]}}><div id=body-container><div class=viewport><div class="viewport-heading printSection"><div class="flex-row no-padding"><page-title page={{coreVM.stateArray[0]}} page-name="{{coreVM.stateArray[0] | capitalizeFirstLetter}}"></page-title><ng-include src=vpHeadingTemplate ng-if=vpHeadingTemplate include-replace></ng-include></div></div><div class=viewport-body><div id=leftNav-container class="content-leftNav text-center printRemove"><a class="btn btn-md" ui-sref={{view.state}} ui-sref-active=active ng-repeat="view in subViews" ng-if="(coreVM.user.isExternal===true && (!view.internalOnly || view.internalOnly===false)) || coreVM.user.isExternal===false"><div><i class="icon-2x {{view.icon}}"></i></div><div class=link-label><span>{{view.name}}</span></div></a></div><div class=content-container><div class="panel panel-viewport" id="{{coreVM.stateArray[coreVM.stateArray.length - 1]}}" print><div class="panel-heading printRemove"><h3 class=panel-title>{{coreVM.toState.title}}</h3></div><div class=panel-body ui-view></div></div></div></div></div></div></div>'),e.put("app/external/password/forgot/password.forgot.html",'<div id=forgot-password class=container><div class=row><div class=text-center><h1>Forgot Password</h1></div></div><div class=row><div class="forgot-password-form col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2"><form name=forgotPasswordFrm class=form-horizontal ng-submit=vm.forgotPassword() novalidate><div class=form-group ng-class="{\'has-error\':((forgotPasswordFrm.email.$error.required || forgotPasswordFrm.email.$error.isExist) && (forgotPasswordFrm.email.$dirty || forgotPasswordFrm.$submitted))}"><div class=col-xs-12><input type=email id=email name=email ng-model=vm.forgotPasswordModel.Email class="form-control input-lg" placeholder="Email Address" required ng-pattern="/^[-0-9a-zA-Z.+_]+@[-0-9a-zA-Z.+_]+\\.[a-zA-Z]{2,4}$/"> <i class="icon-refresh fa-spin" ng-show=vm.busy></i></div></div><div class="form-group submit-action-box"><div class=col-xs-12><button type=submit class="btn btn-primary btn-lg btn-block btn-submit">Submit</button></div></div><div ng-if="vm.msg!=\'\'" class=alert ng-class=vm.msgClass role=alert>{{vm.msg}}</div></form><button class="btn btn-primary" ng-if=vm.showReconfirm ng-click=vm.reconfirm()>Confirm Email</button></div></div></div>'),e.put("app/external/password/reset/password.reset.html",'<div id=reset-password class=container><div class=row><div class=text-center><h1>Reset Password</h1><p class=lead>{{::vm.message}}</p></div></div><div class=row><div class="col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2"><form name=resetPasswordFrm class=form-horizontal ng-submit=vm.resetPassword() novalidate><div class=form-group ng-class="{\'has-error\':resetPasswordFrm.password.$error.required && (resetPasswordFrm.password.$dirty||resetPasswordFrm.$submitted)}"><div class=col-xs-12><input type=password id=password name=password ng-model=vm.resetPasswordModel.newPassword class="form-control input-lg" placeholder="New Password" ng-blur=vm.checkPasswordMatch() required></div></div><div class=form-group ng-class="{\'has-error\':((resetPasswordFrm.confirmpass.$error.required || resetPasswordFrm.confirmpass.$error.match) && (resetPasswordFrm.$submitted || resetPasswordFrm.confirmpass.$dirty))}"><div class=col-xs-12><input type=password id=confirmpass name=confirmpass ng-model=vm.resetPasswordModel.confirmPassword class="form-control input-lg" placeholder="Confirm New Password" ng-blur=vm.checkPasswordMatch() required></div></div><div class="form-group submit-action-box"><div class=col-xs-12><button type=submit class="btn btn-primary btn-lg btn-block btn-submit">Submit</button></div></div><div ng-if="vm.msg!=\'\'" class=alert ng-class=vm.msgClass role=alert>{{vm.msg}}</div></form></div></div></div>'),e.put("app/application/form/edit/tenants/default.payment.modal.html",'<div class=modal-header><h3 class=modal-title>Electronic Payment</h3></div><div class=modal-body><div class=form-group><label>Cardholder Name</label> <input class="form-control disabled" disabled placeholder="CTG User"></div><div class=form-group><label>Credit Card #</label> <input class="form-control disabled" disabled placeholder=****-****-****-1234></div><div class=form-group><label>Expiration Date</label> <input class="form-control disabled" disabled placeholder=01/01></div><div class=form-group><label>CCV</label> <input class="form-control disabled" disabled placeholder=123></div><div class="alert alert-info"><strong>Note:</strong> Electronic payment is disabled for sandbox environments. We will work with you to define your electronic payment needs.</div></div><div class=modal-footer><div class=row><div class=col-xs-6><button class="btn btn-default btn-block" ng-click="vm.paymentModal.dismiss(\'cancel\')">Cancel</button></div><div class=col-xs-6><button class="btn btn-primary btn-block disabled" disabled>Submit</button></div></div></div>'),e.put("app/core/layout/navbar/notifications/notifications.html",'<div class=popover id=notifications><div class=arrow></div><div class=popover-title>You have <strong>{{notifyVM.unreadCount}}</strong> unread notification<span ng-hide="notifyVM.unreadCount==1">s</span>.</div><div class="popover-content popover-list"><div class=list-group><div class="list-group-item {{ notifyVM.severityLevelClasses[notification.severityLevel] }}" ng-repeat="notification in notifyVM.notifications" ng-click=notifyVM.readNotification(notification);$hide() ui-sref="{{ notifyVM.goToNotificationSource(notification) }}" ui-sref-opts="{reload: true, notify: true}" ng-class="{ \'is-read\': notification.isRead==true }"><span class="date pull-right"><small>{{notification.sentDateTime | date:\'mediumDate\'}}</small></span><div class=iconic><div class=iconic-icon><i ng-class="{\'icon-messages\': notification.type==\'NewApplicationPost\', \'icon-application\': notification.type==\'NewApplicationOwner\' || notification.type ==\'NewApplicationStatus\', \'icon-status\': notification.type==\'DaysRemainingThresholdReached\', \'icon-warning-circle\': notification.type==\'DaysRemainingDeadlineReached\'}"></i></div><div class=iconic-text><div class=iconic-text-main>{{notification.subjectLineOne}}</div><div class=iconic-text-sub><strong>{{notification.subjectLineTwo}}</strong></div></div></div><div class=iconic><div class=iconic-icon><i class="icon-circle text-clear"></i></div><div class=notification-body>{{notification.body}}</div></div></div></div></div><div class=popover-footer ng-if="notifyVM.totalCount > 0"><div>Displaying <strong>{{notifyVM.notifications.length}}</strong> of <strong>{{notifyVM.totalCount}}</strong> notifications.</div><input type=button class="btn btn-xs btn-default" ng-click=notifyVM.readAll() value="Mark as Read" ng-if="notifyVM.unreadCount > 0" ng-disabled=notifyVM.disableMarkAsRead> <input type=button class="btn btn-xs btn-default" ng-click=notifyVM.fetchMoreNotifications() value="Load More" ng-if="notifyVM.notifications.length < notifyVM.totalCount"></div></div>')}]);